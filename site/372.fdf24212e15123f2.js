"use strict";(self.webpackChunktukiweb=self.webpackChunktukiweb||[]).push([[372],{372:(Ct,_,r)=>{r.r(_),r.d(_,{VentaagalponModule:()=>It});var f=r(6814),c=r(7664),t=r(4946);let k=(()=>{class i{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["ventaagalpon-main"]],decls:1,vars:0,template:function(n,a){1&n&&t._UZ(0,"router-outlet")},dependencies:[c.lC],encapsulation:2})}return i})();var v=r(5413),M=r(3297),g=r(7757),w=r(1106),p=r(3259),m=r(95),h=r(9324),b=r(1532),x=r(7213),T=r(6084),E=r(707),A=r(6130),S=r(2898),L=r(2772),Z=r(7773),F=r(7492);let D=(()=>{class i{constructor(e){this.dataService=e,this.galpon=new Z.e,this.dataresumen={content:[],columns:[{field:"notatipo",columnName:"Tipos"},{field:"producto.id",columnName:"ID"},{field:"producto.nombre",columnName:"Producto"},{field:"cantidad",columnName:"Cantidad"}],foot:{content:["TOTAL",0],cols:[{colspan:"2",index:0,align:"right"},{colspan:"1",index:1,align:"right"}]}},this.findcuentacfg={path:"/ventas/ventaagalpon/byentidad",columns:["id","nombre"]},this.report={content:[],columns:[{field:"nota.id",columnName:"ID"},{field:"nota.fechapendiente",columnName:"F.Pedido",type:"datetime"},{field:"nota.tipo",columnName:"Tipo"},{field:"notadetalle.producto.nombre",columnName:"Producto"},{field:"notadetalle.cantidad",columnName:"Cantidad"},{field:"nota.estado",columnName:"Estado"}]}}ngOnInit(){}updateData(e){this.galpon.cuenta=e,this.getGalpon(),this.getData()}getGalpon(){this.dataService.getdata("/ventas/ventaagalpon/galpon",{id:this.galpon.cuenta.id}).subscribe(e=>{this.galpon=e})}getData(){this.dataService.getdata("/ventas/ventaagalpon/resumenalimento",{id:this.galpon.cuenta.id}).subscribe(e=>{this.dataresumen.content=e,this.dataresumen.foot.content[1]=this.dataresumen.content.reduce((n,a)=>"ENTREGA"===a.notatipo?n+a.cantidad:n-a.cantidad,0)}),this.dataService.getdata("/ventas/ventaagalpon/galponnotas",{id:this.galpon.cuenta.id}).subscribe(e=>{this.report.content=e})}tableAction(e){}cuentaSelected(e){this.galpon.cuenta=e,this.getGalpon(),this.getData()}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(g.D))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["galpondetalle"]],decls:29,vars:10,consts:[[1,"card"],[1,"mo-toolsbar"],[1,"mo-first"],[1,"mo-second"],["for","entidad"],[3,"config","itemSelected"],[1,"p-fluid","grid","mo-panel-content"],[1,"p-field","col-12","md:col-12","form-group"],[1,"input-control"],[1,"p-field","col-12","md:col-12"],[3,"data"],[3,"data","action"]],template:function(n,a){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),t._uU(4,"Detalle de entregas"),t.qZA()(),t.TgZ(5,"div",3)(6,"label",4),t._uU(7,"Buscar entidad:"),t.qZA(),t.TgZ(8,"mo-autocomplete",5),t.NdJ("itemSelected",function(s){return a.cuentaSelected(s)}),t.qZA()()(),t.TgZ(9,"div",6)(10,"div",7)(11,"label"),t._uU(12,"Entidad:"),t.qZA(),t.TgZ(13,"span",8),t._uU(14),t.qZA()(),t.TgZ(15,"div",7)(16,"label"),t._uU(17,"Cuenta:"),t.qZA(),t.TgZ(18,"span",8),t._uU(19),t.qZA()(),t.TgZ(20,"div",7)(21,"label"),t._uU(22,"Cantidad:"),t.qZA(),t.TgZ(23,"span",8),t._uU(24),t.qZA()(),t.TgZ(25,"div",9),t._UZ(26,"mo-report",10),t.qZA(),t.TgZ(27,"div",9)(28,"mo-report",11),t.NdJ("action",function(s){return a.tableAction(s)}),t.qZA()()()()),2&n&&(t.xp6(8),t.Q6J("config",a.findcuentacfg),t.xp6(6),t.lnq("",a.galpon.cuenta.entidad.id," | ",a.galpon.cuenta.entidad.nombre," | ",a.galpon.cuenta.entidad.direccion,""),t.xp6(5),t.lnq("",a.galpon.cuenta.id," | ",a.galpon.cuenta.nombre," | ",a.galpon.cuenta.descripcion,""),t.xp6(5),t.Oqu(a.galpon.cantidad),t.xp6(2),t.Q6J("data",a.dataresumen),t.xp6(2),t.Q6J("data",a.report))},dependencies:[F.J,h.t],encapsulation:2})}return i})();const N=["respform"],P=["notaform"],V=["notamanage"],H=["galpondetalle"];let R=(()=>{class i{constructor(e,n){this.formBuilder=e,this.dataService=n,this.ruta="/ventas/ventaagalpon",this.display=!1,this.transporte=new v.e,this.formEvent=new t.vpe}ngOnInit(){}salir(){this.display=!1,this.formEvent.emit({})}newForm(e){this.transporte=e,this.respform.open(this.transporte),this.display=!0}updateForm(e){this.transporte=e,this.display=!0,this.respform.open(this.transporte),this.clearNotaForm()}onNotaFormEvent(e){switch(e.action){case"found":this.galpondetalle.updateData(e.data);break;case"update":this.galpondetalle.updateData(e.data.cuenta)}this.notamanage.update(this.transporte.id)}onNotaManageEvent(e){switch(e.action){case"update":this.nform.updateForm(e.value.nota),this.galpondetalle.updateData(e.value.nota.cuenta);break;case"delete":this.clearNotaForm()}}onRespFormEvent(e){this.transporte=e;let n=new T.Q;n.transporte=this.transporte,this.nform.newForm(n),this.notamanage.update(this.transporte.id)}clearNotaForm(){let e=new T.Q;e.transporte=this.transporte,this.nform.newForm(e),this.notamanage.update(this.transporte.id)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(m.QS),t.Y36(g.D))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["ventaagalpon-form"]],viewQuery:function(n,a){if(1&n&&(t.Gf(N,7),t.Gf(P,7),t.Gf(V,7),t.Gf(H,7)),2&n){let o;t.iGM(o=t.CRH())&&(a.respform=o.first),t.iGM(o=t.CRH())&&(a.nform=o.first),t.iGM(o=t.CRH())&&(a.notamanage=o.first),t.iGM(o=t.CRH())&&(a.galpondetalle=o.first)}},outputs:{formEvent:"formEvent"},decls:36,vars:5,consts:[[1,"mo-layout-content",3,"hidden"],[1,"grid"],[1,"col-6"],[1,"card"],[1,"mo-toolsbar"],[1,"mo-first"],[1,"mo-second"],["pButton","","pRipple","","type","button","icon","pi pi-arrow-left","pTooltip","Salir",1,"p-button-rounded","p-button-text",3,"click"],[1,"mo-panel-content"],[3,"path","formEvent"],["respform",""],[1,"card",3,"hidden"],[3,"path","notaFormEvent"],["notaform",""],["path","/ventas/ventaagalpon",3,"notaManageEvent"],["notamanage",""],["galpondetalle",""]],template:function(n,a){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2"),t._uU(7,"Registro Transporte"),t.qZA()(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return a.salir()}),t.qZA()()(),t.TgZ(10,"div",8)(11,"resp-form",9,10),t.NdJ("formEvent",function(s){return a.onRespFormEvent(s)}),t.qZA()()(),t.TgZ(13,"div",11)(14,"div",4)(15,"div",5)(16,"h3"),t._uU(17,"Programaci\xf3n de pedido"),t.qZA()(),t.TgZ(18,"div",6)(19,"button",7),t.NdJ("click",function(){return a.salir()}),t.qZA()()(),t.TgZ(20,"div",8)(21,"nota-form",12,13),t.NdJ("notaFormEvent",function(s){return a.onNotaFormEvent(s)}),t.qZA()()(),t.TgZ(23,"div",11)(24,"div",4)(25,"div",5)(26,"h2"),t._uU(27,"Programa"),t.qZA()(),t.TgZ(28,"div",6)(29,"button",7),t.NdJ("click",function(){return a.salir()}),t.qZA()()(),t.TgZ(30,"div",8)(31,"notas-manage",14,15),t.NdJ("notaManageEvent",function(s){return a.onNotaManageEvent(s)}),t.qZA()()()(),t.TgZ(33,"div",2),t._UZ(34,"galpondetalle",null,16),t.qZA()()()),2&n&&(t.Q6J("hidden",!a.display),t.xp6(11),t.Q6J("path",a.ruta),t.xp6(2),t.Q6J("hidden",0===a.transporte.id),t.xp6(8),t.Q6J("path",a.ruta),t.xp6(2),t.Q6J("hidden",0===a.transporte.id))},dependencies:[p.u,E.Hq,A.T,S.k,L.Z,D],encapsulation:2})}return i})();const Q=["form"];function B(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"div",11)(6,"h2"),t._uU(7,"Entregas a Galpones"),t.qZA()(),t.TgZ(8,"div",12)(9,"button",13),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.openTransporteProddia())}),t.TgZ(10,"i",14),t._uU(11,"local_shipping"),t.qZA()(),t.TgZ(12,"button",15),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.openProddia())}),t.TgZ(13,"i",14),t._uU(14,"event_available"),t.qZA()(),t.TgZ(15,"button",16),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.open())}),t.TgZ(16,"i",14),t._uU(17,"add_circle_outline"),t.qZA()(),t.TgZ(18,"p-calendar",17),t.NdJ("ngModelChange",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.currentDate=a)})("onSelect",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.onSelectedDate(a))}),t.qZA()()(),t.TgZ(19,"div",18)(20,"mo-report",19),t.NdJ("action",function(a){t.CHM(e);const o=t.oxw();return t.KtG(o.tableAction(a))}),t.qZA()()()()()()}if(2&i){const e=t.oxw();t.xp6(18),t.Q6J("ngModel",e.currentDate),t.xp6(2),t.Q6J("data",e.data)}}const y=function(){return{width:"50vw"}},J=[{path:"",component:k,children:[{path:"",component:(()=>{class i{constructor(e,n){this.dataService=e,this.confirmService=n,this.path="/ventas/ventaagalpon",this.displayProducciondia=!1,this.proddia={content:[],columns:[{field:"producto.nombre",columnName:"Producto"},{field:"cantidad",columnName:"Cantidad",align:"right"}],foot:{content:["TOTAL",0],cols:[{colspan:"1",index:0,align:"right"},{colspan:"1",index:1,align:"right"}]}},this.displayProducciontransporte=!1,this.display=!0,this.currentDate=new Date,this.data={content:[],rows:{class:"pendiente",condition:a=>"PENDIENTE"===a.estado},columns:[{field:"id",columnName:"Id"},{field:"fecha",columnName:"Fecha",type:"date"},{field:"conductor",columnName:"Conductor"},{field:"comentario",columnName:"Comentario"},{field:"estado",columnName:"Estado"},{field:"cantidad",columnName:"Alimento",align:"right"},{actions:[{iconname:"delete_forever",iconclass:"material-icons-round",event:"delete",condition:a=>"PENDIENTE"==a.estado},{iconname:"arrow_forward",iconclass:"material-icons-outlined mo-icons-center",event:"modify",condition:a=>!0}]}]},this.reportprodtrans={content:[],columns:[{field:"transporte.conductor",columnName:"Transporte"},{field:"producto.nombre",columnName:"Producto"},{field:"cantidad",columnName:"Cantidad",align:"right"}]}}ngOnInit(){this.getdata()}getdata(){var e=new M.y;e.ordersby=["tr.id"],e.date=this.currentDate,this.dataService.postdata(this.path+"/transporte",e).subscribe(n=>{this.data.content=n})}open(){this.display=!1,this.form.newForm(new v.e)}onSelectedDate(e){this.currentDate=e,this.getdata()}tableAction(e){switch(e.event){case"modify":this.display=!1,this.form.updateForm(e.row);break;case"delete":this.confirmService.setconfirm({message:"Eliminar '"+e.row.id+"'?",accept:()=>{this.dataService.deletedata(this.path+"/respdelete",{id:e.row.id}).subscribe(a=>{this.getdata()})}})}}formEvent(e){this.display=!0,this.getdata()}openProddia(){this.dataService.getdata(this.path+"/producciondia",{date:this.currentDate}).subscribe(e=>{this.proddia.content=e,this.proddia.foot.content[1]=this.proddia.content.map(n=>n.cantidad).reduce(function(n,a){return n+a})}),this.displayProducciondia=!0}openTransporteProddia(){this.dataService.getdata(this.path+"/transproddia",{date:this.currentDate}).subscribe(e=>{this.reportprodtrans.content=e}),this.displayProducciontransporte=!0}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(g.D),t.Y36(w.I))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["ventaagalpon-manage"]],viewQuery:function(n,a){if(1&n&&t.Gf(Q,7),2&n){let o;t.iGM(o=t.CRH())&&(a.form=o.first)}},decls:7,vars:13,consts:[["class","mo-layout-content",4,"ngIf"],[3,"formEvent"],["form",""],["header","Produccion dia",3,"visible","modal","visibleChange"],[3,"data"],["header","Produccion por Transporte",3,"visible","modal","visibleChange"],[1,"mo-layout-content"],[1,"grid"],[1,"col-12"],[1,"card"],[1,"mo-toolsbar"],[1,"mo-first"],[1,"mo-second"],["pTooltip","Produccion por transporte dia",1,"mo-button",3,"click"],[1,"material-icons-outlined","mo-icons-center"],["pTooltip","Produccion d\xeda",1,"mo-button",3,"click"],["pTooltip","Registrar Transporte",1,"mo-button",3,"click"],["dateFormat","dd MM yy","inputId","dateformat",3,"ngModel","ngModelChange","onSelect"],[1,"mo-panel-content"],[3,"data","action"]],template:function(n,a){1&n&&(t.YNc(0,B,21,2,"div",0),t.TgZ(1,"ventaagalpon-form",1,2),t.NdJ("formEvent",function(s){return a.formEvent(s)}),t.qZA(),t.TgZ(3,"p-dialog",3),t.NdJ("visibleChange",function(s){return a.displayProducciondia=s}),t._UZ(4,"mo-report",4),t.qZA(),t.TgZ(5,"p-dialog",5),t.NdJ("visibleChange",function(s){return a.displayProducciontransporte=s}),t._UZ(6,"mo-report",4),t.qZA()),2&n&&(t.Q6J("ngIf",a.display),t.xp6(3),t.Akn(t.DdM(11,y)),t.Q6J("visible",a.displayProducciondia)("modal",!0),t.xp6(1),t.Q6J("data",a.proddia),t.xp6(1),t.Akn(t.DdM(12,y)),t.Q6J("visible",a.displayProducciontransporte)("modal",!0),t.xp6(1),t.Q6J("data",a.reportprodtrans))},dependencies:[f.O5,p.u,m.JJ,m.On,h.t,b.f,x.V,R],encapsulation:2})}return i})()},{path:"**",redirectTo:""}]}];let O=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[c.Bz.forChild(J),c.Bz]})}return i})();var U=r(8368),G=r(2454),I=r(5219),$=r(2537),q=r(4562),z=r(4480);let vt=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=t.oAB({type:i});static \u0275inj=t.cJS({imports:[f.ez,c.Bz,I.m8,z.T,p.z,$.w,q.X,c.Bz,I.m8,p.z]})}return i})();var ht=r(4553),bt=r(9604),xt=r(7090),Tt=r(7163),yt=r(1310);let It=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[f.ez,O,U.U,G.q,ht.W,bt.w,xt.$,Tt.o,yt.H,b._8,m.UX,m.u5,vt,x.S]})}return i})()}}]);