"use strict";(self.webpackChunktukiweb=self.webpackChunktukiweb||[]).push([[592],{2611:(h,l,n)=>{n.d(l,{W:()=>e});class e{constructor(){this.id=0,this.nombre="",this.descripcion=""}}},8528:(h,l,n)=>{n.d(l,{G:()=>t});var e=n(8555);class t{constructor(){this.id=0,this.cuenta=new e.r,this.total=0,this.fecha=new Date,this.estado="",this.gastos=[]}}},6042:(h,l,n)=>{n.d(l,{j:()=>_});var e=n(8555),t=n(2743),s=n(2611);class _{constructor(){this.id="0",this.catalogo=new s.W,this.transfer=new t.F,this.cuenta=new e.r,this.fecha=void 0,this.detalle="",this.nronota="",this.cantidad=0,this.pu=0,this.total=0}}},1638:(h,l,n)=>{n.d(l,{r:()=>e});class e{constructor(){this.id=0,this.nombre="",this.basico=""}}},9715:(h,l,n)=>{n.d(l,{e:()=>t});var e=n(8555);class t{constructor(){this.cuenta=new e.r,this.cantidad=0}}},2898:(h,l,n)=>{n.d(l,{k:()=>u});var e=n(4946),t=n(6084),s=n(5569),_=n(7757),m=n(1106),g=n(7492),E=n(66);const p=["dataeditor"];let u=(()=>{class f{constructor(o,a){this.dataService=o,this.confirmService=a,this.tipo="",this.path="",this.notaFormEvent=new e.vpe,this.nota=new t.Q,this.editable=!1,this.cuentabycuentacfg={path:"/bycuenta",columns:["nombre","id","entidad.nombre","entidad.id"]},this.cuentabyentidadcfg={path:"/byentidad",columns:["nombre","id","entidad.nombre","entidad.id"]},this.datanotas={columns:[{editable:!1,field:"id",columnName:"Id"},{editable:!0,field:"producto.nombre",columnName:"Producto",input:{type:"autocomplete",path:"/productos",columns:["id","nombre"]}},{editable:!0,field:"cantidad",columnName:"CANTIDAD",input:{type:"numeric",precision:"17",scale:"4"}}],content:[]}}ngOnInit(){"RECEPCION"===this.tipo&&(this.datanotas.columns.push({editable:!0,field:"pu",columnName:"Pu",input:{type:"numeric",precision:"17",scale:"4"}}),this.datanotas.columns.push({editable:!1,field:"total",columnName:"Total"})),this.datanotas.columns.push({actions:[{iconclass:"pi pi-trash",event:"delete",condition:o=>0!==o.id}]})}newForm(o){this.nota=o,this.clearform()}updateForm(o){this.dataService.getdata(this.path+"/findnotaforedit",{id:o.id}).subscribe(a=>{this.nota=a,this.fillform()})}foundCuenta(o){let a=new t.Q;a.transporte=this.nota.transporte,this.nota=a,this.nota.cuenta=o,this.fillform(),this.notaFormEvent.emit({action:"found",data:this.nota.cuenta})}enterValue(o){"producto.nombre"===o.field?(mosetfieldvalue(this.nota.detalle[o.row],"producto.id",o.value.id),mosetfieldvalue(this.nota.detalle[o.row],"producto.nombre",o.value.nombre)):mosetfieldvalue(this.nota.detalle[o.row],o.field,o.value);let i,a=this.nota.detalle[o.row];if(i="RECEPCION"===this.tipo?!(0===this.nota.cuenta.id||0===a.producto.id||0===a.cantidad||0===a.pu):!(0===this.nota.cuenta.id||0===a.producto.id||0===a.cantidad),i){let c=new t.Q;c.id=this.nota.id,c.transporte=this.nota.transporte,c.cuenta.id=this.nota.cuenta.id,c.cuentadst.id=this.nota.cuentadst.id,c.detalle.push(new s.y),c.detalle[0].id=a.id,c.detalle[0].producto.id=a.producto.id,c.detalle[0].cantidad=a.cantidad,c.detalle[0].pu=a.pu,this.dataService.postdata(this.path+"/notasave",c).subscribe(r=>{this.nota.id=r.id,this.nota.total=r.total,this.nota.cuenta=r.cuenta,this.nota.cuentadst=r.cuentadst,this.nota.detalle[o.row]=r.detalle[0],this.dataeditor.addRow(new s.y,"id"),this.notaFormEvent.emit({action:"update",data:this.nota})})}}rowActionEvent(o){"delete"===o.event&&this.confirmService.setconfirm({message:"Eliminar item Nro '"+o.row.id+"'?",accept:()=>{this.dataService.getdata(this.path+"/ndetdelete",{id:o.row.id}).subscribe(i=>{})}})}fillform(){this.dataeditor.updateData(this.nota.detalle),this.dataeditor.addRow(new s.y,"id")}clearform(){this.dataeditor.updateData(this.nota.detalle)}getnota(){this.dataService.getdata(this.path+"/findnotaforedit",{id:this.nota.id}).subscribe(o=>{this.nota=o,this.fillform()})}static#t=this.\u0275fac=function(a){return new(a||f)(e.Y36(_.D),e.Y36(m.I))};static#e=this.\u0275cmp=e.Xpm({type:f,selectors:[["nota-form"]],viewQuery:function(a,i){if(1&a&&e.Gf(p,7),2&a){let c;e.iGM(c=e.CRH())&&(i.dataeditor=c.first)}},inputs:{tipo:"tipo",path:"path"},outputs:{notaFormEvent:"notaFormEvent"},decls:21,vars:10,consts:[[1,"p-fluid","grid"],[1,"p-field","col-12","form-group"],[1,"input-control",3,"config","path","itemSelected"],[1,"p-field","col-12","md:col-12","form-group"],["for","entidadnombre"],[1,"input-control"],[3,"data","path","cellEnterValueEvent","rowActionEvent"],["dataeditor",""]],template:function(a,i){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"label"),e._uU(3,"Por entidad:"),e.qZA(),e.TgZ(4,"mo-autocomplete",2),e.NdJ("itemSelected",function(r){return i.foundCuenta(r)}),e.qZA()(),e.TgZ(5,"div",1)(6,"label"),e._uU(7,"Por cuenta:"),e.qZA(),e.TgZ(8,"mo-autocomplete",2),e.NdJ("itemSelected",function(r){return i.foundCuenta(r)}),e.qZA()(),e.TgZ(9,"div",3)(10,"label",4),e._uU(11,"Entidad:"),e.qZA(),e.TgZ(12,"span",5),e._uU(13),e.qZA()(),e.TgZ(14,"div",3)(15,"label",4),e._uU(16,"Cuenta:"),e.qZA(),e.TgZ(17,"span",5),e._uU(18),e.qZA()()(),e.TgZ(19,"mo-dataeditor",6,7),e.NdJ("cellEnterValueEvent",function(r){return i.enterValue(r)})("rowActionEvent",function(r){return i.rowActionEvent(r)}),e.qZA()),2&a&&(e.xp6(4),e.Q6J("config",i.cuentabyentidadcfg)("path",i.path),e.xp6(4),e.Q6J("config",i.cuentabycuentacfg)("path",i.path),e.xp6(5),e.AsE("",i.nota.cuenta.entidad.id,"-",i.nota.cuenta.entidad.nombre,""),e.xp6(5),e.AsE("",i.nota.cuenta.id,"-",i.nota.cuenta.nombre,""),e.xp6(1),e.Q6J("data",i.datanotas)("path",i.path))},dependencies:[g.J,E.q],encapsulation:2})}return f})()},7090:(h,l,n)=>{n.d(l,{$:()=>E});var e=n(6814),t=n(8368),s=n(95),_=n(961),m=n(7432),g=n(4946);let E=(()=>{class p{static#t=this.\u0275fac=function(d){return new(d||p)};static#e=this.\u0275mod=g.oAB({type:p});static#a=this.\u0275inj=g.cJS({imports:[e.ez,t.U,s.UX,_.q,m.V]})}return p})()},9095:(h,l,n)=>{n.d(l,{R:()=>p});var e=n(9715),t=n(4946),s=n(7757),_=n(6814),m=n(9324);function g(u,f){if(1&u&&t._UZ(0,"mo-report",4),2&u){const d=t.oxw();t.Q6J("data",d.entregas)}}function E(u,f){if(1&u&&t._UZ(0,"mo-report",4),2&u){const d=t.oxw();t.Q6J("data",d.recepciones)}}let p=(()=>{class u{constructor(d){this.dataService=d,this.galpon=new e.e,this.resumen={caption:"Resumen de Alimento",content:[],columns:[{field:"notatipo",columnName:"Tipos"},{field:"producto.id",columnName:"ID"},{field:"producto.nombre",columnName:"Producto"},{field:"cantidad",columnName:"Cantidad",align:"right"}],foot:{content:["TOTAL",0],cols:[{colspan:"3",index:0,align:"right"},{colspan:"1",index:1,align:"right"}]}},this.entregas={caption:"NOTAS DE ENTREGAS",content:[],columns:[{field:"nota.transporte.conductor",columnName:"Trans."},{field:"nota.transporte.fecha",columnName:"Fecha",type:"datetime"},{field:"nota.tipo",columnName:"Tipo"},{field:"nota.voucher.doccode",columnName:"Nro"},{field:"nota.total",columnName:"Total(Bs)",align:"right"},{field:"notadetalle.producto.nombre",columnName:"Producto"},{field:"notadetalle.cantidad",columnName:"Cant.",align:"right"},{field:"notadetalle.pu",columnName:"Pu",align:"right"},{field:"notadetalle.total",columnName:"S.Total(Bs)",align:"right"}],foot:{content:["TOTAL ENTREGAS",0],cols:[{colspan:"8",index:0,align:"right"},{colspan:"1",index:1,align:"right"}]}},this.recepciones={caption:"NOTAS DE RECEPCI\xd3N",content:[],columns:[{field:"nota.transporte.conductor",columnName:"Trans."},{field:"nota.transporte.fecha",columnName:"Fecha",type:"datetime"},{field:"nota.voucher.doccode",columnName:"Nro"},{field:"nota.total",columnName:"Total(Bs)",align:"right"},{field:"notadetalle.producto.nombre",columnName:"Producto"},{field:"notadetalle.cantidad",columnName:"Cant.",align:"right"},{field:"notadetalle.pu",columnName:"Pu",align:"right"},{field:"notadetalle.total",columnName:"S.Total(Bs)",align:"right"}],foot:{content:["TOTAL RECEPCIONES",0],cols:[{colspan:"7",index:0,align:"right"},{colspan:"1",index:1,align:"right"}]}},this.transacciones={caption:"OTRAS TRANSACCIONES",content:[],columns:[{field:"voucherdetail.voucher.id",columnName:"Id"},{field:"voucherdetail.voucher.vdate",columnName:"Fecha",type:"datetime"},{field:"voucherdetail.voucher.vtype",columnName:"Tipo"},{field:"voucherdetail.voucher.doccode",columnName:"Nro Nota"},{field:"voucherdetail.voucher.description",columnName:"Detalle"},{field:"voucherdetail.voucher.comment",columnName:"Coment."},{field:"voucherdetail.voucher.agreement",columnName:"Conformidad"},{field:"monto",columnName:"Monto",align:"right"}],foot:{content:["TOTAL TRANS.",0],cols:[{colspan:"7",index:0,align:"right"},{colspan:"1",index:1,align:"right"}]}}}ngOnInit(){}open(d){this.galpon=d,this.resumen.foot.content[1]=this.galpon.cuenta.id,this.getData()}update(){this.getData()}getData(){this.dataService.getdata("/ventas/galpon/resumenalimento",{id:this.galpon.cuenta.id}).subscribe(d=>{this.resumen.content=d,this.resumen.foot.content[1]=this.resumen.content.reduce((o,a)=>"ENTREGA"===a.notatipo?o+a.cantidad:o-a.cantidad,0)}),this.dataService.getdata("/ventas/galpon/entregas",{id:this.galpon.cuenta.id}).subscribe(d=>{this.entregas.content=d;let o="";this.entregas.foot.content[1]=-1*this.entregas.content.reduce((a,i)=>(""!==i.nota.tipo&&(o=i.nota.tipo),"ENTREGA"===o?a+i.notadetalle.total:a-i.notadetalle.total),0)}),this.dataService.getdata("/ventas/galpon/recepciones",{id:this.galpon.cuenta.id}).subscribe(d=>{this.recepciones.content=d,this.recepciones.foot.content[1]=this.recepciones.content.map(o=>o.notadetalle.total).reduce(function(o,a){return o+a},0)}),this.dataService.getdata("/ventas/galpon/transacciones",{id:this.galpon.cuenta.id}).subscribe(d=>{this.transacciones.content=d,this.transacciones.foot.content[1]=this.transacciones.content.map(o=>o.monto).reduce(function(o,a){return o+a})})}static#t=this.\u0275fac=function(o){return new(o||u)(t.Y36(s.D))};static#e=this.\u0275cmp=t.Xpm({type:u,selectors:[["galpon-estado-cuenta"]],decls:28,vars:12,consts:[[1,"p-fluid","grid"],[1,"col-12","md:col-4","print:col-4"],[1,"p-field","col-12","md:col-12","form-group"],[1,"input-control"],[3,"data"],[1,"col-12","md:col-8","print:col-8"],[3,"data",4,"ngIf"],[1,"col-12","md:col-12"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"label"),t._uU(4,"Entidad:"),t.qZA(),t.TgZ(5,"span",3),t._uU(6),t.qZA()(),t.TgZ(7,"div",2)(8,"label"),t._uU(9,"Cuenta:"),t.qZA(),t.TgZ(10,"span",3),t._uU(11),t.qZA()(),t.TgZ(12,"div",2)(13,"label"),t._uU(14,"Cantidad:"),t.qZA(),t.TgZ(15,"span",3),t._uU(16),t.qZA()(),t.TgZ(17,"div",2)(18,"label"),t._uU(19,"Saldo:"),t.qZA(),t.TgZ(20,"span",3),t._uU(21),t.qZA()(),t._UZ(22,"mo-report",4),t.qZA(),t.TgZ(23,"div",5),t.YNc(24,g,1,1,"mo-report",6),t.YNc(25,E,1,1,"mo-report",6),t.qZA(),t.TgZ(26,"div",7),t._UZ(27,"mo-report",4),t.qZA()()),2&o&&(t.xp6(6),t.lnq("",a.galpon.cuenta.entidad.id," | ",a.galpon.cuenta.entidad.nombre," | ",a.galpon.cuenta.entidad.direccion,""),t.xp6(5),t.lnq("",a.galpon.cuenta.id," | ",a.galpon.cuenta.nombre," | ",a.galpon.cuenta.descripcion,""),t.xp6(5),t.Oqu(a.galpon.cantidad),t.xp6(5),t.Oqu(a.galpon.cuenta.saldo),t.xp6(1),t.Q6J("data",a.resumen),t.xp6(2),t.Q6J("ngIf",a.entregas.content.length>0),t.xp6(1),t.Q6J("ngIf",a.recepciones.content.length>0),t.xp6(2),t.Q6J("data",a.transacciones))},dependencies:[_.O5,m.t],encapsulation:2})}return u})()},938:(h,l,n)=>{n.d(l,{d:()=>_});var e=n(6814),t=n(4553),s=n(4946);let _=(()=>{class m{static#t=this.\u0275fac=function(p){return new(p||m)};static#e=this.\u0275mod=s.oAB({type:m});static#a=this.\u0275inj=s.cJS({imports:[e.ez,t.W]})}return m})()}}]);