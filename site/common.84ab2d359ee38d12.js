"use strict";(self.webpackChunktukiweb=self.webpackChunktukiweb||[]).push([[592],{2611:(f,l,e)=>{e.d(l,{W:()=>t});class t{constructor(){this.id=0,this.nombre="",this.descripcion=""}}},8528:(f,l,e)=>{e.d(l,{G:()=>a});var t=e(8555);class a{constructor(){this.id=0,this.cuenta=new t.r,this.total=0,this.fecha=new Date,this.estado="",this.gastos=[]}}},6042:(f,l,e)=>{e.d(l,{j:()=>m});var t=e(8555),a=e(2743),d=e(2611);class m{constructor(){this.id="0",this.catalogo=new d.W,this.transfer=new a.F,this.cuenta=new t.r,this.fecha=void 0,this.detalle="",this.nronota="",this.cantidad=0,this.pu=0,this.total=0}}},9715:(f,l,e)=>{e.d(l,{e:()=>a});var t=e(8555);class a{constructor(){this.cuenta=new t.r,this.cantidad=0}}},8481:(f,l,e)=>{e.d(l,{r:()=>E});var t=e(4946),a=e(2316),d=e(6814);function m(p,g){if(1&p){const s=t.EpF();t.ynx(0),t.TgZ(1,"a",3),t.NdJ("click",function(c){const n=t.CHM(s).index,i=t.oxw();return t.KtG(i.setcurrent(c,n+i.pagdata().pvisini))}),t._uU(2),t.qZA(),t.BQk()}if(2&p){const s=g.index,r=t.oxw();t.xp6(2),t.Oqu(s+r.pagdata().pvisini)}}const _=function(){return[]};let E=(()=>{class p{constructor(){this.changePage=new t.vpe,this.pagdata=(0,t.tdS)(new a.n)}update(s){this.pagdata().total=s.total,this.pagdata().limit=s.limit,this.pagdata().refresh()}setcurrent(s,r){s.preventDefault(),this.pagdata().currentpag=r,this.pagdata().calculate(),this.changePage.emit(this.pagdata())}static#t=this.\u0275fac=function(r){return new(r||p)};static#a=this.\u0275cmp=t.Xpm({type:p,selectors:[["mo-pagination"]],outputs:{changePage:"changePage"},decls:6,vars:2,consts:[[1,"mo-pagination"],["href","#"],[4,"ngFor","ngForOf"],["href","#",3,"click"]],template:function(r,c){1&r&&(t.TgZ(0,"div",0)(1,"a",1),t._uU(2,"\xab"),t.qZA(),t.YNc(3,m,3,1,"ng-container",2),t.TgZ(4,"a",1),t._uU(5,"\xbb"),t.qZA()()),2&r&&(t.xp6(3),t.Q6J("ngForOf",t.DdM(1,_).constructor(c.pagdata().pviscurrent)))},dependencies:[d.sg],encapsulation:2})}return p})()},9373:(f,l,e)=>{e.d(l,{V:()=>d});var t=e(6814),a=e(4946);let d=(()=>{class m{static#t=this.\u0275fac=function(p){return new(p||m)};static#a=this.\u0275mod=a.oAB({type:m});static#e=this.\u0275inj=a.cJS({imports:[t.ez]})}return m})()},2316:(f,l,e)=>{e.d(l,{n:()=>t});class t{constructor(){this.total=0,this.currentpag=1,this.npage=1,this.offset=0,this.limit=20,this.pvis=5,this.pviscurrent=0,this.pvisini=0,this.pvisend=0}calculate(){this.npage=Math.ceil(this.total/this.limit),this.offset=this.currentpag*this.limit-this.limit}refresh(){let d;this.calculate(),this.pviscurrent=this.npage>=this.pvis?this.pvis:this.npage,d=this.currentpag-Math.floor(this.pviscurrent/2),this.pvisini=d<1?1:d}}},2898:(f,l,e)=>{e.d(l,{k:()=>s});var t=e(4946),a=e(6084),d=e(5569),m=e(7757),_=e(1106),E=e(7492),p=e(7841);const g=["dataeditor"];let s=(()=>{class r{constructor(o,n){this.dataService=o,this.confirmService=n,this.tipo="",this.path="",this.notaFormEvent=new t.vpe,this.nota=new a.Q,this.editable=!1,this.cuentabycuentacfg={path:"/bycuenta",columns:["nombre","id","entidad.nombre","entidad.id"]},this.cuentabyentidadcfg={path:"/byentidad",columns:["nombre","id","entidad.nombre","entidad.id"]},this.datanotas={columns:[{editable:!1,field:"id",columnName:"Id"},{editable:!0,field:"producto.nombre",columnName:"Producto",input:{type:"autocomplete",path:"/productos",columns:["id","nombre"]}},{editable:!0,field:"cantidad",columnName:"CANTIDAD",input:{type:"numeric",precision:"17",scale:"4"}}],content:[]}}ngOnInit(){"RECEPCION"===this.tipo&&(this.datanotas.columns.push({editable:!0,field:"pu",columnName:"Pu",input:{type:"numeric",precision:"17",scale:"4"}}),this.datanotas.columns.push({editable:!1,field:"total",columnName:"Total"})),this.datanotas.columns.push({actions:[{iconclass:"pi pi-trash",event:"delete",condition:o=>0!==o.id}]})}newForm(o){this.nota=o,this.clearform()}updateForm(o){this.dataService.getdata(this.path+"/findnotaforedit",{id:o.id}).subscribe(n=>{this.nota=n,this.fillform()})}foundCuenta(o){let n=new a.Q;n.transporte=this.nota.transporte,this.nota=n,this.nota.cuenta=o,this.fillform(),this.notaFormEvent.emit({action:"found",data:this.nota.cuenta})}enterValue(o){"producto.nombre"===o.field?(mosetfieldvalue(this.nota.detalle[o.row],"producto.id",o.value.id),mosetfieldvalue(this.nota.detalle[o.row],"producto.nombre",o.value.nombre)):mosetfieldvalue(this.nota.detalle[o.row],o.field,o.value);let i,n=this.nota.detalle[o.row];if(i="RECEPCION"===this.tipo?!(0===this.nota.cuenta.id||0===n.producto.id||0===n.cantidad||0===n.pu):!(0===this.nota.cuenta.id||0===n.producto.id||0===n.cantidad),i){let u=new a.Q;u.id=this.nota.id,u.transporte=this.nota.transporte,u.cuenta.id=this.nota.cuenta.id,u.cuentadst.id=this.nota.cuentadst.id,u.detalle.push(new d.y),u.detalle[0].id=n.id,u.detalle[0].producto.id=n.producto.id,u.detalle[0].cantidad=n.cantidad,u.detalle[0].pu=n.pu,this.dataService.postdata(this.path+"/notasave",u).subscribe(h=>{this.nota.id=h.id,this.nota.total=h.total,this.nota.cuenta=h.cuenta,this.nota.cuentadst=h.cuentadst,this.nota.detalle[o.row]=h.detalle[0],this.dataeditor.addRow(new d.y,"id"),this.notaFormEvent.emit({action:"update",data:this.nota})})}}rowActionEvent(o){"delete"===o.event&&this.confirmService.setconfirm({message:"Eliminar item Nro '"+o.row.id+"'?",accept:()=>{this.dataService.getdata(this.path+"/ndetdelete",{id:o.row.id}).subscribe(i=>{})}})}fillform(){this.dataeditor.updateData(this.nota.detalle),this.dataeditor.addRow(new d.y,"id")}clearform(){this.dataeditor.updateData(this.nota.detalle)}getnota(){this.dataService.getdata(this.path+"/findnotaforedit",{id:this.nota.id}).subscribe(o=>{this.nota=o,this.fillform()})}static#t=this.\u0275fac=function(n){return new(n||r)(t.Y36(m.D),t.Y36(_.I))};static#a=this.\u0275cmp=t.Xpm({type:r,selectors:[["nota-form"]],viewQuery:function(n,i){if(1&n&&t.Gf(g,7),2&n){let u;t.iGM(u=t.CRH())&&(i.dataeditor=u.first)}},inputs:{tipo:"tipo",path:"path"},outputs:{notaFormEvent:"notaFormEvent"},decls:21,vars:10,consts:[[1,"p-fluid","grid"],[1,"p-field","col-12","form-group"],[1,"input-control",3,"config","path","itemSelected"],[1,"p-field","col-12","md:col-12","form-group"],["for","entidadnombre"],[1,"input-control-info"],[3,"data","path","cellEnterValueEvent","rowActionEvent"],["dataeditor",""]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"label"),t._uU(3,"Por entidad:"),t.qZA(),t.TgZ(4,"mo-autocomplete",2),t.NdJ("itemSelected",function(h){return i.foundCuenta(h)}),t.qZA()(),t.TgZ(5,"div",1)(6,"label"),t._uU(7,"Por cuenta:"),t.qZA(),t.TgZ(8,"mo-autocomplete",2),t.NdJ("itemSelected",function(h){return i.foundCuenta(h)}),t.qZA()(),t.TgZ(9,"div",3)(10,"label",4),t._uU(11,"Entidad:"),t.qZA(),t.TgZ(12,"span",5),t._uU(13),t.qZA()(),t.TgZ(14,"div",3)(15,"label",4),t._uU(16,"Cuenta:"),t.qZA(),t.TgZ(17,"span",5),t._uU(18),t.qZA()()(),t.TgZ(19,"mo-dataeditor",6,7),t.NdJ("cellEnterValueEvent",function(h){return i.enterValue(h)})("rowActionEvent",function(h){return i.rowActionEvent(h)}),t.qZA()),2&n&&(t.xp6(4),t.Q6J("config",i.cuentabyentidadcfg)("path",i.path),t.xp6(4),t.Q6J("config",i.cuentabycuentacfg)("path",i.path),t.xp6(5),t.AsE("",i.nota.cuenta.entidad.id,"-",i.nota.cuenta.entidad.nombre,""),t.xp6(5),t.AsE("",i.nota.cuenta.id,"-",i.nota.cuenta.nombre,""),t.xp6(1),t.Q6J("data",i.datanotas)("path",i.path))},dependencies:[E.J,p.q],encapsulation:2})}return r})()},7090:(f,l,e)=>{e.d(l,{$:()=>p});var t=e(6814),a=e(8368),d=e(95),m=e(2454),_=e(4858),E=e(4946);let p=(()=>{class g{static#t=this.\u0275fac=function(c){return new(c||g)};static#a=this.\u0275mod=E.oAB({type:g});static#e=this.\u0275inj=E.cJS({imports:[t.ez,a.U,d.UX,m.q,_.V]})}return g})()},9095:(f,l,e)=>{e.d(l,{R:()=>g});var t=e(9715),a=e(4946),d=e(7757),m=e(6814),_=e(9324);function E(s,r){if(1&s&&a._UZ(0,"mo-report",4),2&s){const c=a.oxw();a.Q6J("data",c.entregas)}}function p(s,r){if(1&s&&a._UZ(0,"mo-report",4),2&s){const c=a.oxw();a.Q6J("data",c.recepciones)}}let g=(()=>{class s{constructor(c){this.dataService=c,this.galpon=new t.e,this.resumen={caption:"Resumen de Alimento",content:[],columns:[{field:"notatipo",columnName:"Tipos"},{field:"producto.id",columnName:"ID"},{field:"producto.nombre",columnName:"Producto"},{field:"cantidad",columnName:"Cantidad",align:"right"}],foot:{content:["TOTAL",0],cols:[{colspan:"3",index:0,align:"right"},{colspan:"1",index:1,align:"right"}]}},this.entregas={caption:"NOTAS DE ENTREGAS",content:[],columns:[{field:"nota.transporte.conductor",columnName:"Trans."},{field:"nota.transporte.fecha",columnName:"Fecha",type:"datetime"},{field:"nota.tipo",columnName:"Tipo"},{field:"nota.voucher.doccode",columnName:"Nro"},{field:"nota.total",columnName:"Total(Bs)",align:"right"},{field:"notadetalle.producto.nombre",columnName:"Producto"},{field:"notadetalle.cantidad",columnName:"Cant.",align:"right"},{field:"notadetalle.pu",columnName:"Pu",align:"right"},{field:"notadetalle.total",columnName:"S.Total(Bs)",align:"right"}],foot:{content:["TOTAL ENTREGAS",0],cols:[{colspan:"8",index:0,align:"right"},{colspan:"1",index:1,align:"right"}]}},this.recepciones={caption:"NOTAS DE RECEPCI\xd3N",content:[],columns:[{field:"nota.transporte.conductor",columnName:"Trans."},{field:"nota.transporte.fecha",columnName:"Fecha",type:"datetime"},{field:"nota.voucher.doccode",columnName:"Nro"},{field:"nota.total",columnName:"Total(Bs)",align:"right"},{field:"notadetalle.producto.nombre",columnName:"Producto"},{field:"notadetalle.cantidad",columnName:"Cant.",align:"right"},{field:"notadetalle.pu",columnName:"Pu",align:"right"},{field:"notadetalle.total",columnName:"S.Total(Bs)",align:"right"}],foot:{content:["TOTAL RECEPCIONES",0],cols:[{colspan:"7",index:0,align:"right"},{colspan:"1",index:1,align:"right"}]}},this.transacciones={caption:"OTRAS TRANSACCIONES",content:[],columns:[{field:"voucherdetail.voucher.id",columnName:"Id"},{field:"voucherdetail.voucher.vdate",columnName:"Fecha",type:"datetime"},{field:"voucherdetail.voucher.vtype",columnName:"Tipo"},{field:"voucherdetail.voucher.doccode",columnName:"Nro Nota"},{field:"voucherdetail.voucher.description",columnName:"Detalle"},{field:"voucherdetail.voucher.comment",columnName:"Coment."},{field:"voucherdetail.voucher.agreement",columnName:"Conformidad"},{field:"monto",columnName:"Monto",align:"right"}],foot:{content:["TOTAL TRANS.",0],cols:[{colspan:"7",index:0,align:"right"},{colspan:"1",index:1,align:"right"}]}}}ngOnInit(){}open(c){this.dataService.getdata("/ventas/galpon/galpon",{id:c.cuenta.id}).subscribe(o=>{this.galpon=o,this.resumen.foot.content[1]=this.galpon.cuenta.id,this.getData()})}update(){this.getData()}getData(){this.dataService.getdata("/ventas/galpon/resumenalimento",{id:this.galpon.cuenta.id}).subscribe(c=>{this.resumen.content=c,this.resumen.foot.content[1]=this.resumen.content.reduce((o,n)=>"ENTREGA"===n.notatipo?o+n.cantidad:o-n.cantidad,0)}),this.dataService.getdata("/ventas/galpon/entregas",{id:this.galpon.cuenta.id}).subscribe(c=>{this.entregas.content=c;let o="";this.entregas.foot.content[1]=-1*this.entregas.content.reduce((n,i)=>(""!==i.nota.tipo&&(o=i.nota.tipo),"ENTREGA"===o?n+i.notadetalle.total:n-i.notadetalle.total),0)}),this.dataService.getdata("/ventas/galpon/recepciones",{id:this.galpon.cuenta.id}).subscribe(c=>{this.recepciones.content=c,this.recepciones.foot.content[1]=this.recepciones.content.map(o=>o.notadetalle.total).reduce(function(o,n){return o+n},0)}),this.dataService.getdata("/ventas/galpon/transacciones",{id:this.galpon.cuenta.id}).subscribe(c=>{this.transacciones.content=c,this.transacciones.foot.content[1]=this.transacciones.content.map(o=>o.monto).reduce(function(o,n){return o+n})})}static#t=this.\u0275fac=function(o){return new(o||s)(a.Y36(d.D))};static#a=this.\u0275cmp=a.Xpm({type:s,selectors:[["galpon-estado-cuenta"]],decls:28,vars:12,consts:[[1,"p-fluid","grid"],[1,"col-12","md:col-4","print:col-4"],[1,"p-field","col-12","md:col-12","form-group"],[1,"input-control"],[3,"data"],[1,"col-12","md:col-8","print:col-8"],[3,"data",4,"ngIf"],[1,"col-12","md:col-12"]],template:function(o,n){1&o&&(a.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"label"),a._uU(4,"Entidad:"),a.qZA(),a.TgZ(5,"span",3),a._uU(6),a.qZA()(),a.TgZ(7,"div",2)(8,"label"),a._uU(9,"Cuenta:"),a.qZA(),a.TgZ(10,"span",3),a._uU(11),a.qZA()(),a.TgZ(12,"div",2)(13,"label"),a._uU(14,"Cantidad:"),a.qZA(),a.TgZ(15,"span",3),a._uU(16),a.qZA()(),a.TgZ(17,"div",2)(18,"label"),a._uU(19,"Saldo:"),a.qZA(),a.TgZ(20,"span",3),a._uU(21),a.qZA()(),a._UZ(22,"mo-report",4),a.qZA(),a.TgZ(23,"div",5),a.YNc(24,E,1,1,"mo-report",6),a.YNc(25,p,1,1,"mo-report",6),a.qZA(),a.TgZ(26,"div",7),a._UZ(27,"mo-report",4),a.qZA()()),2&o&&(a.xp6(6),a.lnq("",n.galpon.cuenta.entidad.id," | ",n.galpon.cuenta.entidad.nombre," | ",n.galpon.cuenta.entidad.direccion,""),a.xp6(5),a.lnq("",n.galpon.cuenta.id," | ",n.galpon.cuenta.nombre," | ",n.galpon.cuenta.descripcion,""),a.xp6(5),a.Oqu(n.galpon.cantidad),a.xp6(5),a.Oqu(n.galpon.cuenta.saldo),a.xp6(1),a.Q6J("data",n.resumen),a.xp6(2),a.Q6J("ngIf",n.entregas.content.length>0),a.xp6(1),a.Q6J("ngIf",n.recepciones.content.length>0),a.xp6(2),a.Q6J("data",n.transacciones))},dependencies:[m.O5,_.t],encapsulation:2})}return s})()},938:(f,l,e)=>{e.d(l,{d:()=>m});var t=e(6814),a=e(4553),d=e(4946);let m=(()=>{class _{static#t=this.\u0275fac=function(g){return new(g||_)};static#a=this.\u0275mod=d.oAB({type:_});static#e=this.\u0275inj=d.cJS({imports:[t.ez,a.W]})}return _})()}}]);