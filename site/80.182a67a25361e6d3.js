"use strict";(self.webpackChunktukiweb=self.webpackChunktukiweb||[]).push([[80],{4799:(T,C,_)=>{_.d(C,{q:()=>g});var t=_(4946),h=_(6814),m=_(95),x=_(7492);const M=["inputid"];function f(p,v){if(1&p){const a=t.EpF();t.TgZ(0,"input",2,3),t.NdJ("keypress",function(s){t.CHM(a);const d=t.oxw();return t.KtG(d.inputkeypress(s))})("ngModelChange",function(s){t.CHM(a);const d=t.oxw();return t.KtG(d.inputvalue=s)}),t.qZA()}if(2&p){const a=t.oxw();t.Q6J("ngModel",a.inputvalue)}}function w(p,v){if(1&p){const a=t.EpF();t.TgZ(0,"mo-autocomplete",4,3),t.NdJ("itemSelected",function(s){t.CHM(a);const d=t.oxw();return t.KtG(d.autocompleteItemSelected(s))}),t.qZA()}if(2&p){const a=t.oxw();t.Q6J("config",a.config)("path",a.path)}}let g=(()=>{class p{constructor(){this.inputvalue="",this.enterValueEvent=new t.vpe,this.path=""}ngOnInit(){}ngAfterViewInit(){switch(this.config.type){case void 0:case"date":case"text":case"numeric":this.input.nativeElement.focus();break;case"autocomplete":Promise.resolve().then(()=>this.input.setFocus())}}inputkeypress(a){if("Enter"===a.key){let c=this.validateInput(this.inputvalue);c.error||this.enterValueEvent.emit(c.value)}}autocompleteItemSelected(a){this.enterValueEvent.emit(a)}validateInput(a){switch(this.config.type){case void 0:case"text":return this.isText(a);case"numeric":return this.isNumeric(a);case"date":return this.isDate(a);default:return this.isText(a)}}isText(a){return void 0!==a&&a.length>0?{error:!1,value:a}:{error:!0,value:""}}isNumeric(a){let c="";return c=c+"^([\\d]{0,"+(this.config.precision-this.config.scale)+"})",this.config.scale>=2&&(c=c+"(.[\\d]{1,"+this.config.scale+"})?$"),c+="",new RegExp(c).test(a)?{error:!1,value:a}:{error:!0,value:""}}isDate(a){let c=a.match(/^([\d]{1,2})(\/([\d]{1,2}))?(\/([\d]{1,4}))?/i);if(null!==c){if(void 0===c[1])return{error:!0};let s=new Date,d=c[1],O=void 0!==c[3]?c[3]:s.getMonth()+1,I=void 0!==c[5]?c[5]:s.getFullYear(),E=new Date(parseInt(I+""),parseInt(O+"")-1,parseInt(d));if(isNaN(E.getDate()))return{error:!0};{let A=E.getMonth()+1;return{error:!1,value:E.getDate()+"/"+A+"/"+E.getFullYear()}}}return{error:!0}}static#t=this.\u0275fac=function(c){return new(c||p)};static#e=this.\u0275cmp=t.Xpm({type:p,selectors:[["mo-cellinput"]],viewQuery:function(c,s){if(1&c&&t.Gf(M,5),2&c){let d;t.iGM(d=t.CRH())&&(s.input=d.first)}},inputs:{config:"config",path:"path"},outputs:{enterValueEvent:"enterValueEvent"},decls:2,vars:2,consts:[["type","text",3,"ngModel","keypress","ngModelChange",4,"ngIf"],[3,"config","path","itemSelected",4,"ngIf"],["type","text",3,"ngModel","keypress","ngModelChange"],["inputid",""],[3,"config","path","itemSelected"]],template:function(c,s){1&c&&(t.YNc(0,f,2,1,"input",0),t.YNc(1,w,2,2,"mo-autocomplete",1)),2&c&&(t.Q6J("ngIf",void 0===s.config.type||"text"===s.config.type||"numeric"===s.config.type||"date"===s.config.type),t.xp6(1),t.Q6J("ngIf","autocomplete"===s.config.type))},dependencies:[h.O5,m.Fj,m.JJ,m.On,x.J],encapsulation:2})}return p})()},66:(T,C,_)=>{_.d(C,{q:()=>Z});var t=_(4946),h=_(6814),m=_(4799),x=_(4621),M=_(2415);const f=["cellsArea"],w=["inputtype"];function g(i,r){if(1&i&&(t.TgZ(0,"th",6),t._uU(1),t.qZA()),2&i){const e=t.oxw(),n=e.index,o=e.$implicit,l=t.oxw();t.Udp("text-align",l.data.columns[n].align),t.xp6(1),t.hij("",o.columnName," ")}}function p(i,r){1&i&&t._UZ(0,"th",6)}function v(i,r){if(1&i&&(t.ynx(0),t.YNc(1,g,2,3,"th",4),t.YNc(2,p,1,0,"th",5),t.BQk()),2&i){const e=r.$implicit;t.xp6(1),t.Q6J("ngIf",e.field),t.xp6(1),t.Q6J("ngIf",!e.field)}}function a(i,r){if(1&i&&(t.TgZ(0,"td")(1,"span"),t._uU(2),t.ALo(3,"dateFormat"),t.qZA()()),2&i){const e=t.oxw(2).index,n=t.oxw().index,o=t.oxw();t.Udp("text-align",o.data.columns[e].align),t.xp6(2),t.Oqu(t.lcZ(3,3,o.getfieldvalue(n,e)))}}function c(i,r){if(1&i&&(t.TgZ(0,"td")(1,"span"),t._uU(2),t.ALo(3,"datetimeFormat"),t.qZA()()),2&i){const e=t.oxw(2).index,n=t.oxw().index,o=t.oxw();t.Udp("text-align",o.data.columns[e].align),t.xp6(2),t.Oqu(t.lcZ(3,3,o.getfieldvalue(n,e)))}}function s(i,r){if(1&i&&(t.TgZ(0,"td")(1,"span"),t._uU(2),t.qZA()()),2&i){const e=t.oxw(2).index,n=t.oxw().index,o=t.oxw();t.Udp("text-align",o.data.columns[e].align),t.xp6(2),t.Oqu(o.getfieldvalue(n,e))}}function d(i,r){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3).index,n=t.oxw().index,o=t.oxw();t.xp6(1),t.Oqu(o.getfieldvalue(n,e))}}function O(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"mo-cellinput",12,13),t.NdJ("enterValueEvent",function(o){t.CHM(e);const l=t.oxw(5);return t.KtG(l.enterValue(o))}),t.qZA()}if(2&i){const e=t.oxw(3).index,n=t.oxw(2);t.Q6J("config",n.data.columns[e].input)("path",n.path)}}function I(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"td",10),t.NdJ("click",function(o){t.CHM(e);const l=t.oxw(2).index,u=t.oxw().index,D=t.oxw();return t.KtG(D.clickCell(o,{row:u,col:l}))}),t.YNc(1,d,2,1,"span",7),t.YNc(2,O,2,2,"mo-cellinput",11),t.qZA()}if(2&i){const e=t.oxw(2),n=e.index,o=e.$implicit,l=t.oxw(2);t.Udp("text-align",l.data.columns[n].align),t.ekj("cell-selected",o.cellfocus),t.xp6(1),t.Q6J("ngIf",!o.input),t.xp6(1),t.Q6J("ngIf",o.input)}}function E(i,r){if(1&i&&(t.ynx(0),t.YNc(1,a,4,5,"td",8),t.YNc(2,c,4,5,"td",8),t.YNc(3,s,3,3,"td",8),t.YNc(4,I,3,6,"td",9),t.BQk()),2&i){const e=t.oxw(),n=e.$implicit,o=e.index,l=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!n.editable&&"date"===l.data.columns[o].type),t.xp6(1),t.Q6J("ngIf",!n.editable&&"datetime"===l.data.columns[o].type),t.xp6(1),t.Q6J("ngIf",!n.editable&&void 0===l.data.columns[o].type),t.xp6(1),t.Q6J("ngIf",n.editable)}}function A(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"a",15),t.NdJ("click",function(o){t.CHM(e);const l=t.oxw().$implicit,u=t.oxw(3).index,D=t.oxw();return t.KtG(D.rowEvent(o,D.data.content[u],l.event,u))}),t._UZ(1,"i"),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Tol(e.iconclass)}}function P(i,r){if(1&i&&(t.ynx(0),t.YNc(1,A,2,3,"a",14),t.BQk()),2&i){const e=r.$implicit,n=t.oxw(3).index,o=t.oxw();t.xp6(1),t.Q6J("ngIf",e.condition(o.data.content[n]))}}function y(i,r){if(1&i&&(t.TgZ(0,"td"),t.YNc(1,P,2,1,"ng-container",1),t.qZA()),2&i){const e=t.oxw().index,n=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",n.data.columns[e].actions)}}function k(i,r){if(1&i&&(t.ynx(0),t.YNc(1,E,5,4,"ng-container",7),t.YNc(2,y,2,1,"td",7),t.BQk()),2&i){const e=r.$implicit;t.xp6(1),t.Q6J("ngIf",void 0!==e.editable),t.xp6(1),t.Q6J("ngIf",void 0===e.editable)}}function b(i,r){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,k,3,2,"ng-container",1),t.qZA()),2&i){const e=r.$implicit;t.xp6(1),t.Q6J("ngForOf",e)}}let Z=(()=>{class i{constructor(){this.path="",this.cellEnterValueEvent=new t.vpe,this.rowActionEvent=new t.vpe,this.pos={row:0,col:0},this.cells=[],this.isInput=!1}ngOnInit(){}ngOnChanges(e){void 0!==e.data&&e.data.currentValue.length>0&&this.fp_updateCells()}updateData(e){this.cells=[],this.pos={row:0,col:0},this.data.content=e,this.fp_updateCells()}addRow(e,n){let o=!0;for(let l of this.data.content)if(mogetfieldvalue(l,n)===mogetfieldvalue(e,n)){o=!1;break}o&&(this.data.content.push(e),this.fp_addRowCell())}deleteRow(e,n){let o=!1,l=1;for(let u=0;u<this.data.content.length;u++)if(mogetfieldvalue(this.data.content[u],e)===n){o=!0,l=u;break}o&&(this.data.content.splice(l,1),this.cells.splice(l,1))}getfieldvalue(e,n){return mogetfieldvalue(this.data.content[e],this.data.columns[n].field)}rowEvent(e,n,o,l){e.preventDefault(),this.rowActionEvent.emit({event:o,row:n,index:l})}enterValue(e){let n={row:this.pos.row,field:this.data.columns[this.pos.col].field,value:e};this.fp_closeInput(),this.cellEnterValueEvent.emit(n)}keyboarddown(e){switch(e.key){case"ArrowRight":case"Enter":this.fp_moveCursor("right");break;case"ArrowLeft":this.fp_moveCursor("left");break;case"ArrowUp":this.fp_moveCursor("up");break;case"ArrowDown":this.fp_moveCursor("down");break;case"Escape":this.fp_closeInput();break;case"Tab":e.preventDefault(),this.fp_moveCursor("right");break;default:this.fp_showInput()}}clickCell(e,n){this.isInput||!this.cells[n.row][n.col].editable||this.fp_selectCell(n)}fp_showInput(){this.cells[this.pos.row][this.pos.col].input=!0,this.isInput=!0}fp_closeInput(){this.isInput&&(this.cells[this.pos.row][this.pos.col].input=!1,this.isInput=!1,this.cellsArea.nativeElement.focus())}fp_selectCell(e){this.cells[this.pos.row][this.pos.col].cellfocus=!1,this.cells[e.row][e.col].cellfocus=!0,this.pos=e,this.cellsArea.nativeElement.focus()}fp_moveCursor(e){if(this.isInput)return;let o,n={};switch(n.col=this.pos.col,n.row=this.pos.row,e){case"left":for(o=n.col;--o>=0;)if(this.data.columns[o].editable){n.col=o;break}break;case"up":n.row--,n.row<0&&(n.row=0);break;case"right":let l=this.data.columns.length;for(o=n.col;++o<l;)if(this.data.columns[o].editable){n.col=o;break}break;case"down":let u=this.cells.length;n.row++,n.row>=u&&(n.row=n.row-1)}this.fp_selectCell(n)}fp_updateCells(){this.data.content.forEach(()=>{this.fp_addRowCell()})}fp_addRowCell(){let e=[];this.data.columns.forEach(n=>{e.push({editable:n.editable,cellfocus:!1,input:!1})}),this.cells.push(e)}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["mo-dataeditor"]],viewQuery:function(n,o){if(1&n&&(t.Gf(f,7),t.Gf(w,5)),2&n){let l;t.iGM(l=t.CRH())&&(o.cellsArea=l.first),t.iGM(l=t.CRH())&&(o.inputtype=l.first)}},inputs:{path:"path",data:"data"},outputs:{cellEnterValueEvent:"cellEnterValueEvent",rowActionEvent:"rowActionEvent"},features:[t.TTD],decls:8,vars:2,consts:[[1,"customers"],[4,"ngFor","ngForOf"],["tabindex","1",1,"using-keyboard",3,"keydown"],["cellsArea",""],["scope","col",3,"text-align",4,"ngIf"],["scope","col",4,"ngIf"],["scope","col"],[4,"ngIf"],[3,"text-align",4,"ngIf"],[3,"cell-selected","text-align","click",4,"ngIf"],[3,"click"],[3,"config","path","enterValueEvent",4,"ngIf"],[3,"config","path","enterValueEvent"],["inputtype",""],["href","#",3,"click",4,"ngIf"],["href","#",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"table",0),t._UZ(1,"caption"),t.TgZ(2,"thead")(3,"tr"),t.YNc(4,v,3,2,"ng-container",1),t.qZA()(),t.TgZ(5,"tbody",2,3),t.NdJ("keydown",function(u){return o.keyboarddown(u)}),t.YNc(7,b,2,1,"tr",1),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngForOf",o.data.columns),t.xp6(3),t.Q6J("ngForOf",o.cells))},dependencies:[h.sg,h.O5,m.q,x.L,M.E],styles:[".customers[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}.customers[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:4px}.customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}.customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}.customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px;text-align:center;background-color:red;color:#fff}.using-keyboard[_ngcontent-%COMP%]:focus{outline:none}.cell-selected[_ngcontent-%COMP%]{border:1px solid rgb(21,150,255)}"]})}return i})()},7432:(T,C,_)=>{_.d(C,{V:()=>M});var t=_(6814),h=_(3500),m=_(9177),x=_(4946);let M=(()=>{class f{static#t=this.\u0275fac=function(p){return new(p||f)};static#e=this.\u0275mod=x.oAB({type:f});static#n=this.\u0275inj=x.cJS({imports:[t.ez,h.K,m.A]})}return f})()},3500:(T,C,_)=>{_.d(C,{K:()=>w});var t=_(6814),h=_(95),m=_(2105),x=_(3714),M=_(961),f=_(4946);let w=(()=>{class g{static#t=this.\u0275fac=function(a){return new(a||g)};static#e=this.\u0275mod=f.oAB({type:g});static#n=this.\u0275inj=f.cJS({imports:[t.ez,x.j,h.u5,M.q,m.kW]})}return g})()}}]);