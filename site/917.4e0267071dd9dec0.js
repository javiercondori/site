"use strict";(self.webpackChunktukiweb=self.webpackChunktukiweb||[]).push([[917],{9709:(M,p,r)=>{r.d(p,{U:()=>u});var t=r(8196);class u{constructor(){this.id=0,this.nombre="",this.comentario="",this.tipo=new t.o,this.estado="ACTIVO",this.facprn="1",this.orden=1}}},8196:(M,p,r)=>{r.d(p,{o:()=>t});class t{constructor(){this.id=0,this.nombre=""}}},9324:(M,p,r)=>{r.d(p,{t:()=>I});var t=r(4946),u=r(6814),o=r(4621),f=r(2415),h=r(7635);function g(i,m){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const n=t.oxw();t.xp6(1),t.Oqu(n.data.caption)}}function x(i,m){if(1&i&&(t.TgZ(0,"th",5),t._uU(1),t.qZA()),2&i){const n=t.oxw(),a=n.index,d=n.$implicit,s=t.oxw();t.Udp("text-align",s.data.columns[a].align),t.xp6(1),t.hij("",d.columnName," ")}}function v(i,m){1&i&&t._UZ(0,"th",5)}function C(i,m){if(1&i&&(t.ynx(0),t.YNc(1,x,2,3,"th",3),t.YNc(2,v,1,0,"th",4),t.BQk()),2&i){const n=m.$implicit;t.xp6(1),t.Q6J("ngIf",n.field),t.xp6(1),t.Q6J("ngIf",!n.field)}}function w(i,m){if(1&i&&(t.ynx(0),t.TgZ(1,"td",5),t._uU(2),t.qZA(),t.BQk()),2&i){const n=m.$implicit,a=t.oxw(2);t.xp6(1),t.Udp("text-align",n.align),t.uIk("colspan",n.colspan),t.xp6(1),t.hij("",a.data.foot.content[n.index]," ")}}function T(i,m){if(1&i&&(t.TgZ(0,"tfoot")(1,"tr"),t.YNc(2,w,3,4,"ng-container",2),t.qZA()()),2&i){const n=t.oxw();t.xp6(2),t.Q6J("ngForOf",n.data.foot.cols)}}function E(i,m){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const n=t.oxw().index,a=t.oxw().index,d=t.oxw();t.Udp("text-align",d.data.columns[n].align),t.xp6(1),t.Oqu(d.getfieldvalue(a,n))}}function O(i,m){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"dateFormat"),t.qZA()),2&i){const n=t.oxw().index,a=t.oxw().index,d=t.oxw();t.Udp("text-align",d.data.columns[n].align),t.xp6(1),t.Oqu(t.lcZ(2,3,d.getfieldvalue(a,n)))}}function F(i,m){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"datetimeFormat"),t.qZA()),2&i){const n=t.oxw().index,a=t.oxw().index,d=t.oxw();t.Udp("text-align",d.data.columns[n].align),t.xp6(1),t.Oqu(t.lcZ(2,3,d.getfieldvalue(a,n)))}}function y(i,m){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"periodmonthFormat"),t.qZA()),2&i){const n=t.oxw().index,a=t.oxw().index,d=t.oxw();t.Udp("text-align",d.data.columns[n].align),t.xp6(1),t.Oqu(t.lcZ(2,3,d.getfieldvalue(a,n)))}}function P(i,m){if(1&i){const n=t.EpF();t.TgZ(0,"a",12),t.NdJ("click",function(d){t.CHM(n);const s=t.oxw().$implicit,U=t.oxw(3).$implicit,e=t.oxw();return t.KtG(e.actionEvent(d,U,s.event))}),t.TgZ(1,"i"),t._uU(2),t.qZA()()}if(2&i){const n=t.oxw().$implicit;t.xp6(1),t.Tol(n.iconclass),t.xp6(1),t.Oqu(n.iconname)}}function Z(i,m){if(1&i&&(t.ynx(0),t.YNc(1,P,3,4,"a",11),t.BQk()),2&i){const n=m.$implicit,a=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",n.condition(a))}}function A(i,m){if(1&i&&(t.TgZ(0,"td",9)(1,"div",10),t.YNc(2,Z,2,1,"ng-container",2),t.qZA()()),2&i){const n=t.oxw().index,a=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",a.data.columns[n].actions)}}function b(i,m){if(1&i&&(t.ynx(0),t.YNc(1,E,2,3,"td",7),t.YNc(2,O,3,5,"td",7),t.YNc(3,F,3,5,"td",7),t.YNc(4,y,3,5,"td",7),t.YNc(5,A,3,1,"td",8),t.BQk()),2&i){const n=m.index,a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",a.data.columns[n].field&&void 0===a.data.columns[n].type),t.xp6(1),t.Q6J("ngIf",a.data.columns[n].field&&"date"===a.data.columns[n].type),t.xp6(1),t.Q6J("ngIf",a.data.columns[n].field&&"datetime"===a.data.columns[n].type),t.xp6(1),t.Q6J("ngIf",a.data.columns[n].field&&"periodmonth"===a.data.columns[n].type),t.xp6(1),t.Q6J("ngIf",!a.data.columns[n].field)}}function R(i,m){if(1&i&&(t.ynx(0),t.TgZ(1,"tr",6),t.YNc(2,b,6,5,"ng-container",2),t.qZA(),t.BQk()),2&i){const n=m.$implicit,a=t.oxw();t.xp6(1),t.Q6J("ngClass",void 0!==a.data.rowclass?a.data.rowclass(n,a.data.val):a.data.rows.condition(n)?a.data.rows.class:""),t.xp6(1),t.Q6J("ngForOf",a.data.columns)}}let I=(()=>{class i{constructor(){this.fielddefault={align:"left"},this.rows={class:"",condition:n=>!1},this.action=new t.vpe}ngOnInit(){for(let n of this.data.columns)void 0!==n.field&&mosetdefaults(this.fielddefault,n);void 0===this.data.rows&&(this.data.rows=this.rows)}getfieldvalue(n,a){return mogetfieldvalue(this.data.content[n],this.data.columns[a].field)}actionEvent(n,a,d){n.preventDefault(),this.action.emit({event:d,row:a})}static#t=this.\u0275fac=function(a){return new(a||i)};static#o=this.\u0275cmp=t.Xpm({type:i,selectors:[["mo-report"]],inputs:{data:"data"},outputs:{action:"action"},decls:9,vars:4,consts:[[1,"customers"],[4,"ngIf"],[4,"ngFor","ngForOf"],["scope","col",3,"text-align",4,"ngIf"],["scope","col",4,"ngIf"],["scope","col"],[3,"ngClass"],[3,"text-align",4,"ngIf"],["style","padding: 0;",4,"ngIf"],[2,"padding","0"],[1,"mo-reportactions"],["href","#",3,"click",4,"ngIf"],["href","#",3,"click"]],template:function(a,d){1&a&&(t.TgZ(0,"table",0)(1,"caption"),t.YNc(2,g,2,1,"ng-container",1),t.qZA(),t.TgZ(3,"thead")(4,"tr"),t.YNc(5,C,3,2,"ng-container",2),t.qZA()(),t.YNc(6,T,3,1,"tfoot",1),t.TgZ(7,"tbody"),t.YNc(8,R,3,2,"ng-container",2),t.qZA()()),2&a&&(t.xp6(2),t.Q6J("ngIf",d.data.caption),t.xp6(3),t.Q6J("ngForOf",d.data.columns),t.xp6(1),t.Q6J("ngIf",d.data.foot),t.xp6(2),t.Q6J("ngForOf",d.data.content))},dependencies:[u.mk,u.sg,u.O5,o.L,f.E,h.v],styles:[".customers[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}.customers[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:1.4em;color:#3e3e3e;font-weight:700}.customers[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:4px}.customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #f2f2f2}.customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}.customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px;text-align:center;background-color:#464646;color:#fff}.customers[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{padding-top:2px;padding-bottom:2px;color:#383838;font-weight:700}"]})}return i})()},4553:(M,p,r)=>{r.d(p,{W:()=>f});var t=r(6814),u=r(9177),o=r(4946);let f=(()=>{class h{static#t=this.\u0275fac=function(v){return new(v||h)};static#o=this.\u0275mod=o.oAB({type:h});static#n=this.\u0275inj=o.cJS({imports:[t.ez,u.A]})}return h})()},3917:(M,p,r)=>{r.r(p),r.d(p,{FormulaModule:()=>d});var t=r(6814),u=r(7664),o=r(4946),f=r(2655);let h=(()=>{class s{constructor(){}ngOnInit(){this.items=[{label:"Producci\xf3n"},{label:"Formula"}],this.home={icon:"pi pi-home",routerLink:"/"}}static#t=this.\u0275fac=function(c){return new(c||s)};static#o=this.\u0275cmp=o.Xpm({type:s,selectors:[["formula-main"]],decls:2,vars:2,consts:[[3,"model","home"]],template:function(c,l){1&c&&o._UZ(0,"p-breadcrumb",0)(1,"router-outlet"),2&c&&o.Q6J("model",l.items)("home",l.home)},dependencies:[u.lC,f.a],encapsulation:2})}return s})();var g=r(2848),x=r(9324),v=r(9709);class C{constructor(){this.id=0,this.producto=new v.U,this.fproducto=new v.U,this.cantidad=0}}var w=r(1106),T=r(3259),E=r(707),O=r(3714),F=r(7841);const y=["tableeditor"];function P(s,U){if(1&s){const e=o.EpF();o.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"h2"),o._uU(7,"Formula de Producto"),o.qZA()(),o.TgZ(8,"div",7)(9,"button",8),o.NdJ("click",function(){o.CHM(e);const l=o.oxw();return o.KtG(l.salir())}),o.qZA()()(),o.TgZ(10,"div",9)(11,"div",10)(12,"div",11)(13,"span",12),o._UZ(14,"input",13),o.TgZ(15,"label",14),o._uU(16,"Producto"),o.qZA()()(),o.TgZ(17,"div",11)(18,"mo-dataeditor",15,16),o.NdJ("cellEnterValueEvent",function(l){o.CHM(e);const _=o.oxw();return o.KtG(_.enterValue(l))})("rowActionEvent",function(l){o.CHM(e);const _=o.oxw();return o.KtG(_.rowActionEvent(l))}),o.qZA()()()()()()()()}if(2&s){const e=o.oxw();o.xp6(14),o.Q6J("value",e.producto.id+" | "+e.producto.nombre+" | "+e.producto.comentario),o.xp6(4),o.Q6J("data",e.data)}}let Z=(()=>{class s{constructor(e,c){this.dataService=e,this.confirmService=c,this.formEvent=new o.vpe,this.display=!1,this.producto=new v.U,this.formula=[],this.data={content:[],columns:[{editable:!1,field:"id",columnName:"ID"},{editable:!1,field:"fproducto.id",columnName:"P.Id"},{editable:!0,field:"fproducto.nombre",columnName:"Producto",input:{type:"autocomplete",path:"/produccion/formula/r/findproductos",columns:["id","nombre"]}},{editable:!0,field:"cantidad",columnName:"CANTIDAD",input:{type:"numeric",precision:"15",scale:"2"}},{actions:[{iconclass:"pi pi-trash",event:"delete",condition:l=>0!==l.id}]}]}}ngOnInit(){}open(e){this.producto=e,this.dataService.getdata("/produccion/formula/r",{productoid:this.producto.id}).subscribe(c=>{this.formula=c,this.tableeditor.updateData(this.formula),this.tableeditor.addRow(new C,"id")}),this.display=!0}salir(){this.display=!1,this.formEvent.emit()}enterValue(e){"fproducto.nombre"===e.field?(mosetfieldvalue(this.formula[e.row],"fproducto.id",e.value.id),mosetfieldvalue(this.formula[e.row],"fproducto.nombre",e.value.nombre)):mosetfieldvalue(this.formula[e.row],e.field,e.value);let c=this.formula[e.row];0===this.producto.id||0===c.fproducto.id||0===c.cantidad||(c.producto.id=this.producto.id,this.dataService.postdata("/produccion/formula/w",c).subscribe(l=>{this.formula[e.row]=l,this.tableeditor.addRow(new C,"id")}))}rowActionEvent(e){"delete"===(console.log("formula form:",e),e.event)&&this.confirmService.setconfirm({message:"Eliminar item '"+e.row.fproducto.nombre+"' de la f\xf3rmula?",accept:()=>{this.dataService.postdata("/produccion/formula/d/delete",e.row).subscribe(l=>{this.tableeditor.deleteRow("id",e.row.id)})}})}static#t=this.\u0275fac=function(c){return new(c||s)(o.Y36(g.D),o.Y36(w.I))};static#o=this.\u0275cmp=o.Xpm({type:s,selectors:[["formula-form"]],viewQuery:function(c,l){if(1&c&&o.Gf(y,5),2&c){let _;o.iGM(_=o.CRH())&&(l.tableeditor=_.first)}},outputs:{formEvent:"formEvent"},decls:1,vars:1,consts:[["class","mo-layout-content",4,"ngIf"],[1,"mo-layout-content"],[1,"grid"],[1,"col-12"],[1,"card"],[1,"mo-toolsbar"],[1,"mo-first"],[1,"mo-second"],["pButton","","pRipple","","type","button","icon","pi pi-arrow-left","pTooltip","Salir",1,"p-button-rounded","p-button-text",3,"click"],[1,"mo-panel-content"],[1,"p-fluid","grid"],[1,"p-field","col-12","md:col-12"],[1,"p-float-label"],["type","text","id","producto","pInputText","","disabled","",3,"value"],["for","producto"],[3,"data","cellEnterValueEvent","rowActionEvent"],["tableeditor",""]],template:function(c,l){1&c&&o.YNc(0,P,20,2,"div",0),2&c&&o.Q6J("ngIf",l.display)},dependencies:[t.O5,T.u,E.Hq,O.o,F.q],encapsulation:2})}return s})();const A=["form"];function b(s,U){if(1&s){const e=o.EpF();o.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8)(6,"h2"),o._uU(7,"Listado de Productos"),o.qZA()(),o._UZ(8,"div",9),o.qZA(),o.TgZ(9,"div",10)(10,"mo-report",11),o.NdJ("action",function(l){o.CHM(e);const _=o.oxw();return o.KtG(_.tableAction(l))}),o.qZA()()()()()()}if(2&s){const e=o.oxw();o.xp6(10),o.Q6J("data",e.report)}}const I=[{path:"",component:h,children:[{path:"",component:(()=>{class s{constructor(e){this.dataService=e,this.display=!0,this.currentDate=new Date,this.report={content:[],columns:[{field:"id",columnName:"Id"},{field:"nombre",columnName:"Nombre"},{field:"comentario",columnName:"Comentario"},{field:"estado",columnName:"Estado"},{field:"factorinventario",columnName:"Factor"},{actions:[{iconclass:"pi pi-cog",event:"formula",condition:c=>!0}]}]}}ngOnInit(){this.getdata()}saveForm(){this.getdata()}getdata(){this.dataService.getdata("/produccion/formula/r/productos",{date:this.currentDate}).subscribe(e=>{this.report.content=e})}tableAction(e){"formula"===e.event&&(this.display=!1,this.form.open(e.row))}formulaFormEvent(e){this.display=!0}static#t=this.\u0275fac=function(c){return new(c||s)(o.Y36(g.D))};static#o=this.\u0275cmp=o.Xpm({type:s,selectors:[["formula-manage"]],viewQuery:function(c,l){if(1&c&&o.Gf(A,7),2&c){let _;o.iGM(_=o.CRH())&&(l.form=_.first)}},decls:3,vars:1,consts:[["class","mo-layout-content",4,"ngIf"],[3,"formEvent"],["form",""],[1,"mo-layout-content"],[1,"grid"],[1,"col-12"],[1,"card"],[1,"mo-toolsbar"],[1,"mo-first"],[1,"mo-second"],[1,"mo-panel-content"],[3,"data","action"]],template:function(c,l){1&c&&(o.YNc(0,b,11,1,"div",0),o.TgZ(1,"formula-form",1,2),o.NdJ("formEvent",function(N){return l.formulaFormEvent(N)}),o.qZA()),2&c&&o.Q6J("ngIf",l.display)},dependencies:[t.O5,x.t,Z],encapsulation:2})}return s})()},{path:"**",redirectTo:""}]}];let i=(()=>{class s{static#t=this.\u0275fac=function(c){return new(c||s)};static#o=this.\u0275mod=o.oAB({type:s});static#n=this.\u0275inj=o.cJS({imports:[u.Bz.forChild(I),u.Bz]})}return s})();var m=r(8368),n=r(4858),a=r(4553);let d=(()=>{class s{static#t=this.\u0275fac=function(c){return new(c||s)};static#o=this.\u0275mod=o.oAB({type:s});static#n=this.\u0275inj=o.cJS({imports:[t.ez,i,m.U,a.W,n.V]})}return s})()},7635:(M,p,r)=>{r.d(p,{v:()=>o});var t=r(4946),u=r(6814);let o=(()=>{class f{constructor(g){this.datePipe=g}transform(g,...x){return this.datePipe.transform(g,"MM/yyyy")}static#t=this.\u0275fac=function(x){return new(x||f)(t.Y36(u.uU,16))};static#o=this.\u0275pipe=t.Yjl({name:"periodmonthFormat",type:f,pure:!0})}return f})()}}]);