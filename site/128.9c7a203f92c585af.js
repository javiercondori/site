"use strict";(self.webpackChunktukiweb=self.webpackChunktukiweb||[]).push([[128],{6128:(T,u,a)=>{a.r(u),a.d(u,{VentaDevolucionModule:()=>Y});var v=a(6814),l=a(7664),t=a(4946);let p=(()=>{class i{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["venta-devolucion-main"]],decls:1,vars:0,template:function(o,e){1&o&&t._UZ(0,"router-outlet")},dependencies:[l.lC],encapsulation:2})}return i})();var s=a(5413),h=a(7757),f=a(1106),m=a(3259),g=a(95),E=a(9324),y=a(1532),c=a(6084),N=a(707),Z=a(2772),C=a(6130),D=a(5569),M=a(66);const _=["dataeditor"];let A=(()=>{class i{constructor(n,o){this.dataService=n,this.confirmService=o,this.notaFormEvent=new t.vpe,this.nota=new c.Q,this.dev=new c.Q,this.datanotas={content:[],columns:[{editable:!1,field:"id",columnName:"Id"},{editable:!1,field:"producto.nombre",columnName:"Producto"},{editable:!0,field:"cantidad",columnName:"CANTIDAD",input:{type:"numeric",precision:"15",scale:"2"}},{actions:[{iconclass:"pi pi-trash",event:"delete",condition:e=>0!==e.id}]}]}}ngOnInit(){}newForm(n,o){this.dataService.getdata("/ventas/devolucion/nota",{id:n.id}).subscribe(e=>{this.nota=e,this.dev=o,this.initdev()})}updateForm(n){this.dataService.getdata("/ventas/devolucion/nota",{id:n.id}).subscribe(o=>{this.nota=o,this.fillform()})}foundCuenta(n){let o=new c.Q;o.transporte=this.nota.transporte,this.nota=o,this.nota.cuenta=n,this.fillform()}enterValue(n){mosetfieldvalue(this.dev.detalle[n.row],n.field,n.value);let o=this.dev.detalle[n.row];if(0!==o.cantidad){let e=new c.Q;e.id=this.dev.id,e.devrel=this.dev.devrel,e.transporte=this.dev.transporte,e.cuenta.id=this.dev.cuenta.id,e.detalle.push(new D.y),e.detalle[0].id=o.id,e.detalle[0].devrel=o.devrel,e.detalle[0].producto=o.producto,e.detalle[0].cantidad=o.cantidad,this.dataService.postdata("/ventas/devolucion/save",e).subscribe(d=>{this.dev.id=d.id,this.dev.total=d.total,this.dev.cuenta=d.cuenta,this.dev.devrel=d.devrel,this.dev.cuentadst=d.cuentadst,this.dev.detalle[n.row]=d.detalle[0],this.notaFormEvent.emit({action:"update",data:this.nota})})}}initdev(){this.dev.cuenta=this.nota.cuenta,this.dev.devrel=this.nota.id,this.dev.detalle=[],this.nota.detalle.forEach(n=>{let o=new D.y;o.producto=n.producto,o.devrel=n.id,this.dev.detalle.push(o)}),this.dataeditor.updateData(this.dev.detalle)}fillform(){this.nota.detalle.forEach(n=>{n.cantidad=0}),this.dataeditor.updateData(this.nota.detalle)}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(h.D),t.Y36(f.I))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["venta-devolucion-form"]],viewQuery:function(o,e){if(1&o&&t.Gf(_,7),2&o){let d;t.iGM(d=t.CRH())&&(e.dataeditor=d.first)}},outputs:{notaFormEvent:"notaFormEvent"},decls:13,vars:5,consts:[[1,"p-fluid","grid"],[1,"p-field","col-12","md:col-12","form-group"],["for","entidadnombre"],[1,"input-control"],[3,"data","cellEnterValueEvent"],["dataeditor",""]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"label",2),t._uU(3,"Entidad:"),t.qZA(),t.TgZ(4,"span",3),t._uU(5),t.qZA()(),t.TgZ(6,"div",1)(7,"label",2),t._uU(8,"Cuenta:"),t.qZA(),t.TgZ(9,"span",3),t._uU(10),t.qZA()()(),t.TgZ(11,"mo-dataeditor",4,5),t.NdJ("cellEnterValueEvent",function(r){return e.enterValue(r)}),t.qZA()),2&o&&(t.xp6(5),t.AsE("",e.dev.cuenta.entidad.id,"-",e.dev.cuenta.entidad.nombre,""),t.xp6(5),t.AsE("",e.dev.cuenta.id,"-",e.dev.cuenta.nombre,""),t.xp6(1),t.Q6J("data",e.datanotas))},dependencies:[M.q],encapsulation:2})}return i})();var V=a(8555),F=a(7492);let J=(()=>{class i{constructor(n){this.dataService=n,this.findNotaEvent=new t.vpe,this.cuenta=new V.r,this.findcuentacfg={path:"/ventas/devolucion/findbyentidad",columns:["id","nombre"]},this.report={content:[],rows:{class:"pendiente",condition:o=>"PENDIENTE"===o.nota.estado},columns:[{field:"nota.id",columnName:"ID"},{field:"nota.fecharealizado",columnName:"F.Realizado"},{field:"nota.tipo",columnName:"Tipo"},{field:"notadetalle.producto.nombre",columnName:"Producto"},{field:"notadetalle.cantidad",columnName:"Cantidad"},{field:"nota.estado",columnName:"Estado"},{actions:[{iconname:"arrow_forward",iconclass:"material-icons-outlined mo-icons-center",event:"devolucion",condition:o=>"REALIZADO"===o.nota.estado}]}]}}ngOnInit(){}updateData(n){this.cuenta=n,this.getData()}getData(){this.dataService.getdata("/ventas/ventaagalpon/galponnotas",{id:this.cuenta.id}).subscribe(n=>{this.report.content=n})}reportRowEvent(n){"devolucion"===n.event&&this.findNotaEvent.emit(n.row.nota)}cuentaSelected(n){this.cuenta=n,this.getData()}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(h.D))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["venta-find-nota"]],outputs:{findNotaEvent:"findNotaEvent"},decls:22,vars:8,consts:[[1,"card"],[1,"mo-toolsbar"],[1,"mo-first"],[1,"mo-second"],["for","entidad"],[3,"config","itemSelected"],[1,"p-fluid","grid","mo-panel-content"],[1,"p-field","col-12","md:col-12","form-group"],[1,"input-control"],[1,"p-field","col-12","md:col-12"],[3,"data","action"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),t._uU(4,"Lista de Notas"),t.qZA()(),t.TgZ(5,"div",3)(6,"label",4),t._uU(7,"Buscar por entidad:"),t.qZA(),t.TgZ(8,"mo-autocomplete",5),t.NdJ("itemSelected",function(r){return e.cuentaSelected(r)}),t.qZA()()(),t.TgZ(9,"div",6)(10,"div",7)(11,"label"),t._uU(12,"Entidad:"),t.qZA(),t.TgZ(13,"span",8),t._uU(14),t.qZA()(),t.TgZ(15,"div",7)(16,"label"),t._uU(17,"Cuenta:"),t.qZA(),t.TgZ(18,"span",8),t._uU(19),t.qZA()(),t.TgZ(20,"div",9)(21,"mo-report",10),t.NdJ("action",function(r){return e.reportRowEvent(r)}),t.qZA()()()()),2&o&&(t.xp6(8),t.Q6J("config",e.findcuentacfg),t.xp6(6),t.lnq("",e.cuenta.entidad.id," | ",e.cuenta.entidad.nombre," | ",e.cuenta.entidad.direccion,""),t.xp6(5),t.lnq("",e.cuenta.id," | ",e.cuenta.nombre," | ",e.cuenta.descripcion,""),t.xp6(2),t.Q6J("data",e.report))},dependencies:[E.t,F.J],encapsulation:2})}return i})();const S=["transform"],w=["devform"],Q=["notamanage"];let L=(()=>{class i{constructor(){this.path="",this.devLayoutEvent=new t.vpe,this.display=!1,this.transporte=new s.e}open(n){this.display=!0,this.transporte=n,this.transform.open(this.transporte),0!==n.id&&this.notamanage.update(this.transporte.id)}onTransFormEvent(n){this.transporte=n}onFindNotaEvent(n){let o=new c.Q;o.transporte=this.transporte,this.devform.newForm(n,o)}DevNotaForm(n){this.notamanage.update(this.transporte.id)}onNotaManageEvent(n){}salir(){this.display=!1,this.devLayoutEvent.emit({eventName:"exit"})}static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["venta-devolucion-manage-layout"]],viewQuery:function(o,e){if(1&o&&(t.Gf(S,7),t.Gf(w,7),t.Gf(Q,7)),2&o){let d;t.iGM(d=t.CRH())&&(e.transform=d.first),t.iGM(d=t.CRH())&&(e.devform=d.first),t.iGM(d=t.CRH())&&(e.notamanage=d.first)}},inputs:{path:"path"},outputs:{devLayoutEvent:"devLayoutEvent"},decls:25,vars:6,consts:[[1,"mo-layout-content",3,"hidden"],[1,"grid"],[1,"col-6"],[1,"card"],[1,"mo-toolsbar"],[1,"mo-first"],[1,"mo-second"],["pButton","","pRipple","","type","button","icon","pi pi-arrow-left","pTooltip","Salir",1,"p-button-rounded","p-button-text",3,"click"],[1,"mo-panel-content"],[3,"path","formEvent"],["transform",""],[3,"hidden"],[3,"findNotaEvent"],["findnota",""],[1,"card",3,"hidden"],[3,"notaFormEvent"],["devform",""],[3,"path","notaManageEvent"],["notamanage",""]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3"),t._uU(7,"Devolucion de productos"),t.qZA()(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return e.salir()}),t.qZA()()(),t.TgZ(10,"div",8)(11,"resp-form",9,10),t.NdJ("formEvent",function(r){return e.onTransFormEvent(r)}),t.qZA()()(),t.TgZ(13,"div",11)(14,"venta-find-nota",12,13),t.NdJ("findNotaEvent",function(r){return e.onFindNotaEvent(r)}),t.qZA()()(),t.TgZ(16,"div",2)(17,"div",14)(18,"div",8)(19,"venta-devolucion-form",15,16),t.NdJ("notaFormEvent",function(r){return e.DevNotaForm(r)}),t.qZA()()(),t.TgZ(21,"div",14)(22,"div",8)(23,"notas-manage",17,18),t.NdJ("notaManageEvent",function(r){return e.onNotaManageEvent(r)}),t.qZA()()()()()()),2&o&&(t.Q6J("hidden",!e.display),t.xp6(11),t.Q6J("path",e.path),t.xp6(2),t.Q6J("hidden",0===e.transporte.id),t.xp6(4),t.Q6J("hidden",0===e.transporte.id),t.xp6(4),t.Q6J("hidden",0===e.transporte.id),t.xp6(2),t.Q6J("path",e.path))},dependencies:[m.u,N.Hq,Z.Z,C.T,A,J],encapsulation:2})}return i})();const b=["form"],R=[{path:"",component:p,children:[{path:"",component:(()=>{class i{constructor(n,o){this.dataService=n,this.confirmService=o,this.path="/ventas/devolucion",this.display=!0,this.currentDate=new Date,this.data={content:[],rows:{class:"pendiente",condition:e=>"PENDIENTE"===e.estado},columns:[{field:"id",columnName:"Id"},{field:"fecha",columnName:"Fecha",type:"date"},{field:"conductor",columnName:"Conductor"},{field:"comentario",columnName:"Comentario"},{field:"estado",columnName:"Estado"},{field:"cantidad",columnName:"Alimento",align:"right"},{actions:[{iconname:"delete_forever",iconclass:"material-icons-round",event:"delete",condition:e=>"PENDIENTE"==e.estado},{iconname:"arrow_forward",iconclass:"material-icons-outlined mo-icons-center",event:"openform",condition:e=>!0}]}]}}ngOnInit(){this.getdata()}formEvent(n){this.getdata()}newResp(){this.form.open(new s.e),this.display=!1}ventaDevManageLayout(n){this.display=!0,this.getdata()}onReportEvent(n){switch(n.event){case"openform":this.display=!1,this.form.open(n.row);break;case"delete":this.confirmService.setconfirm({message:"Eliminar '"+n.row.id+"'?",accept:()=>{this.dataService.deletedata(this.path+"/respdelete",{id:n.row.id}).subscribe(e=>{this.getdata()})}})}}onSelectedDate(n){this.getdata()}getdata(){this.dataService.getdata(this.path+"/resp",{date:this.currentDate}).subscribe(n=>{this.data.content=n})}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(h.D),t.Y36(f.I))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-venta-devolucion-manage"]],viewQuery:function(o,e){if(1&o&&t.Gf(b,7),2&o){let d;t.iGM(d=t.CRH())&&(e.form=d.first)}},decls:17,vars:4,consts:[[1,"mo-layout-content",3,"hidden"],[1,"grid"],[1,"col-12"],[1,"card"],[1,"mo-toolsbar"],[1,"mo-first"],[1,"mo-second"],["pTooltip","Registrar Transporte",1,"mo-button",3,"click"],[1,"material-icons-outlined","mo-icons-center"],["dateFormat","dd MM yy","inputId","dateformat",3,"ngModel","ngModelChange","onSelect"],[1,"mo-panel-content"],[3,"data","action"],[3,"path","devLayoutEvent"],["form",""]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2"),t._uU(7,"Devolucion de productos"),t.qZA()(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return e.newResp()}),t.TgZ(10,"i",8),t._uU(11,"add_circle_outline"),t.qZA()(),t.TgZ(12,"p-calendar",9),t.NdJ("ngModelChange",function(r){return e.currentDate=r})("onSelect",function(r){return e.onSelectedDate(r)}),t.qZA()()(),t.TgZ(13,"div",10)(14,"mo-report",11),t.NdJ("action",function(r){return e.onReportEvent(r)}),t.qZA()()()()()(),t.TgZ(15,"venta-devolucion-manage-layout",12,13),t.NdJ("devLayoutEvent",function(r){return e.ventaDevManageLayout(r)}),t.qZA()),2&o&&(t.Q6J("hidden",!e.display),t.xp6(12),t.Q6J("ngModel",e.currentDate),t.xp6(2),t.Q6J("data",e.data),t.xp6(1),t.Q6J("path",e.path))},dependencies:[m.u,g.JJ,g.On,E.t,y.f,L],encapsulation:2})}return i})()},{path:"**",redirectTo:""}]}];let U=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(R),l.Bz]})}return i})();var I=a(8368),O=a(1494),P=a(4553),B=a(961),G=a(7213),H=a(9920),z=a(7432),X=a(1310),K=a(9604);let Y=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[v.ez,U,I.U,X.H,K.w,O.l,P.W,B.q,z.V,g.UX,G.S,y._8,H.K]})}return i})()},1494:(T,u,a)=>{a.d(u,{l:()=>p});var v=a(6814),l=a(3500),t=a(4946);let p=(()=>{class s{static#t=this.\u0275fac=function(m){return new(m||s)};static#e=this.\u0275mod=t.oAB({type:s});static#n=this.\u0275inj=t.cJS({imports:[v.ez,l.K]})}return s})()}}]);