"use strict";(self.webpackChunktukiweb=self.webpackChunktukiweb||[]).push([[477],{8555:(_,g,a)=>{a.d(g,{r:()=>t});var c=a(5289),f=a(698);class t{constructor(){this.id=0,this.entidad=new c.$,this.tipo="",this.nombre="",this.descripcion="",this.estado="ACTIVO",this.saldo=0,this.establecimiento=new f.A}}},5289:(_,g,a)=>{a.d(g,{$:()=>c});class c{constructor(){this.id=0,this.nombre="",this.direccion="",this.telefono=""}}},3297:(_,g,a)=>{a.d(g,{y:()=>c});class c{constructor(){this.id=0,this.sid=0,this.str="",this.sstr="",this.dec=0,this.sdec=0,this.date=new Date,this.sdate=new Date,this.ordersby=[],this.limit=0,this.offset=0}}},8223:(_,g,a)=>{a.d(g,{c:()=>c});class c{constructor(){this.id=0,this.vdate=new Date,this.doccode=0,this.vtype="",this.fechatra=new Date,this.agreement="",this.comment="",this.description="",this.amount=0,this.literal="",this.username="",this.estab_id=0}}},6259:(_,g,a)=>{a.r(g),a.d(g,{CuentaModule:()=>ct});var c=a(6814),f=a(7664),t=a(4946);let u=(()=>{class i{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-cuenta-main"]],decls:1,vars:0,template:function(o,e){1&o&&t._UZ(0,"router-outlet")},dependencies:[f.lC],encapsulation:2})}return i})();var v=a(8555),s=a(5289),l=a(3297),p=a(2316),m=a(2848),b=a(1106),Z=a(3259),A=a(707),N=a(3714),C=a(9324),E=a(7492),S=a(8481),h=a(95),U=a(2105),w=a(7213);function J(i,T){1&i&&(t.TgZ(0,"small",20),t._uU(1," No v\xe1\u013aido"),t.qZA())}function R(i,T){1&i&&(t.TgZ(0,"small",20),t._uU(1," No v\xe1\u013aido"),t.qZA())}const I=function(){return{width:"70vw"}},D=function(){return{"960px":"75vw"}};let F=(()=>{class i{constructor(n,o){this.formBuilder=n,this.dataService=o,this.formEvent=new t.vpe,this.display=!1,this.cuenta=new v.r,this.tipos=[],this.estados=[],this.establecimientos=[],this.form=this.formBuilder.group({nombre:["",h.kI.required],descripcion:["",h.kI.required],tipo:["",h.kI.required],establecimiento:[{},h.kI.required],estado:["",h.kI.required]})}ngOnInit(){this.getEstablecimientos(),this.getTipos(),this.getEstados()}openForm(n){this.form.reset(),this.cuenta=n,this.establecimientos.forEach(o=>{o.id===this.cuenta.establecimiento.id&&(this.cuenta.establecimiento=o)}),this.form.controls.establecimiento.setValue(this.establecimientos[0]),this.form.controls.nombre.setValue(this.cuenta.nombre),this.form.controls.descripcion.setValue(this.cuenta.descripcion),this.form.controls.tipo.setValue(this.cuenta.tipo),this.form.controls.estado.setValue(this.cuenta.estado),this.form.controls.establecimiento.setValue(this.cuenta.establecimiento),this.display=!0}submit(){let n=this.form.getRawValue();this.cuenta.nombre=n.nombre,this.cuenta.descripcion=n.descripcion,this.cuenta.estado=n.estado,this.cuenta.tipo=n.tipo,this.cuenta.establecimiento=n.establecimiento,this.dataService.postdata("/inicio/cuenta/w",this.cuenta).subscribe(o=>{this.display=!1,this.formEvent.emit()})}getEstablecimientos(){this.dataService.getdata("/inicio/cuenta/r/establecimientos",{}).subscribe(n=>{this.establecimientos=n})}getTipos(){this.dataService.getdata("/inicio/cuenta/r/tipos",{}).subscribe(n=>{this.tipos=n})}getEstados(){this.dataService.getdata("/inicio/cuenta/r/estados",{}).subscribe(n=>{this.estados=n})}get nombre(){return this.form.get("nombre")}get descripcion(){return this.form.get("descripcion")}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(h.QS),t.Y36(m.D))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["cuenta-form"]],outputs:{formEvent:"formEvent"},decls:37,vars:19,consts:[["header","Formulario de Cuenta",3,"visible","modal","breakpoints","draggable","resizable","visibleChange"],[3,"formGroup","submit"],[1,"p-fluid","grid"],[1,"p-field","col-12","md:col-12"],[1,"p-float-label"],["type","text","id","entidad","pInputText","","disabled","",3,"value"],["for","entidad"],["type","text","id","nombre","pInputText","","formControlName","nombre"],["for","nombre"],["class","p-error",4,"ngIf"],["type","text","id","descripcion","pInputText","","formControlName","descripcion"],["for","descripcion"],["appendTo","body","formControlName","tipo",3,"options"],["for","tipo"],["id","estado","appendTo","body","formControlName","estado",3,"options"],["for","estado"],["id","establecimiento","appendTo","body","optionLabel","nombre","formControlName","establecimiento",3,"options"],["for","establecimiento"],["type","submit","label","Guardar","styleClass","p-button-text",3,"disabled"],["type","button","label","Salir","styleClass","p-button-text",3,"click"],[1,"p-error"]],template:function(o,e){1&o&&(t.TgZ(0,"p-dialog",0),t.NdJ("visibleChange",function(d){return e.display=d}),t.TgZ(1,"form",1),t.NdJ("submit",function(){return e.submit()}),t.TgZ(2,"div",2)(3,"div",3)(4,"span",4),t._UZ(5,"input",5),t.TgZ(6,"label",6),t._uU(7,"Entidad::"),t.qZA()()(),t.TgZ(8,"div",3)(9,"span",4),t._UZ(10,"input",7),t.TgZ(11,"label",8),t._uU(12,"Nombre:"),t.qZA(),t.YNc(13,J,2,0,"small",9),t.qZA()(),t.TgZ(14,"div",3)(15,"span",4),t._UZ(16,"input",10),t.TgZ(17,"label",11),t._uU(18,"Descripcion:"),t.qZA(),t.YNc(19,R,2,0,"small",9),t.qZA()(),t.TgZ(20,"div",3)(21,"span",4),t._UZ(22,"p-dropdown",12),t.TgZ(23,"label",13),t._uU(24,"Tipo:"),t.qZA()()(),t.TgZ(25,"div",3)(26,"span",4),t._UZ(27,"p-dropdown",14),t.TgZ(28,"label",15),t._uU(29,"Estado:"),t.qZA()()(),t.TgZ(30,"div",3)(31,"span",4),t._UZ(32,"p-dropdown",16),t.TgZ(33,"label",17),t._uU(34,"Establecimiento:"),t.qZA()()()(),t._UZ(35,"p-button",18),t.TgZ(36,"p-button",19),t.NdJ("click",function(){return e.display=!1}),t.qZA()()()),2&o&&(t.Akn(t.DdM(17,I)),t.Q6J("visible",e.display)("modal",!0)("breakpoints",t.DdM(18,D))("draggable",!1)("resizable",!0),t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(4),t.cQ8("value","",e.cuenta.entidad.id," | ",e.cuenta.entidad.nombre," | ",e.cuenta.entidad.direccion,""),t.xp6(8),t.Q6J("ngIf",(null==e.nombre?null:e.nombre.invalid)&&((null==e.nombre?null:e.nombre.dirty)||(null==e.nombre?null:e.nombre.touched))),t.xp6(6),t.Q6J("ngIf",(null==e.descripcion?null:e.descripcion.invalid)&&((null==e.descripcion?null:e.descripcion.dirty)||(null==e.descripcion?null:e.descripcion.touched))),t.xp6(3),t.Q6J("options",e.tipos),t.xp6(5),t.Q6J("options",e.estados),t.xp6(5),t.Q6J("options",e.establecimientos),t.xp6(3),t.Q6J("disabled",e.form.invalid))},dependencies:[c.O5,A.zx,N.o,U.Lt,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,w.V],encapsulation:2})}return i})();var O=a(4392),y=a(9920);const q=["transdate"];let Q=(()=>{class i{constructor(n,o){this.dataService=n,this.confirmService=o,this.reportEvent=new t.vpe,this.display=!1,this.cuenta=new v.r,this.data={content:[],columns:[{field:"voucherdetail.voucher.id",columnName:"Com.Id"},{field:"voucherdetail.fechatra",columnName:"F.Trans",type:"datetime"},{field:"voucherdetail.voucher.vdate",columnName:"F.Reg",type:"datetime"},{field:"voucherdetail.voucher.doccode",columnName:"Nro Nota"},{field:"voucherdetail.voucher.vtype",columnName:"Nota"},{field:"voucherdetail.accountrel.nombre",columnName:"Cuenta"},{field:"voucherdetail.voucher.agreement",columnName:"Conformidad"},{field:"voucherdetail.detail",columnName:"detalle"},{field:"voucherdetail.voucher.description",columnName:"Descripci\xf3n"},{field:"monto",columnName:"Monto",align:"right"},{field:"saldo",columnName:"Saldo",align:"right"},{actions:[{iconname:"event",iconclass:"material-icons-round",event:"updatedate",condition:e=>!0}]}]}}ngOnInit(){}open(n){this.cuenta=n,this.display=!0,this.getdata()}reportAction(n){"updatedate"===n.event&&this.transdate.open(n.row.voucherdetail)}transdateEvent(n){this.getdata()}salir(){this.display=!1,this.reportEvent.emit("salir")}getdata(){var n=new l.y;n.ordersby=["voucherdetail.fechatra asc"],n.id=this.cuenta.id,this.dataService.postdata("/inicio/cuenta/r/transacciones",n).subscribe(o=>{this.data.content=o})}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(m.D),t.Y36(b.I))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["cuenta-transaccion-report"]],viewQuery:function(o,e){if(1&o&&t.Gf(q,7),2&o){let r;t.iGM(r=t.CRH())&&(e.transdate=r.first)}},outputs:{reportEvent:"reportEvent"},decls:29,vars:6,consts:[[1,"mo-layout-content",3,"hidden"],[1,"grid"],[1,"col-12"],[1,"card"],[1,"mo-toolsbar"],[1,"mo-first"],[1,"mo-second"],["pTooltip","Imprimir","printSectionId","holahola","ngxPrint","","styleSheetFile","assets/css/print.css",1,"mo-button"],[1,"material-icons-outlined","mo-icons-center"],["pTooltip","Atr\xe1s",1,"mo-button",3,"click"],["id","holahola",1,"mo-panel-content"],[1,"form-group"],[1,"input-control-info"],[3,"data","action"],[3,"formEvent"],["transdate",""]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2"),t._uU(7,"Transacciones de Cuenta"),t.qZA()(),t.TgZ(8,"div",6)(9,"button",7)(10,"i",8),t._uU(11,"print"),t.qZA()(),t.TgZ(12,"button",9),t.NdJ("click",function(){return e.salir()}),t.TgZ(13,"i",8),t._uU(14,"arrow_back"),t.qZA()()()(),t.TgZ(15,"div",10)(16,"div",11)(17,"label"),t._uU(18,"Entidad:"),t.qZA(),t.TgZ(19,"span",12),t._uU(20),t.qZA()(),t.TgZ(21,"div",11)(22,"label"),t._uU(23,"Cuenta:"),t.qZA(),t.TgZ(24,"span",12),t._uU(25),t.qZA()(),t.TgZ(26,"mo-report",13),t.NdJ("action",function(d){return e.reportAction(d)}),t.qZA(),t.TgZ(27,"voucher-transactiondate",14,15),t.NdJ("formEvent",function(d){return e.transdateEvent(d)}),t.qZA()()()()()()),2&o&&(t.Q6J("hidden",!e.display),t.xp6(20),t.AsE("",e.cuenta.entidad.id," - ",e.cuenta.entidad.nombre,""),t.xp6(5),t.AsE("",e.cuenta.id," - ",e.cuenta.nombre,""),t.xp6(1),t.Q6J("data",e.data))},dependencies:[Z.u,C.t,O.o,y.I],encapsulation:2})}return i})();const M=["pagination"],P=["trreport"],G=["form"];let k=(()=>{class i{constructor(n,o){this.dataService=n,this.confirmService=o,this.reportdata=new l.y,this.display=!0,this.entidad=new s.$,this.data={content:[],columns:[{field:"id",columnName:"Id"},{field:"establecimiento.nombre",columnName:"Establecimiento"},{field:"estado",columnName:"Estado"},{field:"tipo",columnName:"Tipo"},{field:"nombre",columnName:"Nombre"},{field:"descripcion",columnName:"Descrip."},{field:"saldo",columnName:"Saldo",align:"right"},{actions:[{iconclass:"pi pi-search",event:"search",condition:e=>!0},{iconclass:"pi pi-pencil",event:"update",condition:e=>!0},{iconclass:"pi pi-trash",event:"delete",condition:e=>!0}]}]},this.entidadconfig={path:"/all/entidad/byentidad",columns:["id","nombre","direccion"]}}ngOnInit(){this.reportdata.limit=20,this.reportdata.offset=0}openNewForm(){let n=new v.r;n.entidad=this.entidad,this.form.openForm(n)}openUpdateForm(n){n.entidad=this.entidad,this.form.openForm(n)}formEvent(n){this.getdata()}getdata(){this.reportdata.ordersby=["cu.id desc"],this.reportdata.id=this.entidad.id,this.dataService.postdata("/inicio/cuenta/r/report",this.reportdata).subscribe(n=>{this.data.content=n.list;let o=new p.n;o.total=n.total,o.limit=this.reportdata.limit,this.pagination.update(o)})}autocompleteSelected(n){this.entidad=n,this.getdata()}tableAction(n){switch(n.event){case"search":this.display=!1,this.trreport.open(n.row);break;case"delete":this.confirmService.setconfirm({message:"Eliminar CUENTA '"+n.row.id+"'?",accept:()=>{this.dataService.postdata("/inicio/cuenta/d/delete",n.row).subscribe(e=>{this.getdata()})}});break;case"update":this.openUpdateForm(n.row)}}reportEvent(n){this.display=!0}onChangePage(n){this.reportdata.limit=n.limit,this.reportdata.offset=n.offset,this.getdata()}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(m.D),t.Y36(b.I))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["cuenta-manage"]],viewQuery:function(o,e){if(1&o&&(t.Gf(M,7),t.Gf(P,7),t.Gf(G,7)),2&o){let r;t.iGM(r=t.CRH())&&(e.pagination=r.first),t.iGM(r=t.CRH())&&(e.trreport=r.first),t.iGM(r=t.CRH())&&(e.form=r.first)}},decls:25,vars:7,consts:[[1,"mo-layout-content",3,"hidden"],[1,"grid"],[1,"col-12"],[1,"card"],[1,"mo-toolsbar"],[1,"mo-first"],[1,"mo-second"],["for","entidad"],["id","entidad",3,"config","itemSelected"],["pButton","","pRipple","","type","button","icon","pi pi-plus","pTooltip","Registrar Transporte",1,"p-button-rounded","p-button-text",3,"click"],[1,"mo-panel-content"],[1,"p-float-label"],["type","text","id","entidaddata","pInputText","","disabled","",3,"value"],["for","entidaddata"],[3,"data","action"],[3,"changePage"],["pagination",""],[3,"reportEvent"],["trreport",""],[3,"formEvent"],["form",""]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2"),t._uU(7),t.qZA()(),t.TgZ(8,"div",6)(9,"label",7),t._uU(10,"Buscar entidad:"),t.qZA(),t.TgZ(11,"mo-autocomplete",8),t.NdJ("itemSelected",function(d){return e.autocompleteSelected(d)}),t.qZA(),t.TgZ(12,"button",9),t.NdJ("click",function(){return e.openNewForm()}),t.qZA()()(),t.TgZ(13,"div",10)(14,"span",11),t._UZ(15,"input",12),t.TgZ(16,"label",13),t._uU(17,"Entidad"),t.qZA()(),t.TgZ(18,"mo-report",14),t.NdJ("action",function(d){return e.tableAction(d)}),t.qZA(),t.TgZ(19,"mo-pagination",15,16),t.NdJ("changePage",function(d){return e.onChangePage(d)}),t.qZA()()()()()(),t.TgZ(21,"cuenta-transaccion-report",17,18),t.NdJ("reportEvent",function(d){return e.reportEvent(d)}),t.qZA(),t.TgZ(23,"cuenta-form",19,20),t.NdJ("formEvent",function(d){return e.formEvent(d)}),t.qZA()),2&o&&(t.Q6J("hidden",!e.display),t.xp6(7),t.lnq("Entidad: ",e.entidad.id," | ",e.entidad.nombre," | ",e.entidad.direccion,""),t.xp6(4),t.Q6J("config",e.entidadconfig),t.xp6(4),t.Q6J("value",e.entidad.id+" | "+e.entidad.nombre+" | "+e.entidad.direccion),t.xp6(3),t.Q6J("data",e.data))},dependencies:[Z.u,A.Hq,N.o,C.t,E.J,S.r,F,Q],encapsulation:2})}return i})();var L=a(2294);function x(i,T){if(1&i&&(t.TgZ(0,"div"),t._UZ(1,"mo-report",16),t.qZA()),2&i){const n=t.oxw();t.xp6(1),t.Q6J("data",n.gastos)}}function B(i,T){if(1&i&&(t.TgZ(0,"div"),t._UZ(1,"mo-report",16),t.qZA()),2&i){const n=t.oxw();t.xp6(1),t.Q6J("data",n.ventas)}}const V=function(i,T){return{"mo-font-color-pos":i,"mo-font-color-neg":T}};let Y=(()=>{class i{constructor(n){this.dataService=n,this.reportEvent=new t.vpe,this.display=!1,this.cuenta=new v.r,this.gastos={caption:"Resumen de Gastos",content:[],columns:[{field:"catalogo.id",columnName:"ID CAT"},{field:"catalogo.nombre",columnName:"GASTO"},{field:"total",columnName:"TOTAL",align:"right"}],foot:{content:["TOTAL GASTOS",0],cols:[{colspan:"2",index:0,align:"right"},{colspan:"1",index:1,align:"right"}]}},this.entregas={caption:"Resumen entregas",content:[],columns:[{field:"productotipo.id",columnName:"ID"},{field:"productotipo.nombre",columnName:"Tipo"},{field:"total",columnName:"TOTAL",align:"right"}],foot:{content:["TOTAL ENTREGAS",0],cols:[{colspan:"2",index:0,align:"right"},{colspan:"1",index:1,align:"right"}]}},this.ventas={caption:"Ventas",content:[],columns:[{field:"producto.id",columnName:"ID"},{field:"producto.nombre",columnName:"Producto"},{field:"cantidad",columnName:"Cantidad",align:"right"},{field:"total",columnName:"TOTAL",align:"right"}],foot:{content:["TOTAL VENTAS",0],cols:[{colspan:"3",index:0,align:"right"},{colspan:"1",index:1,align:"right"}]}}}ngOnInit(){}open(n){this.cuenta=n,this.display=!0,this.getdata()}onExit(){this.display=!1,this.reportEvent.emit("salir")}getdata(){this.dataService.getdata("/inicio/cuenta/r/report/gastosummary",{id:this.cuenta.id}).subscribe(n=>{this.gastos.content=n,this.gastos.foot.content[1]=this.gastos.content.map(o=>o.total).reduce(function(o,e){return o+e})}),this.dataService.getdata("/inicio/cuenta/r/report/productotiposummary",{id:this.cuenta.id}).subscribe(n=>{this.entregas.content=n,this.entregas.foot.content[1]=this.entregas.content.map(o=>o.total).reduce(function(o,e){return o+e})}),this.dataService.getdata("/inicio/cuenta/r/report/ventassummary",{id:this.cuenta.id}).subscribe(n=>{this.ventas.content=n,this.ventas.foot.content[1]=this.ventas.content.map(o=>o.total).reduce(function(o,e){return o+e})})}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(m.D))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["cuenta-report-resumen"]],outputs:{reportEvent:"reportEvent"},decls:35,vars:14,consts:[[1,"mo-layout-content",3,"hidden"],[1,"grid"],[1,"col-12"],[1,"card"],[1,"mo-toolsbar"],[1,"mo-first"],[1,"mo-second"],["pTooltip","Imprimir","printSectionId","creportresumen","ngxPrint","","styleSheetFile","assets/css/print.css",1,"mo-button"],[1,"material-icons-outlined","mo-icons-center"],["pTooltip","Atr\xe1s",1,"mo-button",3,"click"],["id","creportresumen",1,"mo-panel-content"],[1,"form-group"],[1,"input-control-info"],[1,"input-control-info",3,"ngClass"],[4,"ngIf"],[3,"hidden"],[3,"data"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2"),t._uU(7,"Resumen de Cuenta"),t.qZA()(),t.TgZ(8,"div",6)(9,"button",7)(10,"i",8),t._uU(11,"print"),t.qZA()(),t.TgZ(12,"button",9),t.NdJ("click",function(){return e.onExit()}),t.TgZ(13,"i",8),t._uU(14,"arrow_back"),t.qZA()()()(),t.TgZ(15,"div",10)(16,"div",11)(17,"label"),t._uU(18,"Entidad:"),t.qZA(),t.TgZ(19,"span",12),t._uU(20),t.qZA()(),t.TgZ(21,"div",11)(22,"label"),t._uU(23,"Cuenta:"),t.qZA(),t.TgZ(24,"span",12),t._uU(25),t.qZA()(),t.TgZ(26,"div",11)(27,"label"),t._uU(28,"SALDO CUENTA:"),t.qZA(),t.TgZ(29,"span",13),t._uU(30),t.qZA()(),t.YNc(31,x,2,1,"div",14),t.TgZ(32,"div",15),t._UZ(33,"mo-report",16),t.qZA(),t.YNc(34,B,2,1,"div",14),t.qZA()()()()()),2&o&&(t.Q6J("hidden",!e.display),t.xp6(20),t.AsE("",e.cuenta.entidad.id," - ",e.cuenta.entidad.nombre,""),t.xp6(5),t.AsE("",e.cuenta.id," - ",e.cuenta.nombre,""),t.xp6(4),t.Q6J("ngClass",t.WLB(11,V,e.cuenta.saldo>=0,e.cuenta.saldo<0)),t.xp6(1),t.Oqu(e.cuenta.saldo),t.xp6(1),t.Q6J("ngIf",0!==e.gastos.content.length),t.xp6(1),t.Q6J("hidden",0===e.entregas.content.length),t.xp6(1),t.Q6J("data",e.entregas),t.xp6(1),t.Q6J("ngIf",0!==e.ventas.content.length))},dependencies:[c.mk,c.O5,Z.u,C.t,y.I],encapsulation:2})}return i})();function H(i,T){if(1&i&&(t.TgZ(0,"div"),t._UZ(1,"mo-report",16),t.qZA()),2&i){const n=t.oxw();t.xp6(1),t.Q6J("data",n.gastos)}}function $(i,T){if(1&i&&(t.TgZ(0,"div"),t._UZ(1,"mo-report",16),t.qZA()),2&i){const n=t.oxw();t.xp6(1),t.Q6J("data",n.ventas)}}const z=function(i,T){return{"mo-font-color-pos":i,"mo-font-color-neg":T}};let W=(()=>{class i{constructor(n){this.dataService=n,this.reportEvent=new t.vpe,this.display=!1,this.cuenta=new v.r,this.gastos={caption:"Detalle de Gastos",content:[],columns:[{field:"catalogo.id",columnName:"ID CAT"},{field:"catalogo.nombre",columnName:"GASTO"},{field:"detalle",columnName:"Detalle"},{field:"cantidad",columnName:"Cantidad",align:"right"},{field:"pu",columnName:"PU",align:"right"},{field:"total",columnName:"TOTAL",align:"right"}],foot:{content:["TOTAL GASTOS",0],cols:[{colspan:"5",index:0,align:"right"},{colspan:"1",index:1,align:"right"}]}},this.entregas={caption:"Notas de Entrega",content:[],columns:[{field:"nota.transporte.fecha",columnName:"Fecha",type:"datetime"},{field:"nota.transporte.conductor",columnName:"Transporte"},{field:"nota.cuenta.nombre",columnName:"Cuenta"},{field:"notadetalle.producto.nombre",columnName:"Producto"},{field:"notadetalle.cantidad",columnName:"Cantidad",align:"right"},{field:"notadetalle.pu",columnName:"Pu",align:"right"},{field:"notadetalle.total",columnName:"TOTAL",align:"right"}],foot:{content:["TOTAL ENTREGAS",0],cols:[{colspan:"6",index:0,align:"right"},{colspan:"1",index:1,align:"right"}]}},this.ventas={caption:"Ventas",content:[],columns:[{field:"nota.transporte.fecha",columnName:"Fecha",type:"datetime"},{field:"nota.transporte.conductor",columnName:"Transporte"},{field:"nota.cuenta.nombre",columnName:"Cuenta"},{field:"notadetalle.producto.nombre",columnName:"Producto"},{field:"notadetalle.cantidad",columnName:"Cantidad",align:"right"},{field:"notadetalle.pu",columnName:"Pu",align:"right"},{field:"notadetalle.total",columnName:"TOTAL",align:"right"}],foot:{content:["TOTAL VENTAS",0],cols:[{colspan:"6",index:0,align:"right"},{colspan:"1",index:1,align:"right"}]}}}ngOnInit(){}open(n){this.cuenta=n,this.display=!0,this.getdata()}onExit(){this.display=!1,this.reportEvent.emit("salir")}getdata(){this.dataService.getdata("/inicio/cuenta/r/report/gastos",{id:this.cuenta.id}).subscribe(n=>{this.gastos.content=n,this.gastos.foot.content[1]=this.gastos.content.map(o=>o.total).reduce(function(o,e){return o+e})}),this.dataService.getdata("/inicio/cuenta/r/report/entregas",{id:this.cuenta.id}).subscribe(n=>{this.entregas.content=n,this.entregas.foot.content[1]=this.entregas.content.map(o=>o.notadetalle.total).reduce(function(o,e){return o+e})}),this.dataService.getdata("/inicio/cuenta/r/report/ventas",{id:this.cuenta.id}).subscribe(n=>{this.ventas.content=n,this.ventas.foot.content[1]=this.ventas.content.map(o=>o.notadetalle.total).reduce(function(o,e){return o+e})})}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(m.D))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["cuenta-report-detalle"]],outputs:{reportEvent:"reportEvent"},decls:35,vars:14,consts:[[1,"mo-layout-content",3,"hidden"],[1,"grid"],[1,"col-12"],[1,"card"],[1,"mo-toolsbar"],[1,"mo-first"],[1,"mo-second"],["pTooltip","Imprimir","printSectionId","creportdetalle","ngxPrint","","styleSheetFile","assets/css/print.css",1,"mo-button"],[1,"material-icons-outlined","mo-icons-center"],["pTooltip","Atr\xe1s",1,"mo-button",3,"click"],["id","creportdetalle",1,"mo-panel-content"],[1,"form-group"],[1,"input-control-info"],[1,"input-control-info",3,"ngClass"],[4,"ngIf"],[3,"hidden"],[3,"data"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2"),t._uU(7,"Resumen de Cuenta"),t.qZA()(),t.TgZ(8,"div",6)(9,"button",7)(10,"i",8),t._uU(11,"print"),t.qZA()(),t.TgZ(12,"button",9),t.NdJ("click",function(){return e.onExit()}),t.TgZ(13,"i",8),t._uU(14,"arrow_back"),t.qZA()()()(),t.TgZ(15,"div",10)(16,"div",11)(17,"label"),t._uU(18,"Entidad:"),t.qZA(),t.TgZ(19,"span",12),t._uU(20),t.qZA()(),t.TgZ(21,"div",11)(22,"label"),t._uU(23,"Cuenta:"),t.qZA(),t.TgZ(24,"span",12),t._uU(25),t.qZA()(),t.TgZ(26,"div",11)(27,"label"),t._uU(28,"SALDO CUENTA:"),t.qZA(),t.TgZ(29,"span",13),t._uU(30),t.qZA()(),t.YNc(31,H,2,1,"div",14),t.TgZ(32,"div",15),t._UZ(33,"mo-report",16),t.qZA(),t.YNc(34,$,2,1,"div",14),t.qZA()()()()()),2&o&&(t.Q6J("hidden",!e.display),t.xp6(20),t.AsE("",e.cuenta.entidad.id," - ",e.cuenta.entidad.nombre,""),t.xp6(5),t.AsE("",e.cuenta.id," - ",e.cuenta.nombre,""),t.xp6(4),t.Q6J("ngClass",t.WLB(11,z,e.cuenta.saldo>=0,e.cuenta.saldo<0)),t.xp6(1),t.Oqu(e.cuenta.saldo),t.xp6(1),t.Q6J("ngIf",0!==e.gastos.content.length),t.xp6(1),t.Q6J("hidden",0===e.entregas.content.length),t.xp6(1),t.Q6J("data",e.entregas),t.xp6(1),t.Q6J("ngIf",0!==e.ventas.content.length))},dependencies:[c.mk,c.O5,Z.u,C.t,y.I],encapsulation:2})}return i})();const X=["pagination"],j=["transactions"],K=["resumen"],tt=["detalle"];function et(i,T){if(1&i&&(t.TgZ(0,"div",19)(1,"label"),t._uU(2,"Entidad:"),t.qZA(),t.TgZ(3,"span",20),t._uU(4),t.qZA()()),2&i){const n=t.oxw();t.xp6(4),t.AsE("",n.entidad.id," - ",n.entidad.nombre,"")}}const nt=[{path:"",component:u,children:[{path:"",component:k},{path:"report",component:(()=>{class i{constructor(n,o){this.dataService=n,this.confirmService=o,this.path="/inicio/cuenta",this.display=!0,this.entidad=new s.$,this.reportdata=new l.y,this.data={content:[],columns:[{field:"id",columnName:"Id"},{field:"estado",columnName:"Estado"},{field:"tipo",columnName:"Tipo"},{field:"nombre",columnName:"Nombre"},{field:"descripcion",columnName:"Descrip."},{field:"saldo",columnName:"Saldo",align:"right"},{actions:[{iconclass:"material-icons-outlined",iconname:"summarize",event:"summarize",condition:e=>!0},{iconclass:"material-icons-outlined",iconname:"description",event:"detail",condition:e=>!0},{iconclass:"material-icons-outlined",iconname:"receipt_long",event:"transactions",condition:e=>!0}]}]},this.entidadconfig={path:"/all/entidad/byentidad",columns:["id","nombre","direccion"]}}ngOnInit(){this.reportdata.limit=20,this.reportdata.offset=0}onAutocompleteSelected(n){this.entidad=n,this.getdata()}onActionReport(n){switch(n.event){case"transactions":this.display=!1,this.transactions.open(n.row);break;case"summarize":this.display=!1,this.resumen.open(n.row);break;case"detail":this.display=!1,this.detalle.open(n.row)}}onReportEvent(n){this.display=!0}onReportResumenEvent(n){this.display=!0}onReportDetalleEvent(n){this.display=!0}onChangePage(n){this.reportdata.limit=n.limit,this.reportdata.offset=n.offset,this.getdata()}getdata(){this.reportdata.ordersby=["cu.id desc"],this.reportdata.id=this.entidad.id,this.dataService.postdata("/inicio/cuenta/r/report",this.reportdata).subscribe(n=>{this.data.content=n.list;let o=new p.n;o.total=n.total,o.limit=this.reportdata.limit,this.pagination.update(o)})}static#t=this.\u0275fac=function(o){return new(o||i)(t.Y36(m.D),t.Y36(b.I))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-cuenta-reports"]],viewQuery:function(o,e){if(1&o&&(t.Gf(X,7),t.Gf(j,7),t.Gf(K,7),t.Gf(tt,7)),2&o){let r;t.iGM(r=t.CRH())&&(e.pagination=r.first),t.iGM(r=t.CRH())&&(e.transactions=r.first),t.iGM(r=t.CRH())&&(e.resumen=r.first),t.iGM(r=t.CRH())&&(e.detalle=r.first)}},decls:23,vars:5,consts:[[1,"mo-layout-content",3,"hidden"],[1,"grid"],[1,"col-12"],[1,"card"],[1,"mo-toolsbar"],[1,"mo-first"],[1,"mo-second"],["for","entidad"],["id","entidad",3,"config","itemSelected"],[1,"mo-panel-content"],["class","form-group",4,"ngIf"],[3,"data","action"],[3,"changePage"],["pagination",""],[3,"path","reportEvent"],["transactions",""],[3,"reportEvent"],["resumen",""],["detalle",""],[1,"form-group"],[1,"input-control-info"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2"),t._uU(7,"Listado de cuentas"),t.qZA()(),t.TgZ(8,"div",6)(9,"label",7),t._uU(10,"Buscar por entidad:"),t.qZA(),t.TgZ(11,"mo-autocomplete",8),t.NdJ("itemSelected",function(d){return e.onAutocompleteSelected(d)}),t.qZA()()(),t.TgZ(12,"div",9),t.YNc(13,et,5,2,"div",10),t.TgZ(14,"mo-report",11),t.NdJ("action",function(d){return e.onActionReport(d)}),t.qZA(),t.TgZ(15,"mo-pagination",12,13),t.NdJ("changePage",function(d){return e.onChangePage(d)}),t.qZA()()()()()(),t.TgZ(17,"trans-report",14,15),t.NdJ("reportEvent",function(d){return e.onReportEvent(d)}),t.qZA(),t.TgZ(19,"cuenta-report-resumen",16,17),t.NdJ("reportEvent",function(d){return e.onReportResumenEvent(d)}),t.qZA(),t.TgZ(21,"cuenta-report-detalle",16,18),t.NdJ("reportEvent",function(d){return e.onReportDetalleEvent(d)}),t.qZA()),2&o&&(t.Q6J("hidden",!e.display),t.xp6(11),t.Q6J("config",e.entidadconfig),t.xp6(2),t.Q6J("ngIf",0!==e.entidad.id),t.xp6(1),t.Q6J("data",e.data),t.xp6(3),t.Q6J("path",e.path))},dependencies:[c.O5,C.t,E.J,L.U,S.r,Y,W],encapsulation:2})}return i})()},{path:"**",redirectTo:""}]}];let ot=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[f.Bz.forChild(nt),f.Bz]})}return i})();var it=a(8368),at=a(2454),rt=a(4553),st=a(9373),lt=a(5084),dt=a(798);let ct=(()=>{class i{static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[c.ez,ot,it.U,rt.W,at.q,dt.e,lt.h,h.UX,w.S,y.K,st.V]})}return i})()},9920:(_,g,a)=>{a.d(g,{I:()=>f,K:()=>t});var c=a(4946);let f=(()=>{class u{constructor(){this._printStyle=[],this.previewOnly=!1,this.useExistingCss=!1,this.printDelay=0,this._styleSheetFile=""}set printStyle(s){for(let l in s)s.hasOwnProperty(l)&&this._printStyle.push((l+JSON.stringify(s[l])).replace(/['"]+/g,""));this.returnStyleValues()}returnStyleValues(){return`<style> ${this._printStyle.join(" ").replace(/,/g,";")} </style>`}set styleSheetFile(s){let l=function(p){return`<link rel="stylesheet" type="text/css" href="${p}">`};if(-1!==s.indexOf(",")){const p=s.split(",");for(let m of p)this._styleSheetFile=this._styleSheetFile+l(m)}else this._styleSheetFile=l(s)}returnStyleSheetLinkTags(){return this._styleSheetFile}getElementTag(s){const l=[],p=document.getElementsByTagName(s);for(let m=0;m<p.length;m++)l.push(p[m].outerHTML);return l.join("\r\n")}getFormData(s){for(var l=0;l<s.length;l++)s[l].defaultValue=s[l].value,s[l].checked&&(s[l].defaultChecked=!0)}getHtmlContents(){let s=document.getElementById(this.printSectionId),l=s.getElementsByTagName("input");this.getFormData(l);let p=s.getElementsByTagName("textarea");return this.getFormData(p),s.innerHTML}print(){let s,l,p="",m="";const b=this.getElementTag("base");this.useExistingCss&&(p=this.getElementTag("style"),m=this.getElementTag("link")),s=this.getHtmlContents(),l=window.open("","_blank","top=0,left=0,height=auto,width=auto"),l.document.open(),l.document.write(`\n      <html>\n        <head>\n          <title>${this.printTitle?this.printTitle:""}</title>\n          ${b}\n          ${this.returnStyleValues()}\n          ${this.returnStyleSheetLinkTags()}\n          ${p}\n          ${m}\n        </head>\n        <body>\n          ${s}\n          <script defer>\n            function triggerPrint(event) {\n              window.removeEventListener('load', triggerPrint, false);\n              ${this.previewOnly?"":`setTimeout(function() {\n                closeWindow(window.print());\n              }, ${this.printDelay});`}\n            }\n            function closeWindow(){\n                window.close();\n            }\n            window.addEventListener('load', triggerPrint, false);\n          <\/script>\n        </body>\n      </html>`),l.document.close()}}return u.\u0275fac=function(s){return new(s||u)},u.\u0275dir=c.lG2({type:u,selectors:[["button","ngxPrint",""]],hostBindings:function(s,l){1&s&&c.NdJ("click",function(){return l.print()})},inputs:{previewOnly:"previewOnly",printSectionId:"printSectionId",printTitle:"printTitle",useExistingCss:"useExistingCss",printDelay:"printDelay",printStyle:"printStyle",styleSheetFile:"styleSheetFile"}}),u})(),t=(()=>{class u{}return u.\u0275fac=function(s){return new(s||u)},u.\u0275mod=c.oAB({type:u}),u.\u0275inj=c.cJS({}),u})()}}]);