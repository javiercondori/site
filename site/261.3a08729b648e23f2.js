"use strict";(self.webpackChunktukiweb=self.webpackChunktukiweb||[]).push([[261],{8555:(y,h,i)=>{i.d(h,{r:()=>n});var t=i(5289),f=i(698);class n{constructor(){this.id=0,this.entidad=new t.$,this.tipo="",this.nombre="",this.descripcion="",this.estado="ACTIVO",this.saldo=0,this.establecimiento=new f.A}}},5289:(y,h,i)=>{i.d(h,{$:()=>t});class t{constructor(){this.id=0,this.nombre="",this.direccion="",this.telefono=""}}},3297:(y,h,i)=>{i.d(h,{y:()=>t});class t{constructor(){this.id=0,this.sid=0,this.str="",this.sstr="",this.dec=0,this.sdec=0,this.date=new Date,this.sdate=new Date,this.ordersby=[],this.limit=0,this.offset=0}}},9324:(y,h,i)=>{i.d(h,{t:()=>U});var t=i(4946),f=i(6814),n=i(4621),m=i(2415),v=i(7635);function l(o,_){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.data.caption)}}function s(o,_){if(1&o&&(t.TgZ(0,"th",5),t._uU(1),t.qZA()),2&o){const e=t.oxw(),a=e.index,u=e.$implicit,c=t.oxw();t.Udp("text-align",c.data.columns[a].align),t.xp6(1),t.hij("",u.columnName," ")}}function g(o,_){1&o&&t._UZ(0,"th",5)}function x(o,_){if(1&o&&(t.ynx(0),t.YNc(1,s,2,3,"th",3),t.YNc(2,g,1,0,"th",4),t.BQk()),2&o){const e=_.$implicit;t.xp6(1),t.Q6J("ngIf",e.field),t.xp6(1),t.Q6J("ngIf",!e.field)}}function C(o,_){if(1&o&&(t.ynx(0),t.TgZ(1,"td",5),t._uU(2),t.qZA(),t.BQk()),2&o){const e=_.$implicit,a=t.oxw(2);t.xp6(1),t.Udp("text-align",e.align),t.uIk("colspan",e.colspan),t.xp6(1),t.hij("",a.data.foot.content[e.index]," ")}}function Z(o,_){if(1&o&&(t.TgZ(0,"tfoot")(1,"tr"),t.YNc(2,C,3,4,"ng-container",2),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.data.foot.cols)}}function E(o,_){if(1&o&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&o){const e=t.oxw().index,a=t.oxw().index,u=t.oxw();t.Udp("text-align",u.data.columns[e].align),t.xp6(1),t.Oqu(u.getfieldvalue(a,e))}}function O(o,_){if(1&o&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"dateFormat"),t.qZA()),2&o){const e=t.oxw().index,a=t.oxw().index,u=t.oxw();t.Udp("text-align",u.data.columns[e].align),t.xp6(1),t.Oqu(t.lcZ(2,3,u.getfieldvalue(a,e)))}}function A(o,_){if(1&o&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"datetimeFormat"),t.qZA()),2&o){const e=t.oxw().index,a=t.oxw().index,u=t.oxw();t.Udp("text-align",u.data.columns[e].align),t.xp6(1),t.Oqu(t.lcZ(2,3,u.getfieldvalue(a,e)))}}function w(o,_){if(1&o&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"periodmonthFormat"),t.qZA()),2&o){const e=t.oxw().index,a=t.oxw().index,u=t.oxw();t.Udp("text-align",u.data.columns[e].align),t.xp6(1),t.Oqu(t.lcZ(2,3,u.getfieldvalue(a,e)))}}function P(o,_){if(1&o){const e=t.EpF();t.TgZ(0,"a",12),t.NdJ("click",function(u){t.CHM(e);const c=t.oxw().$implicit,b=t.oxw(3).$implicit,d=t.oxw();return t.KtG(d.actionEvent(u,b,c.event))}),t.TgZ(1,"i"),t._uU(2),t.qZA()()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Tol(e.iconclass),t.xp6(1),t.Oqu(e.iconname)}}function D(o,_){if(1&o&&(t.ynx(0),t.YNc(1,P,3,4,"a",11),t.BQk()),2&o){const e=_.$implicit,a=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",e.condition(a))}}function N(o,_){if(1&o&&(t.TgZ(0,"td",9)(1,"div",10),t.YNc(2,D,2,1,"ng-container",2),t.qZA()()),2&o){const e=t.oxw().index,a=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",a.data.columns[e].actions)}}function S(o,_){if(1&o&&(t.ynx(0),t.YNc(1,E,2,3,"td",7),t.YNc(2,O,3,5,"td",7),t.YNc(3,A,3,5,"td",7),t.YNc(4,w,3,5,"td",7),t.YNc(5,N,3,1,"td",8),t.BQk()),2&o){const e=_.index,a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",a.data.columns[e].field&&void 0===a.data.columns[e].type),t.xp6(1),t.Q6J("ngIf",a.data.columns[e].field&&"date"===a.data.columns[e].type),t.xp6(1),t.Q6J("ngIf",a.data.columns[e].field&&"datetime"===a.data.columns[e].type),t.xp6(1),t.Q6J("ngIf",a.data.columns[e].field&&"periodmonth"===a.data.columns[e].type),t.xp6(1),t.Q6J("ngIf",!a.data.columns[e].field)}}function F(o,_){if(1&o&&(t.ynx(0),t.TgZ(1,"tr",6),t.YNc(2,S,6,5,"ng-container",2),t.qZA(),t.BQk()),2&o){const e=_.$implicit,a=t.oxw();t.xp6(1),t.Q6J("ngClass",void 0!==a.data.rowclass?a.data.rowclass(e,a.data.val):a.data.rows.condition(e)?a.data.rows.class:""),t.xp6(1),t.Q6J("ngForOf",a.data.columns)}}let U=(()=>{class o{constructor(){this.fielddefault={align:"left"},this.rows={class:"",condition:e=>!1},this.action=new t.vpe}ngOnInit(){for(let e of this.data.columns)void 0!==e.field&&mosetdefaults(this.fielddefault,e);void 0===this.data.rows&&(this.data.rows=this.rows)}getfieldvalue(e,a){return mogetfieldvalue(this.data.content[e],this.data.columns[a].field)}actionEvent(e,a,u){e.preventDefault(),this.action.emit({event:u,row:a})}static#t=this.\u0275fac=function(a){return new(a||o)};static#n=this.\u0275cmp=t.Xpm({type:o,selectors:[["mo-report"]],inputs:{data:"data"},outputs:{action:"action"},decls:9,vars:4,consts:[[1,"customers"],[4,"ngIf"],[4,"ngFor","ngForOf"],["scope","col",3,"text-align",4,"ngIf"],["scope","col",4,"ngIf"],["scope","col"],[3,"ngClass"],[3,"text-align",4,"ngIf"],["style","padding: 0;",4,"ngIf"],[2,"padding","0"],[1,"mo-reportactions"],["href","#",3,"click",4,"ngIf"],["href","#",3,"click"]],template:function(a,u){1&a&&(t.TgZ(0,"table",0)(1,"caption"),t.YNc(2,l,2,1,"ng-container",1),t.qZA(),t.TgZ(3,"thead")(4,"tr"),t.YNc(5,x,3,2,"ng-container",2),t.qZA()(),t.YNc(6,Z,3,1,"tfoot",1),t.TgZ(7,"tbody"),t.YNc(8,F,3,2,"ng-container",2),t.qZA()()),2&a&&(t.xp6(2),t.Q6J("ngIf",u.data.caption),t.xp6(3),t.Q6J("ngForOf",u.data.columns),t.xp6(1),t.Q6J("ngIf",u.data.foot),t.xp6(2),t.Q6J("ngForOf",u.data.content))},dependencies:[f.mk,f.sg,f.O5,n.L,m.E,v.v],styles:[".customers[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}.customers[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:1.4em;color:#3e3e3e;font-weight:700}.customers[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:4px}.customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #f2f2f2}.customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}.customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px;text-align:center;background-color:#464646;color:#fff}.customers[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{padding-top:2px;padding-bottom:2px;color:#383838;font-weight:700}"]})}return o})()},4553:(y,h,i)=>{i.d(h,{W:()=>m});var t=i(6814),f=i(9177),n=i(4946);let m=(()=>{class v{static#t=this.\u0275fac=function(g){return new(g||v)};static#n=this.\u0275mod=n.oAB({type:v});static#e=this.\u0275inj=n.cJS({imports:[t.ez,f.A]})}return v})()},2640:(y,h,i)=>{i.r(h),i.d(h,{MortalidadModule:()=>u});var t=i(6814),f=i(7664),n=i(4946);let m=(()=>{class c{static#t=this.\u0275fac=function(r){return new(r||c)};static#n=this.\u0275cmp=n.Xpm({type:c,selectors:[["mortalidad-main"]],decls:1,vars:0,template:function(r,p){1&r&&n._UZ(0,"router-outlet")},dependencies:[f.lC],encapsulation:2})}return c})();var v=i(5289),l=i(3297),s=i(7757),g=i(1106),x=i(9324),C=i(7492),Z=i(7773);class E{constructor(){this.id=0,this.galpon_id=0,this.fecha=new Date,this.dia=0,this.cantidadm=-1,this.cantidadh=-1,this.total=0,this.nota=""}}var O=i(3259),A=i(7841),w=i(9920);const P=["mortdata"];let D=(()=>{class c{constructor(d,r){this.dataService=d,this.confirmService=r,this.formEvent=new n.vpe,this.display=!1,this.galpon=new Z.e,this.data={content:[],columns:[{editable:!1,field:"id",columnName:"ID"},{editable:!1,field:"fecha",columnName:"Fecha",type:"date"},{editable:!1,field:"dia",columnName:"Dia"},{editable:!0,field:"cantidadm",columnName:"Cant. M",align:"right",input:{type:"numeric",precision:"15",scale:"0"}},{editable:!0,field:"cantidadh",columnName:"Cant. H",align:"right",input:{type:"numeric",precision:"15",scale:"0"}},{editable:!1,field:"total",columnName:"Total dia",align:"right"}]}}open(d){this.mortdata.updateData(new Array),this.galpon=d,this.getdata(),this.display=!0}salir(){this.display=!1,this.formEvent.emit()}delete(){this.confirmService.setconfirm({message:"Elimiar \xfaltimo registro de mortalidad?",accept:()=>{let r=new E;r.galpon_id=this.galpon.cuenta.id,this.dataService.postdata("/plgalpon/mortalidad/delete",r).subscribe(p=>{this.getdata()})}})}dataeditorEnterValue(d){mosetfieldvalue(this.data.content[d.row],d.field,d.value);let r=this.data.content[d.row];r.galpon_id=this.galpon.cuenta.id,r.cantidadm<0||r.cantidadh<0||this.dataService.postdata("/plgalpon/mortalidad/save",r).subscribe(p=>{this.data.content[d.row]=p,this.mortdata.addRow(new E,"id"),this.updategalpon()})}getdata(){var d=new l.y;d.id=this.galpon.cuenta.id,d.ordersby=["mortalidad.dia asc"],this.dataService.postdata("/plgalpon/mortalidad",d).subscribe(r=>{this.mortdata.updateData(r),this.mortdata.addRow(new E,"id")})}updategalpon(){this.dataService.getdata("/plgalpon/mortalidad/galpon",{id:this.galpon.cuenta.id}).subscribe(d=>{this.galpon=d})}static#t=this.\u0275fac=function(r){return new(r||c)(n.Y36(s.D),n.Y36(g.I))};static#n=this.\u0275cmp=n.Xpm({type:c,selectors:[["plgas-mortalidad-form"]],viewQuery:function(r,p){if(1&r&&n.Gf(P,5),2&r){let M;n.iGM(M=n.CRH())&&(p.mortdata=M.first)}},outputs:{formEvent:"formEvent"},decls:52,vars:10,consts:[[1,"mo-layout-content",3,"hidden"],[1,"grid"],[1,"col-12"],[1,"card"],[1,"mo-toolsbar"],[1,"mo-first"],[1,"mo-second"],["pTooltip","Imprimir","printSectionId","prnmort","ngxPrint","","styleSheetFile","assets/css/print.css",1,"mo-button"],[1,"material-icons-outlined","mo-icons-center"],["pTooltip","Eliminar \xfaltimo registro",1,"mo-button",3,"click"],[1,"material-symbols-outlined"],["pTooltip","Atr\xe1s",1,"mo-button",3,"click"],[1,"p-fluid","grid"],[1,"p-field","col-12","md:col-5","form-group"],["for","entidadnombre"],[1,"input-control-info"],[1,"p-field","col-12","md:col-7","form-group"],["for","entidaddir"],["for","cuentanombre"],["for","cuentadescripcion"],["id","prnmort",1,"mo-panel-content"],[3,"data","cellEnterValueEvent"],["mortdata",""]],template:function(r,p){1&r&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2"),n._uU(7,"Registro de mortalidad"),n.qZA()(),n.TgZ(8,"div",6)(9,"button",7)(10,"i",8),n._uU(11,"print"),n.qZA()(),n.TgZ(12,"button",9),n.NdJ("click",function(){return p.delete()}),n.TgZ(13,"i",10),n._uU(14,"delete"),n.qZA()(),n.TgZ(15,"button",11),n.NdJ("click",function(){return p.salir()}),n.TgZ(16,"i",10),n._uU(17,"arrow_back"),n.qZA()()()(),n.TgZ(18,"div",12)(19,"div",13)(20,"label",14),n._uU(21,"Entidad:"),n.qZA(),n.TgZ(22,"span",15),n._uU(23),n.qZA()(),n.TgZ(24,"div",16)(25,"label",17),n._uU(26,"Direcci\xf3n"),n.qZA(),n.TgZ(27,"span",15),n._uU(28),n.qZA()(),n.TgZ(29,"div",13)(30,"label",18),n._uU(31,"Galpon:"),n.qZA(),n.TgZ(32,"span",15),n._uU(33),n.qZA()(),n.TgZ(34,"div",16)(35,"label",19),n._uU(36,"Descripci\xf3n:"),n.qZA(),n.TgZ(37,"span",15),n._uU(38),n.qZA()(),n.TgZ(39,"div",13)(40,"label",18),n._uU(41,"Cantidad pollos:"),n.qZA(),n.TgZ(42,"span",15),n._uU(43),n.qZA()(),n.TgZ(44,"div",16)(45,"label",19),n._uU(46,"Mortalidad:"),n.qZA(),n.TgZ(47,"span",15),n._uU(48),n.qZA()()(),n.TgZ(49,"div",20)(50,"mo-dataeditor",21,22),n.NdJ("cellEnterValueEvent",function(T){return p.dataeditorEnterValue(T)}),n.qZA()()()()()()),2&r&&(n.Q6J("hidden",!p.display),n.xp6(23),n.AsE("",p.galpon.cuenta.entidad.id,"-",p.galpon.cuenta.entidad.nombre,""),n.xp6(5),n.Oqu(p.galpon.cuenta.entidad.direccion),n.xp6(5),n.AsE("",p.galpon.cuenta.id,"-",p.galpon.cuenta.nombre,""),n.xp6(5),n.Oqu(p.galpon.cuenta.descripcion),n.xp6(5),n.Oqu(p.galpon.cantidad),n.xp6(5),n.Oqu(p.galpon.mortalidad),n.xp6(2),n.Q6J("data",p.data))},dependencies:[O.u,A.q,w.I],encapsulation:2})}return c})();const N=["mortalidadform"],F=[{path:"",component:m,children:[{path:"",component:(()=>{class c{constructor(d,r){this.dataService=d,this.confirmService=r,this.path="/plgalpon/mortalidad",this.display=!0,this.entidad=new v.$,this.findEntidad={path:"/all/entidad/byname",columns:["id","nombre"]},this.galpones={content:[],columns:[{field:"cuenta.id",columnName:"Nro Cta"},{field:"cuenta.estado",columnName:"Estado"},{field:"cuenta.nombre",columnName:"Galpon"},{field:"fechainicio",columnName:"Fecha Incio",type:"date"},{field:"cantidad",columnName:"Nro Pollos",align:"right"},{field:"saldo",columnName:"Saldo Pollo",align:"right"},{field:"mortalidad",columnName:"Mortalidad",align:"right"},{field:"alimento",columnName:"Alimento (tn)",align:"right"},{actions:[{iconclass:"pi pi-chevron-circle-right",event:"register",condition:p=>!0}]}]}}entidadSelected(d){this.entidad=d,this.getdata()}reportAction(d){"register"===d.event&&(this.display=!1,this.mortalidadform.open(d.row))}mortFormEvent(d){this.getdata(),this.display=!0}getdata(){var d=new l.y;d.id=this.entidad.id,d.ordersby=["cu.id desc"],this.dataService.postdata(this.path+"/galpones",d).subscribe(r=>{this.galpones.content=r})}static#t=this.\u0275fac=function(r){return new(r||c)(n.Y36(s.D),n.Y36(g.I))};static#n=this.\u0275cmp=n.Xpm({type:c,selectors:[["app-mortalidad-manage"]],viewQuery:function(r,p){if(1&r&&n.Gf(N,7),2&r){let M;n.iGM(M=n.CRH())&&(p.mortalidadform=M.first)}},decls:16,vars:3,consts:[[1,"mo-layout-content",3,"hidden"],[1,"grid"],[1,"col-12"],[1,"card"],[1,"mo-toolsbar"],[1,"mo-first"],[1,"mo-second","form-group"],["for","entidad"],["id","producto",3,"config","itemSelected"],[1,"mo-panel-content"],[3,"data","action"],[3,"formEvent"],["mortalidadform",""]],template:function(r,p){1&r&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2"),n._uU(7,"Galpones por entidad:"),n.qZA()(),n.TgZ(8,"div",6)(9,"label",7),n._uU(10,"Busqueda por Entidad:"),n.qZA(),n.TgZ(11,"mo-autocomplete",8),n.NdJ("itemSelected",function(T){return p.entidadSelected(T)}),n.qZA()()(),n.TgZ(12,"div",9)(13,"mo-report",10),n.NdJ("action",function(T){return p.reportAction(T)}),n.qZA()()()()()(),n.TgZ(14,"plgas-mortalidad-form",11,12),n.NdJ("formEvent",function(T){return p.mortFormEvent(T)}),n.qZA()),2&r&&(n.Q6J("hidden",!p.display),n.xp6(11),n.Q6J("config",p.findEntidad),n.xp6(2),n.Q6J("data",p.galpones))},dependencies:[x.t,C.J,D],encapsulation:2})}return c})()},{path:"**",redirectTo:""}]}];let U=(()=>{class c{static#t=this.\u0275fac=function(r){return new(r||c)};static#n=this.\u0275mod=n.oAB({type:c});static#e=this.\u0275inj=n.cJS({imports:[f.Bz.forChild(F),f.Bz]})}return c})();var o=i(8368),_=i(4553),e=i(2454),a=i(4858);let u=(()=>{class c{static#t=this.\u0275fac=function(r){return new(r||c)};static#n=this.\u0275mod=n.oAB({type:c});static#e=this.\u0275inj=n.cJS({imports:[t.ez,U,o.U,_.W,e.q,a.V,w.K]})}return c})()},7635:(y,h,i)=>{i.d(h,{v:()=>n});var t=i(4946),f=i(6814);let n=(()=>{class m{constructor(l){this.datePipe=l}transform(l,...s){return this.datePipe.transform(l,"MM/yyyy")}static#t=this.\u0275fac=function(s){return new(s||m)(t.Y36(f.uU,16))};static#n=this.\u0275pipe=t.Yjl({name:"periodmonthFormat",type:m,pure:!0})}return m})()},9920:(y,h,i)=>{i.d(h,{I:()=>f,K:()=>n});var t=i(4946);let f=(()=>{class m{constructor(){this._printStyle=[],this.previewOnly=!1,this.useExistingCss=!1,this.printDelay=0,this._styleSheetFile=""}set printStyle(l){for(let s in l)l.hasOwnProperty(s)&&this._printStyle.push((s+JSON.stringify(l[s])).replace(/['"]+/g,""));this.returnStyleValues()}returnStyleValues(){return`<style> ${this._printStyle.join(" ").replace(/,/g,";")} </style>`}set styleSheetFile(l){let s=function(g){return`<link rel="stylesheet" type="text/css" href="${g}">`};if(-1!==l.indexOf(",")){const g=l.split(",");for(let x of g)this._styleSheetFile=this._styleSheetFile+s(x)}else this._styleSheetFile=s(l)}returnStyleSheetLinkTags(){return this._styleSheetFile}getElementTag(l){const s=[],g=document.getElementsByTagName(l);for(let x=0;x<g.length;x++)s.push(g[x].outerHTML);return s.join("\r\n")}getFormData(l){for(var s=0;s<l.length;s++)l[s].defaultValue=l[s].value,l[s].checked&&(l[s].defaultChecked=!0)}getHtmlContents(){let l=document.getElementById(this.printSectionId),s=l.getElementsByTagName("input");this.getFormData(s);let g=l.getElementsByTagName("textarea");return this.getFormData(g),l.innerHTML}print(){let l,s,g="",x="";const C=this.getElementTag("base");this.useExistingCss&&(g=this.getElementTag("style"),x=this.getElementTag("link")),l=this.getHtmlContents(),s=window.open("","_blank","top=0,left=0,height=auto,width=auto"),s.document.open(),s.document.write(`\n      <html>\n        <head>\n          <title>${this.printTitle?this.printTitle:""}</title>\n          ${C}\n          ${this.returnStyleValues()}\n          ${this.returnStyleSheetLinkTags()}\n          ${g}\n          ${x}\n        </head>\n        <body>\n          ${l}\n          <script defer>\n            function triggerPrint(event) {\n              window.removeEventListener('load', triggerPrint, false);\n              ${this.previewOnly?"":`setTimeout(function() {\n                closeWindow(window.print());\n              }, ${this.printDelay});`}\n            }\n            function closeWindow(){\n                window.close();\n            }\n            window.addEventListener('load', triggerPrint, false);\n          <\/script>\n        </body>\n      </html>`),s.document.close()}}return m.\u0275fac=function(l){return new(l||m)},m.\u0275dir=t.lG2({type:m,selectors:[["button","ngxPrint",""]],hostBindings:function(l,s){1&l&&t.NdJ("click",function(){return s.print()})},inputs:{previewOnly:"previewOnly",printSectionId:"printSectionId",printTitle:"printTitle",useExistingCss:"useExistingCss",printDelay:"printDelay",printStyle:"printStyle",styleSheetFile:"styleSheetFile"}}),m})(),n=(()=>{class m{}return m.\u0275fac=function(l){return new(l||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({}),m})()}}]);