"use strict";(self.webpackChunktukiweb=self.webpackChunktukiweb||[]).push([[508],{8555:(_,f,i)=>{i.d(f,{r:()=>e});var u=i(5289),g=i(698);class e{constructor(){this.id=0,this.entidad=new u.$,this.tipo="",this.nombre="",this.descripcion="",this.estado="ACTIVO",this.saldo=0,this.establecimiento=new g.A}}},5289:(_,f,i)=>{i.d(f,{$:()=>u});class u{constructor(){this.id=0,this.nombre="",this.direccion="",this.telefono=""}}},3297:(_,f,i)=>{i.d(f,{y:()=>u});class u{constructor(){this.id=0,this.sid=0,this.str="",this.sstr="",this.dec=0,this.sdec=0,this.date=new Date,this.sdate=new Date,this.ordersby=[],this.limit=0,this.offset=0}}},7263:(_,f,i)=>{i.r(f),i.d(f,{SalidapolloModule:()=>Y});var u=i(6814),g=i(7664),e=i(4946);let c=(()=>{class l{static#e=this.\u0275fac=function(o){return new(o||l)};static#t=this.\u0275cmp=e.Xpm({type:l,selectors:[["app-salidapollo-main"]],decls:1,vars:0,template:function(o,a){1&o&&e._UZ(0,"router-outlet")},dependencies:[g.lC],encapsulation:2})}return l})();var v=i(5289),n=i(3297),d=i(7757),p=i(1106),h=i(9324),T=i(7492),C=i(7773),w=i(3259),b=i(548);class y{constructor(){this.id=0,this.galpon=new C.e,this.cantidad=0}}var E=i(7841),S=i(7213);const N=["spdetalle"];function M(l,W){if(1&l&&(e.TgZ(0,"span",2)(1,"label",9),e._uU(2,"Cuenta:"),e.qZA(),e.TgZ(3,"span",10),e._uU(4),e.qZA()()),2&l){const t=e.oxw();e.xp6(4),e.lnq("",t.salidapollo.cuenta.entidad.id," - ",t.salidapollo.cuenta.entidad.nombre," ",t.salidapollo.cuenta.entidad.direccion,"")}}const A=function(){return{width:"50vw"}},F=function(){return{"960px":"75vw"}};let D=(()=>{class l{constructor(t,o){this.datasevice=t,this.confirmService=o,this.formEvent=new e.vpe,this.display=!1,this.salidapollo=new b.x,this.searchClient={path:"/plgalpon/salidapollo/ctasbyentidad",columns:["id","nombre"]},this.spdata={content:[],columns:[{editable:!1,field:"id",columnName:"ID"},{editable:!0,field:"galpon.cuenta.nombre",columnName:"Cta Origen",input:{type:"autocomplete",path:"/plgalpon/salidapollo/findctas",columns:["id","nombre","entidad.id","entidad.nombre"]}},{editable:!0,field:"cantidad",columnName:"Cant. Pollos",input:{type:"numeric",precision:"15",scale:"0"}}]}}openwithgalpon(t){this.salidapollo=new b.x;var o=new y;o.galpon=t,this.salidapollo.detalle.push(o),this.spdetalle.updateData(this.salidapollo.detalle),this.display=!0}update(t){this.datasevice.getdata("/plgalpon/salidapollo/sp",{id:t.id}).subscribe(o=>{this.salidapollo=o,this.spdetalle.updateData(this.salidapollo.detalle),this.spdetalle.addRow(new y,"id"),this.display=!0})}opennew(){this.salidapollo=new b.x,this.spdetalle.updateData(this.salidapollo.detalle),this.spdetalle.addRow(new y,"id"),this.display=!0}clienteSelected(t){this.salidapollo.cuenta=t}close(){this.formEvent.emit()}spdetalleEnterValue(t){"galpon.cuenta.nombre"===t.field?(mosetfieldvalue(this.salidapollo.detalle[t.row],"galpon.cuenta.id",t.value.id),mosetfieldvalue(this.salidapollo.detalle[t.row],"galpon.cuenta.nombre",t.value.nombre)):mosetfieldvalue(this.salidapollo.detalle[t.row],t.field,t.value);let o=this.salidapollo.detalle[t.row];if(0!==this.salidapollo.cuenta.id&&0!==o.galpon.cuenta.id&&0!==o.cantidad){let a=new b.x;a.id=this.salidapollo.id,a.cuenta=this.salidapollo.cuenta,a.detalle.push(new y),a.detalle[0].id=o.id,a.detalle[0].cantidad=o.cantidad,a.detalle[0].galpon.cuenta.id=o.galpon.cuenta.id,this.datasevice.postdata("/plgalpon/salidapollo/save",a).subscribe(s=>{this.salidapollo.id=s.id,this.salidapollo.cuenta=s.cuenta,this.salidapollo.fechareg=s.fechareg,this.salidapollo.fechatra=s.fechatra,this.salidapollo.detalle[t.row]=s.detalle[0],this.spdetalle.addRow(new y,"id")})}}static#e=this.\u0275fac=function(o){return new(o||l)(e.Y36(d.D),e.Y36(p.I))};static#t=this.\u0275cmp=e.Xpm({type:l,selectors:[["salidapollo-form"]],viewQuery:function(o,a){if(1&o&&e.Gf(N,7),2&o){let s;e.iGM(s=e.CRH())&&(a.spdetalle=s.first)}},outputs:{formEvent:"formEvent"},decls:11,vars:13,consts:[["header","Formulario Salida de pollo",3,"visible","modal","breakpoints","draggable","resizable","visibleChange","onHide"],[1,"p-fluid","grid"],[1,"p-field","col-12","md:col-12","form-group"],["id","producto","appendTo","body",3,"config","itemSelected"],[3,"hidden"],["class","p-field col-12 md:col-12 form-group",4,"ngIf"],["id","prnmort",1,"mo-panel-content"],[3,"data","cellEnterValueEvent"],["spdetalle",""],["for","entidaddata"],[1,"input-control-info"]],template:function(o,a){1&o&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(r){return a.display=r})("onHide",function(){return a.close()}),e.TgZ(1,"div",1)(2,"div",2)(3,"label"),e._uU(4,"Buscar cliente por entidad:"),e.qZA(),e.TgZ(5,"mo-autocomplete",3),e.NdJ("itemSelected",function(r){return a.clienteSelected(r)}),e.qZA()(),e.TgZ(6,"div",4),e.YNc(7,M,5,3,"span",5),e.TgZ(8,"div",6)(9,"mo-dataeditor",7,8),e.NdJ("cellEnterValueEvent",function(r){return a.spdetalleEnterValue(r)}),e.qZA()()()()()),2&o&&(e.Akn(e.DdM(11,A)),e.Q6J("visible",a.display)("modal",!0)("breakpoints",e.DdM(12,F))("draggable",!1)("resizable",!0),e.xp6(5),e.Q6J("config",a.searchClient),e.xp6(1),e.Q6J("hidden",0===a.salidapollo.cuenta.id),e.xp6(1),e.Q6J("ngIf",0!==a.salidapollo.cuenta.id),e.xp6(2),e.Q6J("data",a.spdata))},dependencies:[u.O5,T.J,E.q,S.V],encapsulation:2})}return l})();var m=i(95),J=i(707),B=i(3714),Z=i(1532);const U=function(){return{width:"50vw"}},P=function(){return{"500px":"75vw"}};let I=(()=>{class l{constructor(t,o){this.dataservice=t,this.formBuilder=o,this.formEvent=new e.vpe,this.display=!1,this.salidapollo=new b.x,this.form=this.formBuilder.group({fechatra:[new Date,m.kI.required],nroboleta:["",m.kI.required],pesoneto:[0,m.kI.min(.001)],vehiculo:["",m.kI.required],obs:[""]})}update(t){this.dataservice.getdata("/plgalpon/salidapollo/sp",{id:t.id}).subscribe(o=>{this.salidapollo=o,this.form.reset(),this.form.controls.fechatra.setValue(new Date(this.salidapollo.fechatra)),this.form.controls.nroboleta.setValue(this.salidapollo.nroboleta),this.form.controls.pesoneto.setValue(this.salidapollo.pesoneto),this.form.controls.vehiculo.setValue(this.salidapollo.vehiculo),this.form.controls.obs.setValue(this.salidapollo.obs),this.display=!0})}submit(){let t=this.form.getRawValue();this.salidapollo.fechatra=t.fechatra,this.salidapollo.nroboleta=t.nroboleta,this.salidapollo.pesoneto=t.pesoneto,this.salidapollo.vehiculo=t.vehiculo,this.salidapollo.obs=t.obs,this.dataservice.postdata("/plgalpon/salidapollo/savebalanza",this.salidapollo).subscribe(o=>{this.display=!1,this.formEvent.emit({})})}static#e=this.\u0275fac=function(o){return new(o||l)(e.Y36(d.D),e.Y36(m.QS))};static#t=this.\u0275cmp=e.Xpm({type:l,selectors:[["balanza-form"]],outputs:{formEvent:"formEvent"},decls:35,vars:15,consts:[["header","Registro Boleta Balanza",3,"visible","modal","breakpoints","draggable","resizable","visibleChange"],[3,"formGroup","submit"],[1,"p-fluid","grid"],[1,"p-field","col-12","md:col-12","form-group"],["for","entidaddata"],[1,"input-control-info"],[1,"p-field","col-12","md:col-3","form-group"],["for","fnroboleta"],["type","text","id","fnroboleta","pInputText","","formControlName","nroboleta",1,"input-control"],[1,"p-field","col-12","md:col-9","form-group"],["for","fechatra"],["appendTo","body","formControlName","fechatra","dateFormat","dd MM yy","inputId","fechatra",1,"input-control"],["for","fpesoneto"],["type","text","id","fpesoneto","pInputText","","formControlName","pesoneto",1,"input-control"],["for","fvehiculo"],["type","text","id","fvehiculo","pInputText","","formControlName","vehiculo",1,"input-control"],["for","fobs"],["type","text","id","fobs","pInputText","","formControlName","obs",1,"input-control"],["type","submit","label","Guardar","styleClass","p-button-text",3,"disabled"],["type","button","label","Salir","styleClass","p-button-text",3,"click"]],template:function(o,a){1&o&&(e.TgZ(0,"p-dialog",0),e.NdJ("visibleChange",function(r){return a.display=r}),e.TgZ(1,"form",1),e.NdJ("submit",function(){return a.submit()}),e.TgZ(2,"div",2)(3,"span",3)(4,"label",4),e._uU(5,"Cliente:"),e.qZA(),e.TgZ(6,"span",5),e._uU(7),e.qZA()(),e.TgZ(8,"span",3)(9,"label"),e._uU(10,"Cantidad pollos:"),e.qZA(),e.TgZ(11,"span",5),e._uU(12),e.qZA()(),e.TgZ(13,"div",6)(14,"label",7),e._uU(15,"Nro Boleta:"),e.qZA(),e._UZ(16,"input",8),e.qZA(),e.TgZ(17,"div",9)(18,"label",10),e._uU(19,"Fecha salida:"),e.qZA(),e._UZ(20,"p-calendar",11),e.qZA(),e.TgZ(21,"div",6)(22,"label",12),e._uU(23,"Peso neto:"),e.qZA(),e._UZ(24,"input",13),e.qZA(),e.TgZ(25,"div",9)(26,"label",14),e._uU(27,"Vehiculo:"),e.qZA(),e._UZ(28,"input",15),e.qZA(),e.TgZ(29,"div",3)(30,"label",16),e._uU(31,"Observacion:"),e.qZA(),e._UZ(32,"input",17),e.qZA()(),e._UZ(33,"p-button",18),e.TgZ(34,"p-button",19),e.NdJ("click",function(){return a.display=!1}),e.qZA()()()),2&o&&(e.Akn(e.DdM(13,U)),e.Q6J("visible",a.display)("modal",!0)("breakpoints",e.DdM(14,P))("draggable",!0)("resizable",!0),e.xp6(1),e.Q6J("formGroup",a.form),e.xp6(6),e.lnq("",a.salidapollo.cuenta.entidad.id," - ",a.salidapollo.cuenta.entidad.nombre," ",a.salidapollo.cuenta.entidad.direccion,""),e.xp6(5),e.Oqu(a.salidapollo.total),e.xp6(21),e.Q6J("disabled",a.form.invalid||0===a.salidapollo.cuenta.id))},dependencies:[J.zx,B.o,m._Y,m.Fj,m.JJ,m.JL,S.V,m.sg,m.u,Z.f],encapsulation:2})}return l})();const z=["spform"],x=["balform"];let k=(()=>{class l{constructor(t,o){this.dataService=t,this.confirmService=o,this.spManageEvent=new e.vpe,this.display=!1,this.galpon=new C.e,this.report={content:[],columns:[{field:"salidapollo.id",columnName:"Id"},{field:"salidapollo.fechatra",columnName:"Fecha",type:"date"},{field:"salidapollo.cuenta.nombre",columnName:"Destino"},{field:"salidapollo.cantidad",columnName:"T. Pollos"},{field:"salidapollo.pesoneto",columnName:"Peso"},{field:"salidapollo.promedio",columnName:"Promedio"},{field:"salidapollo.cuenta.nombre",columnName:"Destino"},{field:"detalle.galpon.cuenta.nombre",columnName:"Origen"},{field:"detalle.cantidad",columnName:"Cant"},{actions:[{iconname:"edit",iconclass:"material-symbols-outlined",event:"modify",condition:a=>null!==a.salidapollo.id&&0===a.salidapollo.liquidacion_id},{iconname:"weight",iconclass:"material-symbols-outlined",event:"balanza",condition:a=>null!==a.salidapollo.id&&0===a.salidapollo.liquidacion_id},{iconname:"delete_forever",iconclass:"material-symbols-outlined",event:"delete",condition:a=>null!==a.salidapollo.id&&0===a.salidapollo.liquidacion_id}]}]}}open(t){this.galpon=t,this.display=!0,this.getdata()}new(){this.spform.openwithgalpon(this.galpon)}salir(){this.display=!1,this.spManageEvent.emit("")}spFormEvent(t){this.getdata()}balFormEvent(t){this.getdata()}eventReport(t){switch(t.event){case"modify":this.spform.update(t.row.salidapollo);break;case"balanza":this.balanzaform.update(t.row.salidapollo);break;case"delete":this.confirmService.setconfirm({message:"Anular gastos '"+t.row.salidapollo.id+"'?",accept:()=>{this.dataService.postdata("/plgalpon/admin/spdelete",t.row.salidapollo).subscribe(a=>{this.getdata()})}})}}getdata(){var t=new n.y;t.id=this.galpon.cuenta.id,this.dataService.postdata("/plgalpon/salidapollo/salidasbygalpon",t).subscribe(o=>{this.report.content=o})}static#e=this.\u0275fac=function(o){return new(o||l)(e.Y36(d.D),e.Y36(p.I))};static#t=this.\u0275cmp=e.Xpm({type:l,selectors:[["salidapollo-manage"]],viewQuery:function(o,a){if(1&o&&(e.Gf(z,7),e.Gf(x,7)),2&o){let s;e.iGM(s=e.CRH())&&(a.spform=s.first),e.iGM(s=e.CRH())&&(a.balanzaform=s.first)}},outputs:{spManageEvent:"spManageEvent"},decls:21,vars:2,consts:[[1,"mo-layout-content",3,"hidden"],[1,"grid"],[1,"col-12"],[1,"card"],[1,"mo-toolsbar"],[1,"mo-first"],[1,"mo-second","form-group"],["pTooltip","Nueva Salida de pollo",1,"mo-button",3,"click"],[1,"material-icons-outlined","mo-icons-center"],["pTooltip","Atr\xe1s",1,"mo-button",3,"click"],[1,"mo-panel-content"],[3,"data","action"],[3,"formEvent"],["spform",""],["balform",""]],template:function(o,a){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2"),e._uU(7,"Lista de salidas de pollos:"),e.qZA()(),e.TgZ(8,"div",6)(9,"button",7),e.NdJ("click",function(){return a.new()}),e.TgZ(10,"i",8),e._uU(11,"add"),e.qZA()(),e.TgZ(12,"button",9),e.NdJ("click",function(){return a.salir()}),e.TgZ(13,"i",8),e._uU(14,"arrow_back"),e.qZA()()()(),e.TgZ(15,"div",10)(16,"mo-report",11),e.NdJ("action",function(r){return a.eventReport(r)}),e.qZA()()()()()(),e.TgZ(17,"salidapollo-form",12,13),e.NdJ("formEvent",function(r){return a.spFormEvent(r)}),e.qZA(),e.TgZ(19,"balanza-form",12,14),e.NdJ("formEvent",function(r){return a.balFormEvent(r)}),e.qZA()),2&o&&(e.Q6J("hidden",!a.display),e.xp6(16),e.Q6J("data",a.report))},dependencies:[w.u,h.t,D,I],encapsulation:2})}return l})();const G=["spmanage"],Q=[{path:"",component:c,children:[{path:"",component:(()=>{class l{constructor(t,o){this.dataService=t,this.confirmService=o,this.path="/plgalpon/salidapollo",this.display=!0,this.entidad=new v.$,this.findEntidad={path:"/all/entidad/byname",columns:["id","nombre"]},this.galpones={content:[],columns:[{field:"cuenta.id",columnName:"Nro Cta"},{field:"cuenta.estado",columnName:"Estado"},{field:"cuenta.nombre",columnName:"Nombre"},{field:"cantidad",columnName:"Nro Pollos",align:"right"},{field:"saldo",columnName:"Saldo Pollos",align:"right"},{field:"cuenta.descripcion",columnName:"Descrip."},{actions:[{iconclass:"pi pi-chevron-circle-right",event:"register",condition:a=>!0}]}]}}entidadSelected(t){this.entidad=t,this.getdata()}reportAction(t){"register"===t.event&&(this.display=!1,this.spmanage.open(t.row))}spManageEvent(t){this.getdata(),this.display=!0}getdata(){var t=new n.y;t.id=this.entidad.id,t.ordersby=["cu.id desc"],this.dataService.postdata(this.path+"/galpones",t).subscribe(o=>{this.galpones.content=o})}static#e=this.\u0275fac=function(o){return new(o||l)(e.Y36(d.D),e.Y36(p.I))};static#t=this.\u0275cmp=e.Xpm({type:l,selectors:[["app-galpon-buscar"]],viewQuery:function(o,a){if(1&o&&e.Gf(G,7),2&o){let s;e.iGM(s=e.CRH())&&(a.spmanage=s.first)}},decls:16,vars:3,consts:[[1,"mo-layout-content",3,"hidden"],[1,"grid"],[1,"col-12"],[1,"card"],[1,"mo-toolsbar"],[1,"mo-first"],[1,"mo-second","form-group"],["for","entidad"],["id","producto",3,"config","itemSelected"],[1,"mo-panel-content"],[3,"data","action"],[3,"spManageEvent"],["spmanage",""]],template:function(o,a){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2"),e._uU(7,"Salida de Pollos: Galpones por entidad:"),e.qZA()(),e.TgZ(8,"div",6)(9,"label",7),e._uU(10,"Busqueda por Entidad:"),e.qZA(),e.TgZ(11,"mo-autocomplete",8),e.NdJ("itemSelected",function(r){return a.entidadSelected(r)}),e.qZA()()(),e.TgZ(12,"div",9)(13,"mo-report",10),e.NdJ("action",function(r){return a.reportAction(r)}),e.qZA()()()()()(),e.TgZ(14,"salidapollo-manage",11,12),e.NdJ("spManageEvent",function(r){return a.spManageEvent(r)}),e.qZA()),2&o&&(e.Q6J("hidden",!a.display),e.xp6(11),e.Q6J("config",a.findEntidad),e.xp6(2),e.Q6J("data",a.galpones))},dependencies:[h.t,T.J,k],encapsulation:2})}return l})()},{path:"**",redirectTo:""}]}];let V=(()=>{class l{static#e=this.\u0275fac=function(o){return new(o||l)};static#t=this.\u0275mod=e.oAB({type:l});static#o=this.\u0275inj=e.cJS({imports:[g.Bz.forChild(Q),g.Bz]})}return l})();var O=i(8368),q=i(4553),R=i(2454),H=i(4858),$=i(9920);let Y=(()=>{class l{static#e=this.\u0275fac=function(o){return new(o||l)};static#t=this.\u0275mod=e.oAB({type:l});static#o=this.\u0275inj=e.cJS({imports:[u.ez,V,O.U,q.W,R.q,H.V,$.K,S.S,m.UX,Z._8]})}return l})()},9920:(_,f,i)=>{i.d(f,{I:()=>g,K:()=>e});var u=i(4946);let g=(()=>{class c{constructor(){this._printStyle=[],this.previewOnly=!1,this.useExistingCss=!1,this.printDelay=0,this._styleSheetFile=""}set printStyle(n){for(let d in n)n.hasOwnProperty(d)&&this._printStyle.push((d+JSON.stringify(n[d])).replace(/['"]+/g,""));this.returnStyleValues()}returnStyleValues(){return`<style> ${this._printStyle.join(" ").replace(/,/g,";")} </style>`}set styleSheetFile(n){let d=function(p){return`<link rel="stylesheet" type="text/css" href="${p}">`};if(-1!==n.indexOf(",")){const p=n.split(",");for(let h of p)this._styleSheetFile=this._styleSheetFile+d(h)}else this._styleSheetFile=d(n)}returnStyleSheetLinkTags(){return this._styleSheetFile}getElementTag(n){const d=[],p=document.getElementsByTagName(n);for(let h=0;h<p.length;h++)d.push(p[h].outerHTML);return d.join("\r\n")}getFormData(n){for(var d=0;d<n.length;d++)n[d].defaultValue=n[d].value,n[d].checked&&(n[d].defaultChecked=!0)}getHtmlContents(){let n=document.getElementById(this.printSectionId),d=n.getElementsByTagName("input");this.getFormData(d);let p=n.getElementsByTagName("textarea");return this.getFormData(p),n.innerHTML}print(){let n,d,p="",h="";const T=this.getElementTag("base");this.useExistingCss&&(p=this.getElementTag("style"),h=this.getElementTag("link")),n=this.getHtmlContents(),d=window.open("","_blank","top=0,left=0,height=auto,width=auto"),d.document.open(),d.document.write(`\n      <html>\n        <head>\n          <title>${this.printTitle?this.printTitle:""}</title>\n          ${T}\n          ${this.returnStyleValues()}\n          ${this.returnStyleSheetLinkTags()}\n          ${p}\n          ${h}\n        </head>\n        <body>\n          ${n}\n          <script defer>\n            function triggerPrint(event) {\n              window.removeEventListener('load', triggerPrint, false);\n              ${this.previewOnly?"":`setTimeout(function() {\n                closeWindow(window.print());\n              }, ${this.printDelay});`}\n            }\n            function closeWindow(){\n                window.close();\n            }\n            window.addEventListener('load', triggerPrint, false);\n          <\/script>\n        </body>\n      </html>`),d.document.close()}}return c.\u0275fac=function(n){return new(n||c)},c.\u0275dir=u.lG2({type:c,selectors:[["button","ngxPrint",""]],hostBindings:function(n,d){1&n&&u.NdJ("click",function(){return d.print()})},inputs:{previewOnly:"previewOnly",printSectionId:"printSectionId",printTitle:"printTitle",useExistingCss:"useExistingCss",printDelay:"printDelay",printStyle:"printStyle",styleSheetFile:"styleSheetFile"}}),c})(),e=(()=>{class c{}return c.\u0275fac=function(n){return new(n||c)},c.\u0275mod=u.oAB({type:c}),c.\u0275inj=u.cJS({}),c})()}}]);