"use strict";(self.webpackChunktukiweb=self.webpackChunktukiweb||[]).push([[581],{9709:(C,_,r)=>{r.d(_,{U:()=>m});var t=r(8196);class m{constructor(){this.id=0,this.nombre="",this.comentario="",this.tipo=new t.o,this.estado="ACTIVO",this.facprn="1",this.orden=1}}},8196:(C,_,r)=>{r.d(_,{o:()=>t});class t{constructor(){this.id=0,this.nombre=""}}},9324:(C,_,r)=>{r.d(_,{t:()=>U});var t=r(4946),m=r(6814),o=r(4621),f=r(2415),g=r(7635);function h(i,p){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){const n=t.oxw();t.xp6(1),t.Oqu(n.data.caption)}}function v(i,p){if(1&i&&(t.TgZ(0,"th",5),t._uU(1),t.qZA()),2&i){const n=t.oxw(),c=n.index,l=n.$implicit,s=t.oxw();t.Udp("text-align",s.data.columns[c].align),t.xp6(1),t.hij("",l.columnName," ")}}function x(i,p){1&i&&t._UZ(0,"th",5)}function P(i,p){if(1&i&&(t.ynx(0),t.YNc(1,v,2,3,"th",3),t.YNc(2,x,1,0,"th",4),t.BQk()),2&i){const n=p.$implicit;t.xp6(1),t.Q6J("ngIf",n.field),t.xp6(1),t.Q6J("ngIf",!n.field)}}function E(i,p){if(1&i&&(t.ynx(0),t.TgZ(1,"td",5),t._uU(2),t.qZA(),t.BQk()),2&i){const n=p.$implicit,c=t.oxw(2);t.xp6(1),t.Udp("text-align",n.align),t.uIk("colspan",n.colspan),t.xp6(1),t.hij("",c.data.foot.content[n.index]," ")}}function T(i,p){if(1&i&&(t.TgZ(0,"tfoot")(1,"tr"),t.YNc(2,E,3,4,"ng-container",2),t.qZA()()),2&i){const n=t.oxw();t.xp6(2),t.Q6J("ngForOf",n.data.foot.cols)}}function w(i,p){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&i){const n=t.oxw().index,c=t.oxw().index,l=t.oxw();t.Udp("text-align",l.data.columns[n].align),t.xp6(1),t.Oqu(l.getfieldvalue(c,n))}}function O(i,p){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"dateFormat"),t.qZA()),2&i){const n=t.oxw().index,c=t.oxw().index,l=t.oxw();t.Udp("text-align",l.data.columns[n].align),t.xp6(1),t.Oqu(t.lcZ(2,3,l.getfieldvalue(c,n)))}}function y(i,p){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"datetimeFormat"),t.qZA()),2&i){const n=t.oxw().index,c=t.oxw().index,l=t.oxw();t.Udp("text-align",l.data.columns[n].align),t.xp6(1),t.Oqu(t.lcZ(2,3,l.getfieldvalue(c,n)))}}function Z(i,p){if(1&i&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"periodmonthFormat"),t.qZA()),2&i){const n=t.oxw().index,c=t.oxw().index,l=t.oxw();t.Udp("text-align",l.data.columns[n].align),t.xp6(1),t.Oqu(t.lcZ(2,3,l.getfieldvalue(c,n)))}}function A(i,p){if(1&i){const n=t.EpF();t.TgZ(0,"a",12),t.NdJ("click",function(l){t.CHM(n);const s=t.oxw().$implicit,Q=t.oxw(3).$implicit,e=t.oxw();return t.KtG(e.actionEvent(l,Q,s.event))}),t.TgZ(1,"i"),t._uU(2),t.qZA()()}if(2&i){const n=t.oxw().$implicit;t.xp6(1),t.Tol(n.iconclass),t.xp6(1),t.Oqu(n.iconname)}}function b(i,p){if(1&i&&(t.ynx(0),t.YNc(1,A,3,4,"a",11),t.BQk()),2&i){const n=p.$implicit,c=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",n.condition(c))}}function I(i,p){if(1&i&&(t.TgZ(0,"td",9)(1,"div",10),t.YNc(2,b,2,1,"ng-container",2),t.qZA()()),2&i){const n=t.oxw().index,c=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",c.data.columns[n].actions)}}function R(i,p){if(1&i&&(t.ynx(0),t.YNc(1,w,2,3,"td",7),t.YNc(2,O,3,5,"td",7),t.YNc(3,y,3,5,"td",7),t.YNc(4,Z,3,5,"td",7),t.YNc(5,I,3,1,"td",8),t.BQk()),2&i){const n=p.index,c=t.oxw(2);t.xp6(1),t.Q6J("ngIf",c.data.columns[n].field&&void 0===c.data.columns[n].type),t.xp6(1),t.Q6J("ngIf",c.data.columns[n].field&&"date"===c.data.columns[n].type),t.xp6(1),t.Q6J("ngIf",c.data.columns[n].field&&"datetime"===c.data.columns[n].type),t.xp6(1),t.Q6J("ngIf",c.data.columns[n].field&&"periodmonth"===c.data.columns[n].type),t.xp6(1),t.Q6J("ngIf",!c.data.columns[n].field)}}function N(i,p){if(1&i&&(t.ynx(0),t.TgZ(1,"tr",6),t.YNc(2,R,6,5,"ng-container",2),t.qZA(),t.BQk()),2&i){const n=p.$implicit,c=t.oxw();t.xp6(1),t.Q6J("ngClass",void 0!==c.data.rowclass?c.data.rowclass(n,c.data.val):c.data.rows.condition(n)?c.data.rows.class:""),t.xp6(1),t.Q6J("ngForOf",c.data.columns)}}let U=(()=>{class i{constructor(){this.fielddefault={align:"left"},this.rows={class:"",condition:n=>!1},this.action=new t.vpe}ngOnInit(){for(let n of this.data.columns)void 0!==n.field&&mosetdefaults(this.fielddefault,n);void 0===this.data.rows&&(this.data.rows=this.rows)}getfieldvalue(n,c){return mogetfieldvalue(this.data.content[n],this.data.columns[c].field)}actionEvent(n,c,l){n.preventDefault(),this.action.emit({event:l,row:c})}static#t=this.\u0275fac=function(c){return new(c||i)};static#o=this.\u0275cmp=t.Xpm({type:i,selectors:[["mo-report"]],inputs:{data:"data"},outputs:{action:"action"},decls:9,vars:4,consts:[[1,"customers"],[4,"ngIf"],[4,"ngFor","ngForOf"],["scope","col",3,"text-align",4,"ngIf"],["scope","col",4,"ngIf"],["scope","col"],[3,"ngClass"],[3,"text-align",4,"ngIf"],["style","padding: 0;",4,"ngIf"],[2,"padding","0"],[1,"mo-reportactions"],["href","#",3,"click",4,"ngIf"],["href","#",3,"click"]],template:function(c,l){1&c&&(t.TgZ(0,"table",0)(1,"caption"),t.YNc(2,h,2,1,"ng-container",1),t.qZA(),t.TgZ(3,"thead")(4,"tr"),t.YNc(5,P,3,2,"ng-container",2),t.qZA()(),t.YNc(6,T,3,1,"tfoot",1),t.TgZ(7,"tbody"),t.YNc(8,N,3,2,"ng-container",2),t.qZA()()),2&c&&(t.xp6(2),t.Q6J("ngIf",l.data.caption),t.xp6(3),t.Q6J("ngForOf",l.data.columns),t.xp6(1),t.Q6J("ngIf",l.data.foot),t.xp6(2),t.Q6J("ngForOf",l.data.content))},dependencies:[m.mk,m.sg,m.O5,o.L,f.E,g.v],styles:[".customers[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}.customers[_ngcontent-%COMP%]   caption[_ngcontent-%COMP%]{font-size:1.4em;color:#3e3e3e;font-weight:700}.customers[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:4px}.customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #f2f2f2}.customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}.customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px;text-align:center;background-color:#464646;color:#fff}.customers[_ngcontent-%COMP%]   tfoot[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{padding-top:2px;padding-bottom:2px;color:#383838;font-weight:700}"]})}return i})()},4553:(C,_,r)=>{r.d(_,{W:()=>f});var t=r(6814),m=r(9177),o=r(4946);let f=(()=>{class g{static#t=this.\u0275fac=function(x){return new(x||g)};static#o=this.\u0275mod=o.oAB({type:g});static#n=this.\u0275inj=o.cJS({imports:[t.ez,m.A]})}return g})()},1581:(C,_,r)=>{r.r(_),r.d(_,{ProductocostoModule:()=>l});var t=r(6814),m=r(7664),o=r(4946),f=r(2655);let g=(()=>{class s{constructor(){}ngOnInit(){this.items=[{label:"Ventas"},{label:"Costos de Productos"}],this.home={icon:"pi pi-home",routerLink:"/"}}static#t=this.\u0275fac=function(a){return new(a||s)};static#o=this.\u0275cmp=o.Xpm({type:s,selectors:[["app-productocosto-main"]],decls:2,vars:2,consts:[[3,"model","home"]],template:function(a,d){1&a&&o._UZ(0,"p-breadcrumb",0)(1,"router-outlet"),2&a&&o.Q6J("model",d.items)("home",d.home)},dependencies:[m.lC,f.a],encapsulation:2})}return s})();var h=r(8196),v=r(7757),x=r(1106),P=r(2105),E=r(9324),T=r(9709);class w{constructor(){this.id=0,this.nombre="",this.tipo="",this.valor=0,this.producto=new T.U}}var O=r(3259),y=r(707),Z=r(7841);const A=["dataeditor"];let b=(()=>{class s{constructor(e,a){this.dataService=e,this.confirmService=a,this.formEvent=new o.vpe,this.display=!1,this.producto=new T.U,this.dataed={content:[],columns:[{editable:!1,field:"id",columnName:"ID"},{editable:!0,field:"nombre",columnName:"Nombre",input:{type:"text"}},{editable:!0,field:"tipo",columnName:"Tipo",input:{type:"autocomplete",path:"/ventas/costos/costotipos",columns:["id","nombre"]}},{editable:!0,field:"valor",columnName:"Valor",input:{type:"numeric",precision:"15",scale:"5"}},{actions:[{iconclass:"pi pi-trash",event:"delete",condition:d=>0!==d.id}]}]}}ngOnInit(){}open(e){this.producto=e,this.dataService.getdata("/ventas/costos",{id:this.producto.id}).subscribe(a=>{this.dataed.content=a,this.tableeditor.updateData(this.dataed.content),this.tableeditor.addRow(new w,"id")}),this.display=!0}salir(){this.display=!1,this.formEvent.emit()}enterValue(e){"tipo"===e.field?mosetfieldvalue(this.dataed.content[e.row],e.field,e.value.nombre):mosetfieldvalue(this.dataed.content[e.row],e.field,e.value);let a=this.dataed.content[e.row];0===this.producto.id||""===a.nombre||""===a.tipo||0===a.valor||(a.producto.id=this.producto.id,this.dataService.postdata("/ventas/costos",a).subscribe(d=>{this.dataed.content[e.row]=d,this.tableeditor.addRow(new w,"id")}))}rowActionEvent(e){"delete"===e.event&&this.confirmService.setconfirm({message:"Eliminar costo '"+e.row.id+"' ?",accept:()=>{this.dataService.postdata("/ventas/costos/delete",e.row).subscribe(d=>{this.tableeditor.deleteRow("id",e.row.id)})}})}static#t=this.\u0275fac=function(a){return new(a||s)(o.Y36(v.D),o.Y36(x.I))};static#o=this.\u0275cmp=o.Xpm({type:s,selectors:[["productocosto-form"]],viewQuery:function(a,d){if(1&a&&o.Gf(A,5),2&a){let u;o.iGM(u=o.CRH())&&(d.tableeditor=u.first)}},outputs:{formEvent:"formEvent"},decls:20,vars:5,consts:[[1,"mo-layout-content",3,"hidden"],[1,"grid"],[1,"col-12"],[1,"card"],[1,"mo-toolsbar"],[1,"mo-first"],[1,"mo-second"],["pButton","","pRipple","","type","button","icon","pi pi-arrow-left","pTooltip","Salir",1,"p-button-rounded","p-button-text",3,"click"],[1,"mo-panel-content"],[1,"p-fluid","grid"],[1,"p-field","col-12","md:col-12","form-group"],[1,"input-control-info"],[1,"p-field","col-12","md:col-12"],[3,"data","cellEnterValueEvent","rowActionEvent"],["dataeditor",""]],template:function(a,d){1&a&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2"),o._uU(7,"Costos de producto"),o.qZA()(),o.TgZ(8,"div",6)(9,"button",7),o.NdJ("click",function(){return d.salir()}),o.qZA()()(),o.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"label"),o._uU(14,"Producto:"),o.qZA(),o.TgZ(15,"span",11),o._uU(16),o.qZA()(),o.TgZ(17,"div",12)(18,"mo-dataeditor",13,14),o.NdJ("cellEnterValueEvent",function(M){return d.enterValue(M)})("rowActionEvent",function(M){return d.rowActionEvent(M)}),o.qZA()()()()()()()()),2&a&&(o.Q6J("hidden",!d.display),o.xp6(16),o.lnq("",d.producto.id," ",d.producto.nombre," - ",d.producto.comentario,""),o.xp6(2),o.Q6J("data",d.dataed))},dependencies:[O.u,y.Hq,Z.q],encapsulation:2})}return s})();const I=["form"];function R(s,Q){if(1&s){const e=o.EpF();o.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"div",8)(6,"h2"),o._uU(7,"Costos: Listado de productos"),o.qZA()(),o.TgZ(8,"div",9)(9,"label"),o._uU(10,"Producto:"),o.qZA(),o.TgZ(11,"p-dropdown",10),o.NdJ("onChange",function(d){o.CHM(e);const u=o.oxw();return o.KtG(u.onChangeTipo(d))}),o.qZA()()(),o.TgZ(12,"div",11)(13,"mo-report",12),o.NdJ("action",function(d){o.CHM(e);const u=o.oxw();return o.KtG(u.tableAction(d))}),o.qZA()()()()()()}if(2&s){const e=o.oxw();o.xp6(11),o.Q6J("options",e.tipos),o.xp6(2),o.Q6J("data",e.report)}}const U=[{path:"",component:g,children:[{path:"",component:(()=>{class s{constructor(e,a){this.dataService=e,this.confirmService=a,this.display=!0,this.currentTipo=new h.o,this.tipos=[],this.report={content:[],columns:[{field:"id",columnName:"Id"},{field:"nombre",columnName:"Producto"},{field:"comentario",columnName:"Comentario"},{field:"tipo.nombre",columnName:"Tipo"},{actions:[{iconclass:"pi pi-pencil",event:"costos",condition:d=>!0}]}]}}ngOnInit(){this.dataService.getdata("/ventas/costos/tipos",{}).subscribe(e=>{this.tipos=e,this.currentTipo=this.tipos[0],this.getdata()})}saveForm(){this.getdata()}getdata(){this.dataService.getdata("/ventas/costos/productos",{tipo:this.currentTipo.id}).subscribe(e=>{this.report.content=e})}tableAction(e){switch(e.event){case"costos":this.display=!1,this.form.open(e.row);break;case"delete":this.confirmService.setconfirm({message:"Eliminar el Producto '"+e.row.nombre+"'?",accept:()=>{this.dataService.deletedata("/almacen/producto",{id:e.row.id}).subscribe(d=>{this.getdata()})}})}}onChangeTipo(e){this.currentTipo=e.value,this.getdata()}formEvent(e){this.display=!0,console.log(e)}static#t=this.\u0275fac=function(a){return new(a||s)(o.Y36(v.D),o.Y36(x.I))};static#o=this.\u0275cmp=o.Xpm({type:s,selectors:[["productocosto-manage"]],viewQuery:function(a,d){if(1&a&&o.Gf(I,7),2&a){let u;o.iGM(u=o.CRH())&&(d.form=u.first)}},decls:3,vars:1,consts:[["class","mo-layout-content",4,"ngIf"],[3,"formEvent"],["form",""],[1,"mo-layout-content"],[1,"grid"],[1,"col-12"],[1,"card"],[1,"mo-toolsbar"],[1,"mo-first"],[1,"mo-second","form-group"],["appendTo","body","optionLabel","nombre",3,"options","onChange"],[1,"mo-panel-content"],[3,"data","action"]],template:function(a,d){1&a&&(o.YNc(0,R,14,2,"div",0),o.TgZ(1,"productocosto-form",1,2),o.NdJ("formEvent",function(M){return d.formEvent(M)}),o.qZA()),2&a&&o.Q6J("ngIf",d.display)},dependencies:[t.O5,P.Lt,E.t,b],encapsulation:2})}return s})()},{path:"**",redirectTo:""}]}];let i=(()=>{class s{static#t=this.\u0275fac=function(a){return new(a||s)};static#o=this.\u0275mod=o.oAB({type:s});static#n=this.\u0275inj=o.cJS({imports:[m.Bz.forChild(U),m.Bz]})}return s})();var p=r(8368),n=r(4553),c=r(4858);let l=(()=>{class s{static#t=this.\u0275fac=function(a){return new(a||s)};static#o=this.\u0275mod=o.oAB({type:s});static#n=this.\u0275inj=o.cJS({imports:[t.ez,i,p.U,n.W,c.V]})}return s})()},7635:(C,_,r)=>{r.d(_,{v:()=>o});var t=r(4946),m=r(6814);let o=(()=>{class f{constructor(h){this.datePipe=h}transform(h,...v){return this.datePipe.transform(h,"MM/yyyy")}static#t=this.\u0275fac=function(v){return new(v||f)(t.Y36(m.uU,16))};static#o=this.\u0275pipe=t.Yjl({name:"periodmonthFormat",type:f,pure:!0})}return f})()}}]);