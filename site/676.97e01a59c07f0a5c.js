"use strict";(self.webpackChunktukiweb=self.webpackChunktukiweb||[]).push([[676],{7841:(y,g,l)=>{l.d(g,{q:()=>j});var t=l(4946),u=l(6814),d=l(95),h=l(7492);const x=["inputid"];function p(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"input",2,3),t.NdJ("keypress",function(o){t.CHM(e);const c=t.oxw();return t.KtG(c.inputkeypress(o))})("ngModelChange",function(o){t.CHM(e);const c=t.oxw();return t.KtG(c.inputvalue=o)}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("ngModel",e.inputvalue)}}function w(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"mo-autocomplete",4,3),t.NdJ("itemSelected",function(o){t.CHM(e);const c=t.oxw();return t.KtG(c.autocompleteItemSelected(o))}),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("config",e.config)("path",e.path)}}let C=(()=>{class i{constructor(){this.inputvalue="",this.enterValueEvent=new t.vpe,this.path=""}ngOnInit(){}ngAfterViewInit(){switch(this.config.type){case void 0:case"date":case"text":case"numeric":this.input.nativeElement.focus();break;case"autocomplete":Promise.resolve().then(()=>this.input.setFocus())}}inputkeypress(e){if("Enter"===e.key){let n=this.validateInput(this.inputvalue);n.error||this.enterValueEvent.emit(n.value)}}autocompleteItemSelected(e){this.enterValueEvent.emit(e)}validateInput(e){switch(this.config.type){case void 0:case"text":return this.isText(e);case"numeric":return this.isNumeric(e);case"date":return this.isDate(e);default:return this.isText(e)}}isText(e){return void 0!==e&&e.length>0?{error:!1,value:e}:{error:!0,value:""}}isNumeric(e){let n="";return n=n+"^([\\d]{0,"+(this.config.precision-this.config.scale)+"})",this.config.scale>=2&&(n=n+"(.[\\d]{1,"+this.config.scale+"})?$"),n+="",new RegExp(n).test(e)?{error:!1,value:e}:{error:!0,value:""}}isDate(e){let n=e.match(/^([\d]{1,2})(\/([\d]{1,2}))?(\/([\d]{1,4}))?/i);if(null!==n){if(void 0===n[1])return{error:!0};let o=new Date,c=n[1],s=void 0!==n[3]?n[3]:o.getMonth()+1,_=void 0!==n[5]?n[5]:o.getFullYear(),m=new Date(parseInt(_+""),parseInt(s+"")-1,parseInt(c));if(isNaN(m.getDate()))return{error:!0};{let P=m.getMonth()+1;return{error:!1,value:m.getDate()+"/"+P+"/"+m.getFullYear()}}}return{error:!0}}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["mo-cellinput"]],viewQuery:function(n,o){if(1&n&&t.Gf(x,5),2&n){let c;t.iGM(c=t.CRH())&&(o.input=c.first)}},inputs:{config:"config",path:"path"},outputs:{enterValueEvent:"enterValueEvent"},decls:2,vars:2,consts:[["type","text",3,"ngModel","keypress","ngModelChange",4,"ngIf"],[3,"config","path","itemSelected",4,"ngIf"],["type","text",3,"ngModel","keypress","ngModelChange"],["inputid",""],[3,"config","path","itemSelected"]],template:function(n,o){1&n&&(t.YNc(0,p,2,1,"input",0),t.YNc(1,w,2,2,"mo-autocomplete",1)),2&n&&(t.Q6J("ngIf",void 0===o.config.type||"text"===o.config.type||"numeric"===o.config.type||"date"===o.config.type),t.xp6(1),t.Q6J("ngIf","autocomplete"===o.config.type))},dependencies:[u.O5,d.Fj,d.JJ,d.On,h.J],encapsulation:2})}return i})();var v=l(4621),r=l(2415);const k=["cellsArea"],M=["inputtype"];function f(i,a){if(1&i&&(t.TgZ(0,"th",6),t._uU(1),t.qZA()),2&i){const e=t.oxw(),n=e.index,o=e.$implicit,c=t.oxw();t.Udp("text-align",c.data.columns[n].align),t.xp6(1),t.hij("",o.columnName," ")}}function T(i,a){1&i&&t._UZ(0,"th",6)}function I(i,a){if(1&i&&(t.ynx(0),t.YNc(1,f,2,3,"th",4),t.YNc(2,T,1,0,"th",5),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.field),t.xp6(1),t.Q6J("ngIf",!e.field)}}function b(i,a){if(1&i&&(t.TgZ(0,"td")(1,"span"),t._uU(2),t.ALo(3,"dateFormat"),t.qZA()()),2&i){const e=t.oxw(2).index,n=t.oxw().index,o=t.oxw();t.Udp("text-align",o.data.columns[e].align),t.xp6(2),t.Oqu(t.lcZ(3,3,o.getfieldvalue(n,e)))}}function E(i,a){if(1&i&&(t.TgZ(0,"td")(1,"span"),t._uU(2),t.ALo(3,"datetimeFormat"),t.qZA()()),2&i){const e=t.oxw(2).index,n=t.oxw().index,o=t.oxw();t.Udp("text-align",o.data.columns[e].align),t.xp6(2),t.Oqu(t.lcZ(3,3,o.getfieldvalue(n,e)))}}function D(i,a){if(1&i&&(t.TgZ(0,"td")(1,"span"),t._uU(2),t.qZA()()),2&i){const e=t.oxw(2).index,n=t.oxw().index,o=t.oxw();t.Udp("text-align",o.data.columns[e].align),t.xp6(2),t.Oqu(o.getfieldvalue(n,e))}}function Z(i,a){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(3).index,n=t.oxw().index,o=t.oxw();t.xp6(1),t.Oqu(o.getfieldvalue(n,e))}}function A(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"mo-cellinput",12,13),t.NdJ("enterValueEvent",function(o){t.CHM(e);const c=t.oxw(5);return t.KtG(c.enterValue(o))}),t.qZA()}if(2&i){const e=t.oxw(3).index,n=t.oxw(2);t.Q6J("config",n.data.columns[e].input)("path",n.path)}}function J(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"td",10),t.NdJ("click",function(o){t.CHM(e);const c=t.oxw(2).index,s=t.oxw().index,_=t.oxw();return t.KtG(_.clickCell(o,{row:s,col:c}))}),t.YNc(1,Z,2,1,"span",7),t.YNc(2,A,2,2,"mo-cellinput",11),t.qZA()}if(2&i){const e=t.oxw(2),n=e.index,o=e.$implicit,c=t.oxw(2);t.Udp("text-align",c.data.columns[n].align),t.ekj("cell-selected",o.cellfocus),t.xp6(1),t.Q6J("ngIf",!o.input),t.xp6(1),t.Q6J("ngIf",o.input)}}function N(i,a){if(1&i&&(t.ynx(0),t.YNc(1,b,4,5,"td",8),t.YNc(2,E,4,5,"td",8),t.YNc(3,D,3,3,"td",8),t.YNc(4,J,3,6,"td",9),t.BQk()),2&i){const e=t.oxw(),n=e.$implicit,o=e.index,c=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!n.editable&&"date"===c.data.columns[o].type),t.xp6(1),t.Q6J("ngIf",!n.editable&&"datetime"===c.data.columns[o].type),t.xp6(1),t.Q6J("ngIf",!n.editable&&void 0===c.data.columns[o].type),t.xp6(1),t.Q6J("ngIf",n.editable)}}function O(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"a",15),t.NdJ("click",function(o){t.CHM(e);const c=t.oxw().$implicit,s=t.oxw(3).index,_=t.oxw();return t.KtG(_.rowEvent(o,_.data.content[s],c.event,s))}),t._UZ(1,"i"),t.qZA()}if(2&i){const e=t.oxw().$implicit;t.xp6(1),t.Tol(e.iconclass)}}function Q(i,a){if(1&i&&(t.ynx(0),t.YNc(1,O,2,3,"a",14),t.BQk()),2&i){const e=a.$implicit,n=t.oxw(3).index,o=t.oxw();t.xp6(1),t.Q6J("ngIf",e.condition(o.data.content[n]))}}function F(i,a){if(1&i&&(t.TgZ(0,"td"),t.YNc(1,Q,2,1,"ng-container",1),t.qZA()),2&i){const e=t.oxw().index,n=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",n.data.columns[e].actions)}}function Y(i,a){if(1&i&&(t.ynx(0),t.YNc(1,N,5,4,"ng-container",7),t.YNc(2,F,2,1,"td",7),t.BQk()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",void 0!==e.editable),t.xp6(1),t.Q6J("ngIf",void 0===e.editable)}}function V(i,a){if(1&i&&(t.TgZ(0,"tr"),t.YNc(1,Y,3,2,"ng-container",1),t.qZA()),2&i){const e=a.$implicit;t.xp6(1),t.Q6J("ngForOf",e)}}let j=(()=>{class i{constructor(){this.path="",this.cellEnterValueEvent=new t.vpe,this.rowActionEvent=new t.vpe,this.pos={row:0,col:0},this.cells=[],this.isInput=!1}ngOnInit(){}ngOnChanges(e){void 0!==e.data&&e.data.currentValue.length>0&&this.fp_updateCells()}updateData(e){this.cells=[],this.pos={row:0,col:0},this.data.content=e,this.fp_updateCells()}addRow(e,n){let o=!0;for(let c of this.data.content)if(mogetfieldvalue(c,n)===mogetfieldvalue(e,n)){o=!1;break}o&&(this.data.content.push(e),this.fp_addRowCell())}deleteRow(e,n){let o=!1,c=1;for(let s=0;s<this.data.content.length;s++)if(mogetfieldvalue(this.data.content[s],e)===n){o=!0,c=s;break}o&&(this.data.content.splice(c,1),this.cells.splice(c,1))}getfieldvalue(e,n){return mogetfieldvalue(this.data.content[e],this.data.columns[n].field)}rowEvent(e,n,o,c){e.preventDefault(),this.rowActionEvent.emit({event:o,row:n,index:c})}enterValue(e){let n={row:this.pos.row,field:this.data.columns[this.pos.col].field,value:e};this.fp_closeInput(),this.cellEnterValueEvent.emit(n)}keyboarddown(e){switch(e.key){case"ArrowRight":case"Enter":this.fp_moveCursor("right");break;case"ArrowLeft":this.fp_moveCursor("left");break;case"ArrowUp":this.fp_moveCursor("up");break;case"ArrowDown":this.fp_moveCursor("down");break;case"Escape":this.fp_closeInput();break;case"Tab":e.preventDefault(),this.fp_moveCursor("right");break;default:this.fp_showInput()}}clickCell(e,n){this.isInput||!this.cells[n.row][n.col].editable||this.fp_selectCell(n)}fp_showInput(){this.cells[this.pos.row][this.pos.col].input=!0,this.isInput=!0}fp_closeInput(){this.isInput&&(this.cells[this.pos.row][this.pos.col].input=!1,this.isInput=!1,this.cellsArea.nativeElement.focus())}fp_selectCell(e){this.cells[this.pos.row][this.pos.col].cellfocus=!1,this.cells[e.row][e.col].cellfocus=!0,this.pos=e,this.cellsArea.nativeElement.focus()}fp_moveCursor(e){if(this.isInput)return;let o,n={};switch(n.col=this.pos.col,n.row=this.pos.row,e){case"left":for(o=n.col;--o>=0;)if(this.data.columns[o].editable){n.col=o;break}break;case"up":n.row--,n.row<0&&(n.row=0);break;case"right":let c=this.data.columns.length;for(o=n.col;++o<c;)if(this.data.columns[o].editable){n.col=o;break}break;case"down":let s=this.cells.length;n.row++,n.row>=s&&(n.row=n.row-1)}this.fp_selectCell(n)}fp_updateCells(){this.data.content.forEach(()=>{this.fp_addRowCell()})}fp_addRowCell(){let e=[];this.data.columns.forEach(n=>{e.push({editable:n.editable,cellfocus:!1,input:!1})}),this.cells.push(e)}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["mo-dataeditor"]],viewQuery:function(n,o){if(1&n&&(t.Gf(k,7),t.Gf(M,5)),2&n){let c;t.iGM(c=t.CRH())&&(o.cellsArea=c.first),t.iGM(c=t.CRH())&&(o.inputtype=c.first)}},inputs:{path:"path",data:"data"},outputs:{cellEnterValueEvent:"cellEnterValueEvent",rowActionEvent:"rowActionEvent"},features:[t.TTD],decls:8,vars:2,consts:[[1,"customers"],[4,"ngFor","ngForOf"],["tabindex","1",1,"using-keyboard",3,"keydown"],["cellsArea",""],["scope","col",3,"text-align",4,"ngIf"],["scope","col",4,"ngIf"],["scope","col"],[4,"ngIf"],[3,"text-align",4,"ngIf"],[3,"cell-selected","text-align","click",4,"ngIf"],[3,"click"],[3,"config","path","enterValueEvent",4,"ngIf"],[3,"config","path","enterValueEvent"],["inputtype",""],["href","#",3,"click",4,"ngIf"],["href","#",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"table",0),t._UZ(1,"caption"),t.TgZ(2,"thead")(3,"tr"),t.YNc(4,I,3,2,"ng-container",1),t.qZA()(),t.TgZ(5,"tbody",2,3),t.NdJ("keydown",function(s){return o.keyboarddown(s)}),t.YNc(7,V,2,1,"tr",1),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngForOf",o.data.columns),t.xp6(3),t.Q6J("ngForOf",o.cells))},dependencies:[u.sg,u.O5,C,v.L,r.E],styles:[".customers[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}.customers[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:4px}.customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}.customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}.customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px;text-align:center;background-color:red;color:#fff}.using-keyboard[_ngcontent-%COMP%]:focus{outline:none}.cell-selected[_ngcontent-%COMP%]{border:1px solid rgb(21,150,255)}"]})}return i})()},4858:(y,g,l)=>{l.d(g,{V:()=>v});var t=l(6814),u=l(95),d=l(2105),h=l(3714),x=l(2454),p=l(4946);let w=(()=>{class r{static#t=this.\u0275fac=function(f){return new(f||r)};static#e=this.\u0275mod=p.oAB({type:r});static#n=this.\u0275inj=p.cJS({imports:[t.ez,h.j,u.u5,x.q,d.kW]})}return r})();var C=l(9177);let v=(()=>{class r{static#t=this.\u0275fac=function(f){return new(f||r)};static#e=this.\u0275mod=p.oAB({type:r});static#n=this.\u0275inj=p.cJS({imports:[t.ez,w,C.A]})}return r})()}}]);