"use strict";(self.webpackChunktukiweb=self.webpackChunktukiweb||[]).push([[202],{8202:(j,m,d)=>{d.r(m),d.d(m,{VentaDevolucionModule:()=>Y});var y=d(6814),l=d(7664),t=d(4946);let D=(()=>{class a{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["venta-devolucion-main"]],decls:1,vars:0,template:function(n,e){1&n&&t._UZ(0,"router-outlet")},dependencies:[l.lC],encapsulation:2})}return a})();var v=d(5413),T=d(3297),c=d(7757),p=d(1106),h=d(3259),u=d(95),f=d(9324),g=d(1532),s=d(6084),N=d(707),Z=d(2772),C=d(6130),E=d(5569),M=d(7841);const V=["dataeditor"];let F=(()=>{class a{constructor(o,n){this.dataService=o,this.confirmService=n,this.notaFormEvent=new t.vpe,this.nota=new s.Q,this.dev=new s.Q,this.datanotas={content:[],columns:[{editable:!1,field:"id",columnName:"Id"},{editable:!1,field:"producto.nombre",columnName:"Producto"},{editable:!0,field:"cantidad",columnName:"CANTIDAD",input:{type:"numeric",precision:"15",scale:"2"}},{actions:[{iconclass:"pi pi-trash",event:"delete",condition:e=>0!==e.id}]}]}}ngOnInit(){}newForm(o,n){this.dataService.getdata("/ventas/devolucion/nota",{id:o.id}).subscribe(e=>{this.nota=e,this.dev=n,this.initdev()})}updateForm(o){this.dataService.getdata("/ventas/devolucion/nota",{id:o.id}).subscribe(n=>{this.nota=n,this.fillform()})}foundCuenta(o){let n=new s.Q;n.transporte=this.nota.transporte,this.nota=n,this.nota.cuenta=o,this.fillform()}enterValue(o){mosetfieldvalue(this.dev.detalle[o.row],o.field,o.value);let n=this.dev.detalle[o.row];if(0!==n.cantidad){let e=new s.Q;e.id=this.dev.id,e.devrel=this.dev.devrel,e.transporte=this.dev.transporte,e.cuenta.id=this.dev.cuenta.id,e.detalle.push(new E.y),e.detalle[0].id=n.id,e.detalle[0].devrel=n.devrel,e.detalle[0].producto=n.producto,e.detalle[0].cantidad=n.cantidad,this.dataService.postdata("/ventas/devolucion/save",e).subscribe(i=>{this.dev.id=i.id,this.dev.total=i.total,this.dev.cuenta=i.cuenta,this.dev.devrel=i.devrel,this.dev.cuentadst=i.cuentadst,this.dev.detalle[o.row]=i.detalle[0],this.notaFormEvent.emit({action:"update",data:this.nota})})}}initdev(){this.dev.cuenta=this.nota.cuenta,this.dev.devrel=this.nota.id,this.dev.detalle=[],this.nota.detalle.forEach(o=>{let n=new E.y;n.producto=o.producto,n.devrel=o.id,this.dev.detalle.push(n)}),this.dataeditor.updateData(this.dev.detalle)}fillform(){this.nota.detalle.forEach(o=>{o.cantidad=0}),this.dataeditor.updateData(this.nota.detalle)}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(c.D),t.Y36(p.I))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["venta-devolucion-form"]],viewQuery:function(n,e){if(1&n&&t.Gf(V,7),2&n){let i;t.iGM(i=t.CRH())&&(e.dataeditor=i.first)}},outputs:{notaFormEvent:"notaFormEvent"},decls:13,vars:5,consts:[[1,"p-fluid","grid"],[1,"p-field","col-12","md:col-12","form-group"],["for","entidadnombre"],[1,"input-control"],[3,"data","cellEnterValueEvent"],["dataeditor",""]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"label",2),t._uU(3,"Entidad:"),t.qZA(),t.TgZ(4,"span",3),t._uU(5),t.qZA()(),t.TgZ(6,"div",1)(7,"label",2),t._uU(8,"Cuenta:"),t.qZA(),t.TgZ(9,"span",3),t._uU(10),t.qZA()()(),t.TgZ(11,"mo-dataeditor",4,5),t.NdJ("cellEnterValueEvent",function(r){return e.enterValue(r)}),t.qZA()),2&n&&(t.xp6(5),t.AsE("",e.dev.cuenta.entidad.id,"-",e.dev.cuenta.entidad.nombre,""),t.xp6(5),t.AsE("",e.dev.cuenta.id,"-",e.dev.cuenta.nombre,""),t.xp6(1),t.Q6J("data",e.datanotas))},dependencies:[M.q],encapsulation:2})}return a})();var A=d(8555),J=d(7492);let w=(()=>{class a{constructor(o){this.dataService=o,this.findNotaEvent=new t.vpe,this.cuenta=new A.r,this.findcuentacfg={path:"/ventas/devolucion/findbyentidad",columns:["id","nombre"]},this.report={content:[],rows:{class:"pendiente",condition:n=>"PENDIENTE"===n.nota.estado},columns:[{field:"nota.id",columnName:"ID"},{field:"nota.fecharealizado",columnName:"F.Realizado"},{field:"nota.tipo",columnName:"Tipo"},{field:"notadetalle.producto.nombre",columnName:"Producto"},{field:"notadetalle.cantidad",columnName:"Cantidad"},{field:"nota.estado",columnName:"Estado"},{actions:[{iconname:"arrow_forward",iconclass:"material-icons-outlined mo-icons-center",event:"devolucion",condition:n=>"REALIZADO"===n.nota.estado}]}]}}ngOnInit(){}updateData(o){this.cuenta=o,this.getData()}getData(){this.dataService.getdata("/ventas/ventaagalpon/galponnotas",{id:this.cuenta.id}).subscribe(o=>{this.report.content=o})}reportRowEvent(o){"devolucion"===o.event&&this.findNotaEvent.emit(o.row.nota)}cuentaSelected(o){this.cuenta=o,this.getData()}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(c.D))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["venta-find-nota"]],outputs:{findNotaEvent:"findNotaEvent"},decls:22,vars:8,consts:[[1,"card"],[1,"mo-toolsbar"],[1,"mo-first"],[1,"mo-second"],["for","entidad"],[3,"config","itemSelected"],[1,"p-fluid","grid","mo-panel-content"],[1,"p-field","col-12","md:col-12","form-group"],[1,"input-control"],[1,"p-field","col-12","md:col-12"],[3,"data","action"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),t._uU(4,"Lista de Notas"),t.qZA()(),t.TgZ(5,"div",3)(6,"label",4),t._uU(7,"Buscar por entidad:"),t.qZA(),t.TgZ(8,"mo-autocomplete",5),t.NdJ("itemSelected",function(r){return e.cuentaSelected(r)}),t.qZA()()(),t.TgZ(9,"div",6)(10,"div",7)(11,"label"),t._uU(12,"Entidad:"),t.qZA(),t.TgZ(13,"span",8),t._uU(14),t.qZA()(),t.TgZ(15,"div",7)(16,"label"),t._uU(17,"Cuenta:"),t.qZA(),t.TgZ(18,"span",8),t._uU(19),t.qZA()(),t.TgZ(20,"div",9)(21,"mo-report",10),t.NdJ("action",function(r){return e.reportRowEvent(r)}),t.qZA()()()()),2&n&&(t.xp6(8),t.Q6J("config",e.findcuentacfg),t.xp6(6),t.lnq("",e.cuenta.entidad.id," | ",e.cuenta.entidad.nombre," | ",e.cuenta.entidad.direccion,""),t.xp6(5),t.lnq("",e.cuenta.id," | ",e.cuenta.nombre," | ",e.cuenta.descripcion,""),t.xp6(2),t.Q6J("data",e.report))},dependencies:[f.t,J.J],encapsulation:2})}return a})();const S=["transform"],Q=["devform"],b=["notamanage"];let _=(()=>{class a{constructor(){this.path="",this.devLayoutEvent=new t.vpe,this.display=!1,this.transporte=new v.e}open(o){this.display=!0,this.transporte=o,this.transform.open(this.transporte),0!==o.id&&this.notamanage.update(this.transporte.id)}onTransFormEvent(o){this.transporte=o}onFindNotaEvent(o){let n=new s.Q;n.transporte=this.transporte,this.devform.newForm(o,n)}DevNotaForm(o){this.notamanage.update(this.transporte.id)}onNotaManageEvent(o){}salir(){this.display=!1,this.devLayoutEvent.emit({eventName:"exit"})}static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["venta-devolucion-manage-layout"]],viewQuery:function(n,e){if(1&n&&(t.Gf(S,7),t.Gf(Q,7),t.Gf(b,7)),2&n){let i;t.iGM(i=t.CRH())&&(e.transform=i.first),t.iGM(i=t.CRH())&&(e.devform=i.first),t.iGM(i=t.CRH())&&(e.notamanage=i.first)}},inputs:{path:"path"},outputs:{devLayoutEvent:"devLayoutEvent"},decls:25,vars:6,consts:[[1,"mo-layout-content",3,"hidden"],[1,"grid"],[1,"col-6"],[1,"card"],[1,"mo-toolsbar"],[1,"mo-first"],[1,"mo-second"],["pButton","","pRipple","","type","button","icon","pi pi-arrow-left","pTooltip","Salir",1,"p-button-rounded","p-button-text",3,"click"],[1,"mo-panel-content"],[3,"path","formEvent"],["transform",""],[3,"hidden"],[3,"findNotaEvent"],["findnota",""],[1,"card",3,"hidden"],[3,"notaFormEvent"],["devform",""],[3,"path","notaManageEvent"],["notamanage",""]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3"),t._uU(7,"Devolucion de productos"),t.qZA()(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return e.salir()}),t.qZA()()(),t.TgZ(10,"div",8)(11,"resp-form",9,10),t.NdJ("formEvent",function(r){return e.onTransFormEvent(r)}),t.qZA()()(),t.TgZ(13,"div",11)(14,"venta-find-nota",12,13),t.NdJ("findNotaEvent",function(r){return e.onFindNotaEvent(r)}),t.qZA()()(),t.TgZ(16,"div",2)(17,"div",14)(18,"div",8)(19,"venta-devolucion-form",15,16),t.NdJ("notaFormEvent",function(r){return e.DevNotaForm(r)}),t.qZA()()(),t.TgZ(21,"div",14)(22,"div",8)(23,"notas-manage",17,18),t.NdJ("notaManageEvent",function(r){return e.onNotaManageEvent(r)}),t.qZA()()()()()()),2&n&&(t.Q6J("hidden",!e.display),t.xp6(11),t.Q6J("path",e.path),t.xp6(2),t.Q6J("hidden",0===e.transporte.id),t.xp6(4),t.Q6J("hidden",0===e.transporte.id),t.xp6(4),t.Q6J("hidden",0===e.transporte.id),t.xp6(2),t.Q6J("path",e.path))},dependencies:[h.u,N.Hq,Z.Z,C.T,F,w],encapsulation:2})}return a})();const L=["form"],R=[{path:"",component:D,children:[{path:"",component:(()=>{class a{constructor(o,n){this.dataService=o,this.confirmService=n,this.path="/ventas/devolucion",this.display=!0,this.currentDate=new Date,this.data={content:[],rows:{class:"pendiente",condition:e=>"PENDIENTE"===e.estado},columns:[{field:"id",columnName:"Id"},{field:"fecha",columnName:"Fecha",type:"date"},{field:"conductor",columnName:"Conductor"},{field:"comentario",columnName:"Comentario"},{field:"estado",columnName:"Estado"},{field:"cantidad",columnName:"Alimento",align:"right"},{actions:[{iconname:"delete_forever",iconclass:"material-icons-round",event:"delete",condition:e=>"PENDIENTE"==e.estado},{iconname:"arrow_forward",iconclass:"material-icons-outlined mo-icons-center",event:"openform",condition:e=>!0}]}]}}ngOnInit(){this.getdata()}formEvent(o){this.getdata()}newResp(){this.form.open(new v.e),this.display=!1}ventaDevManageLayout(o){this.display=!0,this.getdata()}onReportEvent(o){switch(o.event){case"openform":this.display=!1,this.form.open(o.row);break;case"delete":this.confirmService.setconfirm({message:"Eliminar '"+o.row.id+"'?",accept:()=>{this.dataService.deletedata(this.path+"/respdelete",{id:o.row.id}).subscribe(e=>{this.getdata()})}})}}onSelectedDate(o){this.getdata()}getdata(){var o=new T.y;o.ordersby=["tr.id"],o.date=this.currentDate,this.dataService.postdata(this.path+"/resp",{date:this.currentDate}).subscribe(n=>{this.data.content=n})}static#t=this.\u0275fac=function(n){return new(n||a)(t.Y36(c.D),t.Y36(p.I))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["app-venta-devolucion-manage"]],viewQuery:function(n,e){if(1&n&&t.Gf(L,7),2&n){let i;t.iGM(i=t.CRH())&&(e.form=i.first)}},decls:17,vars:4,consts:[[1,"mo-layout-content",3,"hidden"],[1,"grid"],[1,"col-12"],[1,"card"],[1,"mo-toolsbar"],[1,"mo-first"],[1,"mo-second"],["pTooltip","Registrar Transporte",1,"mo-button",3,"click"],[1,"material-icons-outlined","mo-icons-center"],["dateFormat","dd MM yy","inputId","dateformat",3,"ngModel","ngModelChange","onSelect"],[1,"mo-panel-content"],[3,"data","action"],[3,"path","devLayoutEvent"],["form",""]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2"),t._uU(7,"Devolucion de productos"),t.qZA()(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return e.newResp()}),t.TgZ(10,"i",8),t._uU(11,"add_circle_outline"),t.qZA()(),t.TgZ(12,"p-calendar",9),t.NdJ("ngModelChange",function(r){return e.currentDate=r})("onSelect",function(r){return e.onSelectedDate(r)}),t.qZA()()(),t.TgZ(13,"div",10)(14,"mo-report",11),t.NdJ("action",function(r){return e.onReportEvent(r)}),t.qZA()()()()()(),t.TgZ(15,"venta-devolucion-manage-layout",12,13),t.NdJ("devLayoutEvent",function(r){return e.ventaDevManageLayout(r)}),t.qZA()),2&n&&(t.Q6J("hidden",!e.display),t.xp6(12),t.Q6J("ngModel",e.currentDate),t.xp6(2),t.Q6J("data",e.data),t.xp6(1),t.Q6J("path",e.path))},dependencies:[h.u,u.JJ,u.On,f.t,g.f,_],encapsulation:2})}return a})()},{path:"**",redirectTo:""}]}];let U=(()=>{class a{static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275mod=t.oAB({type:a});static#n=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(R),l.Bz]})}return a})();var I=d(8368),G=d(4553),H=d(2454),B=d(7213),O=d(9920),X=d(4858),z=d(1310),P=d(9604);let Y=(()=>{class a{static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275mod=t.oAB({type:a});static#n=this.\u0275inj=t.cJS({imports:[y.ez,U,I.U,z.H,P.w,G.W,H.q,X.V,u.UX,B.S,g._8,O.K]})}return a})()}}]);