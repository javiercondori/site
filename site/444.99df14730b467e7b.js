"use strict";(self.webpackChunktukiweb=self.webpackChunktukiweb||[]).push([[444],{4799:(O,x,s)=>{s.d(x,{q:()=>g});var t=s(4946),h=s(6814),f=s(95),C=s(7492);const m=["inputid"];function M(u,T){if(1&u){const c=t.EpF();t.TgZ(0,"input",2,3),t.NdJ("keypress",function(r){t.CHM(c);const p=t.oxw();return t.KtG(p.inputkeypress(r))})("ngModelChange",function(r){t.CHM(c);const p=t.oxw();return t.KtG(p.inputvalue=r)}),t.qZA()}if(2&u){const c=t.oxw();t.Q6J("ngModel",c.inputvalue)}}function w(u,T){if(1&u){const c=t.EpF();t.TgZ(0,"mo-autocomplete",4,3),t.NdJ("itemSelected",function(r){t.CHM(c);const p=t.oxw();return t.KtG(p.autocompleteItemSelected(r))}),t.qZA()}if(2&u){const c=t.oxw();t.Q6J("config",c.config)("path",c.path)}}let g=(()=>{class u{constructor(){this.inputvalue="",this.enterValueEvent=new t.vpe,this.path=""}ngOnInit(){}ngAfterViewInit(){switch(this.config.type){case void 0:case"date":case"text":case"numeric":this.input.nativeElement.focus();break;case"autocomplete":Promise.resolve().then(()=>this.input.setFocus())}}inputkeypress(c){if("Enter"===c.key){let l=this.validateInput(this.inputvalue);l.error||this.enterValueEvent.emit(l.value)}}autocompleteItemSelected(c){this.enterValueEvent.emit(c)}validateInput(c){switch(this.config.type){case void 0:case"text":return this.isText(c);case"numeric":return this.isNumeric(c);case"date":return this.isDate(c);default:return this.isText(c)}}isText(c){return void 0!==c&&c.length>0?{error:!1,value:c}:{error:!0,value:""}}isNumeric(c){let l="";return l=l+"^([\\d]{0,"+(this.config.precision-this.config.scale)+"})",this.config.scale>=2&&(l=l+"(.[\\d]{1,"+this.config.scale+"})?$"),l+="",new RegExp(l).test(c)?{error:!1,value:c}:{error:!0,value:""}}isDate(c){let l=c.match(/^([\d]{1,2})(\/([\d]{1,2}))?(\/([\d]{1,4}))?/i);if(null!==l){if(void 0===l[1])return{error:!0};let r=new Date,p=l[1],I=void 0!==l[3]?l[3]:r.getMonth()+1,b=void 0!==l[5]?l[5]:r.getFullYear(),E=new Date(parseInt(b+""),parseInt(I+"")-1,parseInt(p));if(isNaN(E.getDate()))return{error:!0};{let y=E.getMonth()+1;return{error:!1,value:E.getDate()+"/"+y+"/"+E.getFullYear()}}}return{error:!0}}static#t=this.\u0275fac=function(l){return new(l||u)};static#e=this.\u0275cmp=t.Xpm({type:u,selectors:[["mo-cellinput"]],viewQuery:function(l,r){if(1&l&&t.Gf(m,5),2&l){let p;t.iGM(p=t.CRH())&&(r.input=p.first)}},inputs:{config:"config",path:"path"},outputs:{enterValueEvent:"enterValueEvent"},decls:2,vars:2,consts:[["type","text",3,"ngModel","keypress","ngModelChange",4,"ngIf"],[3,"config","path","itemSelected",4,"ngIf"],["type","text",3,"ngModel","keypress","ngModelChange"],["inputid",""],[3,"config","path","itemSelected"]],template:function(l,r){1&l&&(t.YNc(0,M,2,1,"input",0),t.YNc(1,w,2,2,"mo-autocomplete",1)),2&l&&(t.Q6J("ngIf",void 0===r.config.type||"text"===r.config.type||"numeric"===r.config.type||"date"===r.config.type),t.xp6(1),t.Q6J("ngIf","autocomplete"===r.config.type))},dependencies:[h.O5,f.Fj,f.JJ,f.On,C.J],encapsulation:2})}return u})()},5043:(O,x,s)=>{s.d(x,{O:()=>k});var t=s(4946),h=s(6814),f=s(4799);const C=["cellsArea"],m=["inputtype"];function M(o,a){if(1&o&&(t.TgZ(0,"th",6),t._uU(1),t.qZA()),2&o){const e=t.oxw(),n=e.index,i=e.$implicit,_=t.oxw();t.Udp("text-align",_.columns[n].align),t.xp6(1),t.hij("",i.columnName," ")}}function w(o,a){1&o&&t._UZ(0,"th",6)}function g(o,a){if(1&o&&(t.ynx(0),t.YNc(1,M,2,3,"th",4),t.YNc(2,w,1,0,"th",5),t.BQk()),2&o){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",e.field),t.xp6(1),t.Q6J("ngIf",!e.field)}}function u(o,a){if(1&o&&(t.TgZ(0,"td")(1,"span"),t._uU(2),t.qZA()()),2&o){const e=t.oxw(2).index,n=t.oxw().index,i=t.oxw();t.Udp("text-align",i.columns[e].align),t.xp6(2),t.Oqu(i.getfieldvalue(n,e))}}function T(o,a){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw(3).index,n=t.oxw().index,i=t.oxw();t.xp6(1),t.Oqu(i.getfieldvalue(n,e))}}function c(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"mo-cellinput",12,13),t.NdJ("enterValueEvent",function(i){t.CHM(e);const _=t.oxw(5);return t.KtG(_.enterValue(i))}),t.qZA()}if(2&o){const e=t.oxw(3).index,n=t.oxw(2);t.Q6J("config",n.columns[e].input)}}function l(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"td",10),t.NdJ("click",function(i){t.CHM(e);const _=t.oxw(2).index,d=t.oxw().index,v=t.oxw();return t.KtG(v.clickCell(i,{row:d,col:_}))}),t.YNc(1,T,2,1,"span",7),t.YNc(2,c,2,1,"mo-cellinput",11),t.qZA()}if(2&o){const e=t.oxw(2),n=e.index,i=e.$implicit,_=t.oxw(2);t.Udp("text-align",_.columns[n].align),t.ekj("cell-selected",i.cellfocus),t.xp6(1),t.Q6J("ngIf",!i.input),t.xp6(1),t.Q6J("ngIf",i.input)}}function r(o,a){if(1&o&&(t.ynx(0),t.YNc(1,u,3,3,"td",8),t.YNc(2,l,3,6,"td",9),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!e.editable),t.xp6(1),t.Q6J("ngIf",e.editable)}}function p(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"a",15),t.NdJ("click",function(i){t.CHM(e);const _=t.oxw().$implicit,d=t.oxw(3).index,v=t.oxw();return t.KtG(v.rowEvent(i,v.data[d],_.event))}),t._UZ(1,"i"),t.qZA()}if(2&o){const e=t.oxw().$implicit;t.xp6(1),t.Tol(e.icon)}}function I(o,a){if(1&o&&(t.ynx(0),t.YNc(1,p,2,3,"a",14),t.BQk()),2&o){const e=a.$implicit,n=t.oxw(3).index,i=t.oxw();t.xp6(1),t.Q6J("ngIf",e.condition(i.data[n]))}}function b(o,a){if(1&o&&(t.TgZ(0,"td"),t.YNc(1,I,2,1,"ng-container",1),t.qZA()),2&o){const e=t.oxw().index,n=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",n.columns[e].actions)}}function E(o,a){if(1&o&&(t.ynx(0),t.YNc(1,r,3,2,"ng-container",7),t.YNc(2,b,2,1,"td",7),t.BQk()),2&o){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf",void 0!==e.editable),t.xp6(1),t.Q6J("ngIf",void 0===e.editable)}}function y(o,a){if(1&o&&(t.TgZ(0,"tr"),t.YNc(1,E,3,2,"ng-container",1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Q6J("ngForOf",e)}}let k=(()=>{class o{constructor(){this.cellEnterValueEvent=new t.vpe,this.rowActionEvent=new t.vpe,this.pos={row:0,col:0},this.cells=[],this.isInput=!1}ngOnInit(){}ngOnChanges(e){void 0!==e.data&&e.data.currentValue.length>0&&this.fp_updateCells()}updateData(e){this.cells=[],this.pos={row:0,col:0},this.data=e,this.fp_updateCells()}addRow(e,n){let i=!0;for(let _ of this.data)if(mogetfieldvalue(_,n)===mogetfieldvalue(e,n)){i=!1;break}i&&(this.data.push(e),this.fp_addRowCell())}deleteRow(e,n){let i=!1,_=1;for(let d=0;d<this.data.length;d++)if(mogetfieldvalue(this.data[d],e)===n){i=!0,_=d;break}i&&(this.data.splice(_,1),this.cells.splice(_,1))}getfieldvalue(e,n){return mogetfieldvalue(this.data[e],this.columns[n].field)}rowEvent(e,n,i){e.preventDefault(),this.rowActionEvent.emit({event:i,row:n,index:this.pos.row})}enterValue(e){let n={row:this.pos.row,field:this.columns[this.pos.col].field,value:e};this.fp_closeInput(),this.cellEnterValueEvent.emit(n)}keyboarddown(e){switch(e.key){case"ArrowRight":case"Enter":this.fp_moveCursor("right");break;case"ArrowLeft":this.fp_moveCursor("left");break;case"ArrowUp":e.preventDefault(),this.fp_moveCursor("up");break;case"ArrowDown":e.preventDefault(),this.fp_moveCursor("down");break;case"Escape":this.fp_closeInput();break;default:this.fp_showInput()}}clickCell(e,n){this.isInput||!this.cells[n.row][n.col].editable||this.fp_selectCell(n)}fp_showInput(){this.cells[this.pos.row][this.pos.col].input=!0,this.isInput=!0}fp_closeInput(){this.isInput&&(this.cells[this.pos.row][this.pos.col].input=!1,this.isInput=!1,this.cellsArea.nativeElement.focus())}fp_selectCell(e){this.cells[this.pos.row][this.pos.col].cellfocus=!1,this.cells[e.row][e.col].cellfocus=!0,this.pos=e,this.cellsArea.nativeElement.focus()}fp_moveCursor(e){if(this.isInput)return;let i,n={};switch(n.col=this.pos.col,n.row=this.pos.row,e){case"left":for(i=n.col;--i>=0;)if(this.columns[i].editable){n.col=i;break}break;case"up":n.row--,n.row<0&&(n.row=0);break;case"right":let _=this.columns.length;for(i=n.col;++i<_;)if(this.columns[i].editable){n.col=i;break}break;case"down":let d=this.cells.length;n.row++,n.row>=d&&(n.row=n.row-1)}this.fp_selectCell(n)}fp_updateCells(){this.data.forEach(e=>{this.fp_addRowCell()})}fp_addRowCell(){let e=[];this.columns.forEach(n=>{e.push({editable:n.editable,cellfocus:!1,input:!1})}),this.cells.push(e)}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["mo-tableeditor"]],viewQuery:function(n,i){if(1&n&&(t.Gf(C,7),t.Gf(m,5)),2&n){let _;t.iGM(_=t.CRH())&&(i.cellsArea=_.first),t.iGM(_=t.CRH())&&(i.inputtype=_.first)}},inputs:{data:["datatable","data"],columns:"columns"},outputs:{cellEnterValueEvent:"cellEnterValueEvent",rowActionEvent:"rowActionEvent"},features:[t.TTD],decls:8,vars:2,consts:[[1,"customers"],[4,"ngFor","ngForOf"],["tabindex","1",1,"using-keyboard",3,"keydown"],["cellsArea",""],["scope","col",3,"text-align",4,"ngIf"],["scope","col",4,"ngIf"],["scope","col"],[4,"ngIf"],[3,"text-align",4,"ngIf"],[3,"cell-selected","text-align","click",4,"ngIf"],[3,"click"],[3,"config","enterValueEvent",4,"ngIf"],[3,"config","enterValueEvent"],["inputtype",""],["href","#",3,"click",4,"ngIf"],["href","#",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"table",0),t._UZ(1,"caption"),t.TgZ(2,"thead")(3,"tr"),t.YNc(4,g,3,2,"ng-container",1),t.qZA()(),t.TgZ(5,"tbody",2,3),t.NdJ("keydown",function(d){return i.keyboarddown(d)}),t.YNc(7,y,2,1,"tr",1),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngForOf",i.columns),t.xp6(3),t.Q6J("ngForOf",i.cells))},dependencies:[h.sg,h.O5,f.q],styles:[".customers[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}.customers[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:4px}.customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}.customers[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#ddd}.customers[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:3px;padding-bottom:3px;text-align:center;background-color:#449d44;color:#fff}.using-keyboard[_ngcontent-%COMP%]:focus{outline:none}.cell-selected[_ngcontent-%COMP%]{border:1px solid rgb(21,150,255)}"]})}return o})()},3500:(O,x,s)=>{s.d(x,{K:()=>w});var t=s(6814),h=s(95),f=s(2105),C=s(3714),m=s(961),M=s(4946);let w=(()=>{class g{static#t=this.\u0275fac=function(c){return new(c||g)};static#e=this.\u0275mod=M.oAB({type:g});static#n=this.\u0275inj=M.cJS({imports:[t.ez,C.j,h.u5,m.q,f.kW]})}return g})()},1494:(O,x,s)=>{s.d(x,{l:()=>C});var t=s(6814),h=s(3500),f=s(4946);let C=(()=>{class m{static#t=this.\u0275fac=function(g){return new(g||m)};static#e=this.\u0275mod=f.oAB({type:m});static#n=this.\u0275inj=f.cJS({imports:[t.ez,h.K]})}return m})()}}]);